(this["webpackJsonpxcube-viewer"]=this["webpackJsonpxcube-viewer"]||[]).push([[0],{400:function(e){e.exports=JSON.parse('{"name":"default","server":{"id":"local","name":"Local Server","url":"http://localhost:8080"},"branding":{"appBarTitle":"xcube Viewer","windowTitle":"xcube Viewer","windowIcon":null,"compact":false,"themeName":"light","primaryColor":"blue","secondaryColor":"pink","organisationUrl":"https://xcube.readthedocs.io/","logoImage":"images/logo.png","logoWidth":32,"baseMapUrl":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","defaultAgg":"mean","polygonFillOpacity":0.2,"mapProjection":"EPSG:3857","allowDownloads":true,"allowRefresh":true,"allowViewModePython":true}}')},511:function(e){e.exports=JSON.parse('{"languages":{"en":"English","de":"Deutsch","it":"Italiano","ro":"Romanian","se":"Svenska"},"dictionary":[{"en":"OK","de":"OK","it":"OK","ro":"OK","se":"OK"},{"en":"Cancel","de":"Abbrechen","it":"Annulla","ro":"Anulare","se":"Avbryt"},{"en":"Save","de":"Speichern","it":"Salvare","ro":"Salva","se":"Spara"},{"en":"Select","de":"Ausw\xe4hlen","it":"Selezionare","ro":"Selecta\u021bi","se":"V\xe4lj"},{"en":"Add","de":"Hinzuf\xfcgen","it":"Aggiungere","ro":"Ad\u0103uga","se":"L\xe4gg till"},{"en":"Edit","de":"Bearbeiten","it":"Modificare","ro":"Edita","se":"Redigera"},{"en":"Remove","de":"Entfernen","it":"Eliminare","ro":"Elimina","se":"Ta bort"},{"en":"Dataset","de":"Datensatz","it":"Dataset","ro":"Dataset","se":"Dataset"},{"en":"Variable","de":"Variable","it":"Variabile","ro":"Variabil","se":"Variabel"},{"en":"My places","de":"Meine Orte","it":"Miei Siti","ro":"Locurile mele","se":"Mina platser"},{"en":"Loading places","de":"Lade Orte","it":"Caricamento dei posti","ro":"\xcenc\u0103rcarea locuri","se":"Laddar platser"},{"en":"Places","de":"Orte","it":"Siti","ro":"Locuri","se":"Platser"},{"en":"Place","de":"Ort","it":"Sito","ro":"Loc","se":"Plats"},{"en":"Time","de":"Zeit","it":"Tempo","ro":"Timp","se":"Tid"},{"en":"Missing time axis","de":"Fehlende Zeitachse","it":"Asse del tempo mancante","ro":"Lipse\u0219te axa timpului","se":"Saknar tidsaxel"},{"en":"Geometry type","de":"Geometry-Typ","it":"Tipo di geometria","ro":"Tip de geometrie","se":"Geometri typ"},{"en":"Point","de":"Punkt","it":"Punto","ro":"Punct","se":"Punkt"},{"en":"Polygon","de":"Polygon","it":"Poligono","ro":"Poligon","se":"Polygon"},{"en":"Circle","de":"Kreis","it":"Cerchio","ro":"Cerc","se":"Cirkel"},{"en":"Multi","de":"Multi","it":"Multi","ro":"Multi","se":"Multi"},{"en":"Something went wrong.","de":"Irgendetwas lief schief.","it":"Qualcosa \xe8 andato storto.","ro":"Ceva n-a mers bine.","se":"N\xe5got gick fel."},{"en":"Time-Series","de":"Zeitserie","it":"Time-Series","ro":"Time-Series","se":"Tidsserier"},{"en":"unknown units","de":"unbekannte Einheiten","it":"unit\xe0 sconosciute","ro":"unit\u0103\u021bi necunoscute","se":"ok\xe4nda enheter"},{"en":"Values","de":"Werte","it":"Valori","ro":"Valori","se":"V\xe4rden"},{"en":"Start","de":"Start","it":"Inizio","ro":"Start","se":"Start"},{"en":"Stop","de":"Stopp","it":"Fermare","ro":"Stop","se":"Stopp"},{"en":"Please wait...","de":"Bitte warten...","it":"Attendere prego...","ro":"Te rog asteapta...","se":"V\xe4nta ..."},{"en":"Loading data","de":"Lade Daten","it":"Attendere prego","ro":"\xcenc\u0103rcare date","se":"Laddar data"},{"en":"Connecting to server","de":"Verbindung zum Server wird hergestellt","it":"Connessione al server","ro":"Conectare la server","se":"Ansluta till servern"},{"en":"Cannot reach server","de":"Kann Server nicht erreichen","it":"Impossibile raggiungere il server","ro":"Nu se poate ajunge la server","se":"Kan inte n\xe5 servern"},{"en":"Language","de":"Sprache","it":"Linguaggio","ro":"Limba","se":"Spr\xe5k"},{"en":"Settings","de":"Einstellungen","it":"Impostazioni","ro":"Set\u0103ri","se":"Inst\xe4llningar"},{"en":"General","de":"Allgemein","it":"Generalmente","ro":"General","se":"Allm\xe4nhet"},{"en":"System Informations","de":"Systeminformationen","it":"Informazioni sul Sistema","ro":"Informa\u021bii de Sistem","se":"Systeminformation"},{"en":"version","de":"Version","it":"versione","ro":"versiune","se":"Version"},{"en":"Server","de":"Server","it":"Server","ro":"Server","se":"Server"},{"en":"Add Server","de":"Server hinzuf\xfcgen","it":"Aggiungi Server","ro":"Adauga Server","se":"L\xe4gg till server"},{"en":"Edit Server","de":"Server bearbeiten","it":"Modifica Server","ro":"Edita\u021bi Serverul","se":"Redigera server"},{"en":"Select Server","de":"Server ausw\xe4hlen","it":"Seleziona Server","ro":"Selecta\u021bi Server","se":"V\xe4lj server"},{"en":"On","de":"An","it":"Acceso","ro":"Pornit","se":"P\xe5"},{"en":"Off","de":"Aus","it":"Spento","ro":"Oprit","se":"Av"},{"en":"Time interval of the player","de":"Zeitintervall des Abspielers","it":"Intervallo di tempo del giocatore","ro":"Intervalul de timp al juc\u0103torului","se":"Spelarens tidsintervall"},{"en":"Show graph after adding a place","de":"Graph anzeigen, nachdem ein Ort hinzugef\xfcgt wurde","it":"Mostra diagramma dopo aver aggiunto un luogo","ro":"Afi\u0219eaz\u0103 diagrama dup\u0103 ad\u0103ugarea unui loc","se":"Visa diagram efter att du har lagt till en plats"},{"en":"Show dots only, hide lines","de":"Nur Punkte anzeigen, Linien ausblenden","it":"Mostra solo punti, nascondi linee","ro":"Arat\u0103 doar puncte, ascunde liniile","se":"Visa bara punkter, d\xf6lj linjer"},{"en":"Show error bars","de":"Fehlerbalken anzeigen","it":"Mostra barre di errore","ro":"Afi\u0219eaz\u0103 bare de eroare","se":"Visa felstaplar"},{"en":"Show median instead of mean (disables error bars)","de":"Median statt Mittelwert anzeigen (deaktiviert Fehlerbalken)","it":"Mostra la mediana invece della media (disabilita le barre di errore)","ro":"Arat\u0103 mediana \xeen loc de medie (dezactiveaz\u0103 barele de eroare)","se":"Visa median i st\xe4llet f\xf6r medelv\xe4rde (inaktiverar felf\xe4lt)"},{"en":"Minimal number of data points in a time series update","de":"Minimale Anzahl Datenpunkte in einer Zeitreihen-Aktualisierung","it":"Numero minimo di punti dati in un aggiornamento delle serie temporali","ro":"Num\u0103r minim de puncte de date \xeentr -o actualizare a seriilor de timp","se":"Minimalt antal datapunkter i en tidsserieuppdatering"},{"en":"Map","de":"Karte","it":"Carta","ro":"Hart\u0103","se":"Karta"},{"en":"Projection","de":"Projektion","it":"Proiezione","ro":"Proiec\u021bie","se":"Projektion"},{"en":"Geographic","de":"Geografisch","it":"Geograficamente","ro":"Geografic","se":"Geografiskt"},{"en":"Mercator","de":"Mercator","it":"Mercatore","ro":"Mercator","se":"Mercator"},{"en":"Image smoothing","de":"Bildgl\xe4ttung","it":"Levigatura dell\'immagine","ro":"Netezirea imaginii","se":"Bildutj\xe4mning"},{"en":"Show dataset boundaries","de":"Datensatzgrenzen anzeigen","it":"Mostra i limiti del set di dati","ro":"Afi\u0219a\u021bi limitele setului de date","se":"Visa dataupps\xe4ttningsgr\xe4nser"},{"en":"Base map","de":"Basiskarte","it":"Mappa di base","ro":"Harta de baz\u0103","se":"Grundkarta"},{"en":"Hide small values","de":"Kleine Werte ausblenden","it":"Nascondere valori piccoli","ro":"Ascunde\u021bi valorile mici","se":"D\xf6lja sm\xe5 v\xe4rden"},{"en":"Reverse","de":"Umkehren","it":"Invertire","ro":"Reverse","se":"Omv\xe4nt"},{"en":"Opacity","de":"Opazit\xe4t","it":"Opacit\xe0","ro":"Opacitate","se":"Opacitet"},{"en":"Dataset information","de":"Informationen zum Datensatz","it":"Informazioni sul set di dati","ro":"Informa\u021bii despre setul de date","se":"Information om dataset"},{"en":"Variable information","de":"Informationen zur Variablen","it":"Informazioni sulla variabile","ro":"Informa\u021bii despre variabil\u0103","se":"Information om variabeln"},{"en":"Place information","de":"Informationen zum Ort","it":"Informazioni sulla posizione","ro":"Informa\u021bii despre loca\u021bie","se":"Platsinformation"},{"en":"Dimension names","de":"Namen der Dimensionen","it":"Nomi delle dimensioni","ro":"Numele dimensiunilor","se":"Dimensioner namn"},{"en":"Dimension data types","de":"Datentypen der Dimensionen","it":"Tipi di dati dimensione","ro":"Tipuri de date cu dimensiuni","se":"Dimensionsdatatyper"},{"en":"Dimension lengths","de":"L\xe4nge der Dimensionen","it":"Lunghezza delle dimensioni","ro":"Lungimea dimensiunilor","se":"M\xe5ttl\xe4ngder"},{"en":"Time chunk size","de":"Zeitblockgr\xf6\xdfe","it":"Dimensione del blocco temporale","ro":"Dimensiunea blocului de timp","se":"Tidsblockstorlek"},{"en":"Geographical extent","de":"Geografische Ausdehnung","it":"Estensione geografica","ro":"M\u0103rimea geografic\u0103","se":"Geografisk omfattning"},{"en":"Spatial reference system","de":"R\xe4umliches Bezugssystem","it":"Sistema di riferimento spaziale","ro":"Sistem de referin\u021b\u0103 spa\u021bial\u0103","se":"Rumsligt referenssystem"},{"en":"Name","de":"Name","it":"Nome","ro":"Nume","se":"Namn"},{"en":"Title","de":"Titel","it":"Titolo","ro":"Titlu","se":"Titel"},{"en":"Units","de":"Einheiten","it":"Unit\xe0","ro":"Unit\u0103\u021bi","se":"Enheter"},{"en":"Data type","de":"Datentyp","it":"Tipo di dati","ro":"Tipul de date","se":"Datatyp"},{"en":"There is no information available for this location.","de":"Zu diesem Ort sind keine keine Informationen vorhanden.","it":"Non ci sono informazioni disponibili per questa posizione.","ro":"Nu exist\u0103 informa\u021bii disponibile pentru aceast\u0103 loca\u021bie.","se":"Det finns ingen information tillg\xe4nglig f\xf6r den h\xe4r platsen."},{"en":"Log out","de":"Abmelden","it":"Disconnettersi","ro":"Deconecta\u021bi-v\u0103","se":"Logga ut"},{"en":"Profile","de":"Profil","it":"Profilo","ro":"Profil","se":"Profil"},{"en":"User Profile","de":"Nutzerprofil","it":"Profilo Utente","ro":"Profil de Utilizator","se":"Anv\xe4ndarprofil"},{"en":"User name","de":"Nutzername","it":"Nome utente","ro":"Nume de utilizator","se":"Anv\xe4ndarnamn"},{"en":"E-mail","de":"E-mail","it":"E-mail","ro":"E-mail","se":"E-post"},{"en":"Nickname","de":"Spitzname","it":"Soprannome","ro":"Porecl\u0103","se":"Smeknamn"},{"en":"verified","de":"verifiziert","it":"verificata","ro":"verificat","se":"verified"},{"en":"not verified","de":"nicht verifiziert","it":"non verificato","ro":"nu e verificat","se":"inte verifierad"},{"en":"RGB","de":"RGB","it":"RGB","ro":"RGB","se":"RGB"},{"en":"Imprint","de":"Impressum","it":"Impronta","ro":"Imprima","se":"Avtryck"},{"en":"User Manual","de":"Benutzerhandbuch","it":"Manuale d\'Uso","ro":"Manual de Utilizare","se":"Anv\xe4ndarmanual"},{"en":"Show time-series diagram","de":"Zeitserien-Diagramm anzeigen","it":"Mostra diagramma serie storiche","ro":"Afi\u0219eaz\u0103 diagrama seriei de timp","se":"Visa tidsseriediagram"},{"en":"Help","de":"Hilfe","it":"Aiuto","ro":"Ajutor","se":"Hj\xe4lp"},{"en":"Export data","de":"Daten exportieren","it":"Esporta dati","ro":"Export de date","se":"Exportera data"},{"en":"Export Settings","de":"Export-Einstellungen","it":"Esporta Impostazioni","ro":"Exporta\u021bi Set\u0103rile","se":"Exportera Inst\xe4llningar"},{"en":"Include time-series data","de":"Zeitseriendaten einschlie\xdfen","it":"Includi dati di serie temporali","ro":"Include\u021bi datele seriilor temporale","se":"Inkludera tidsseriedata"},{"en":"Include places data","de":"Ortsdaten einschlie\xdfen","it":"Includere i dati sui luoghi","ro":"Include date despre locuri","se":"Inkludera platsdata"},{"en":"File name","de":"Dateiname","it":"Nome del file","ro":"Nume de fi\u0219ier","se":"Filnamn"},{"en":"Separator for time-series data","de":"Trennzeichen f\xfcr Zeitreihendaten","it":"Separatore per dati di serie temporali","ro":"Separator pentru datele din seria temporal\u0103","se":"Separator f\xf6r tidsseriedata"},{"en":"Combine place data in one file","de":"Ortsdaten in einer Datei zusammenfassen","it":"Combina i dati sulla posizione in un file","ro":"Combina\u021bi datele despre loca\u021bie \xeentr-un singur fi\u0219ier","se":"Kombinera platsdata i en fil"},{"en":"As ZIP archive","de":"Als ZIP-Archiv","it":"Come archivio ZIP","ro":"Ca arhiv\u0103 ZIP","se":"Som ett ZIP-arkiv"},{"en":"Download","de":"Herunterladen","it":"Scarica","ro":"Descarca","se":"Ladda ner"},{"en":"Show selected place in map","de":"Ausgew\xe4hlten Ort in der Karte anzeigen","it":"Mostra il luogo selezionato sulla mappa","ro":"Afi\u0219a\u021bi loca\u021bia selectat\u0103 pe hart\u0103","se":"Visa vald plats p\xe5 kartan"},{"en":"Open information panel","de":"Informationsfeld \xf6ffnen","it":"Apri il pannello delle informazioni","ro":"Deschide\u021bi panoul de informa\u021bii","se":"\xd6ppet informationsf\xe4lt"},{"en":"Select a place in map","de":"Ort in der Karte ausw\xe4hlen","it":"Seleziona la posizione sulla mappa","ro":"Selecta\u021bi loca\u021bia pe hart\u0103","se":"V\xe4lj plats p\xe5 kartan"},{"en":"Add a point location in map","de":"Punkt zur Karte hinzuf\xfcgen","it":"Aggiungi punto alla mappa","ro":"Ad\u0103uga\u021bi punct pe hart\u0103","se":"L\xe4gg till punkt p\xe5 kartan"},{"en":"Draw a polygon area in map","de":"Polygonale Fl\xe4che in der Karte zeichnen","it":"Disegna una superficie poligonale sulla mappa","ro":"Desena\u021bi o suprafa\u021b\u0103 poligonal\u0103 pe hart\u0103","se":"Rita en polygonal yta p\xe5 kartan"},{"en":"Draw a circular area in map","de":"Kreisf\xf6rmige Fl\xe4che in der Karte zeichnen","it":"Disegna un\'area circolare sulla mappa","ro":"Desena\u021bi o zon\u0103 circular\u0103 pe hart\u0103","se":"Rita ett cirkul\xe4rt omr\xe5de p\xe5 kartan"},{"en":"Remove place","de":"Ort entfernen","it":"Rimuovi posizione","ro":"Elimina\u021bi loca\u021bia","se":"Ta bort plats"},{"en":"Remove places","de":"Orte entfernen","it":"Rimuovi luoghi","ro":"Elimina\u021bi locurile","se":"Ta bort platser"},{"en":"Show RGB layer instead","de":"Stattdessen RGB-Layer anzeigen","it":"Mostra invece il livello RGB","ro":"Afi\u0219eaz\u0103 \xeen schimb stratul RGB","se":"Visa RGB-lager ist\xe4llet"},{"en":"Auto-step through times in the dataset","de":"Zeiten im Datensatz automatisch durchlaufen","it":"Esegui i tempi nel set di dati automaticamente","ro":"Rula\u021bi perioadele \xeen \xeenregistrarea de date \xeen mod automat","se":"K\xf6r automatiskt genom tider i dataposten"},{"en":"Select time in dataset","de":"Datensatz-Zeit ausw\xe4hlen","it":"Seleziona l\'ora nel set di dati","ro":"Selecta\u021bi ora \xeen setul de date","se":"V\xe4lj tid i dataset"},{"en":"Refresh","de":"Aktualisieren","it":"Aggiornare","ro":"A updata","se":"Att uppdatera"},{"en":"Legal Agreement","de":"Rechtliches \xdcbereinkommen","it":"Accordo Legale","ro":"Intelegere Legala","se":"Laglig \xd6verenskommelse"},{"en":"Privacy Notice","de":"Datenschutzhinweis","it":"Informativa sulla Privacy","ro":"Aviz de Confiden\u021bialitate","se":"Sekretessmeddelande"},{"en":"legal/privacy-note.en.md","de":"legal/privacy-note.de.md","it":"legal/privacy-note.it.md","ro":"legal/privacy-note.ro.md","se":"legal/privacy-note.se.md"},{"en":"Accept and continue","de":"Akzeptieren und weiter","it":"Accetta e continua","ro":"Accepta\u021bi \u0219i continua\u021bi","se":"Acceptera och forts\xe4tt"},{"en":"Leave","de":"Verlassen","it":"Partenza","ro":"Plecare","se":"L\xe4mna"},{"en":"Revoke consent","de":"Zustimmung widerrufen","it":"Revoca del consenso","ro":"Revocarea consim\u021b\u0103m\xe2ntului","se":"\xc5terkalla samtycke "}]}')},516:function(e){e.exports=JSON.parse('[{"name":"OpenStreetMap","link":"https://openstreetmap.org","datasets":[{"name":"OSM Mapnik","endpoint":"https://a.tile.osm.org/{z}/{x}/{y}.png"},{"name":"OSM Humanitarian","endpoint":"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}],"overlays":[]},{"name":"ESRI","link":"https://services.arcgisonline.com/arcgis/rest/services","datasets":[{"name":"Dark Gray Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"Light Gray Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"World Hillshade","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}"},{"name":"World Ocean Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"DeLorme World Base Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Street Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Navigation Charts","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Specialty/World_Navigation_Charts/MapServer/tile/{z}/{y}/{x}"},{"name":"National Geographic","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Imagery","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"},{"name":"World Physical Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Shaded Relief","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}"},{"name":"World Terrain","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"World Topo Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}],"overlays":[{"name":"Dark Gray Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"Light Gray Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"World Ocean Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"World Boundaries & Places","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}"},{"name":"World Reference Overlay","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}"},{"name":"World Transportation","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}"}]},{"name":"CartoDB","link":"https://cartodb.com/basemaps/","datasets":[{"name":"Positron","endpoint":"https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"},{"name":"Dark Matter","endpoint":"https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"},{"name":"Positron (No Labels)","endpoint":"https://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png"},{"name":"Dark Matter (No Labels)","endpoint":"https://a.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png"}],"overlays":[{"name":"Positron Labels","endpoint":"https://a.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png"},{"name":"Dark Matter Labels","endpoint":"https://a.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}.png"}]}]')},674:function(e,t,a){},678:function(e,t,a){},705:function(e,t){},745:function(e,t,a){},878:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(109),o=a(45),c=a(450),s=a(509),l=a(510),u=(a(674),a(5)),d=a(147),p=a(6),m=a(9),f=function(){function e(t){Object(p.a)(this,e),this._languages=void 0,this._content=void 0,this._locale=void 0;var a=Object.getOwnPropertyNames(t.languages);if(a.findIndex((function(e){return"en"===e}))<0)throw new Error('Internal error: locale "en" must be included in supported languages');var n={};t.dictionary.forEach((function(e,t){a.forEach((function(a){if(!e[a])throw new Error("Internal error: invalid entry at index ".concat(t,' in "./resources/lang.json":')+' missing translation for locale: "'.concat(a,'": ').concat(e))}));var r=b(e.en);n[r]&&console.warn('Translation already defined for "'.concat(e.en,'".')),n[r]=e})),this._languages=t.languages,this._content=n,this._locale="en"}return Object(m.a)(e,[{key:"languages",get:function(){return this._languages}},{key:"locale",get:function(){return this._locale},set:function(e){var t=Object.getOwnPropertyNames(this._languages);if(t.findIndex((function(t){return t===e}))<0){var a=e.split("-")[0];if(t.findIndex((function(e){return e===a}))<0)return void console.error('No translation found for locale "'.concat(e,'", staying with "').concat(this._locale,'".'));console.warn('No translation found for locale "'.concat(e,'", falling back to "').concat(a,'".')),e=a}this._locale=e}},{key:"get",value:function(e,t){var a,n=b(e),r=this._content[n];return r?(a=r[this._locale])||(console.warn('missing translation of phrase "'.concat(e,'" for locale "').concat(this._locale,'"')),a=e):(console.warn('missing translation for phrase "'.concat(e,'"')),a=e),t&&Object.keys(t).forEach((function(e){a=a.replace("${"+e+"}","".concat(t[e]))})),a}}]),e}(),b=function(e){return e.toLowerCase()},j=new f(a(511));j.locale=(navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage||navigator.browserLanguage||"en").split("-")[0];var h=j,g=a(26),v=a(27),O=a(219),x=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e,n){var r;return Object(p.a)(this,a),(r=t.call(this,n)).statusCode=void 0,r.statusCode=e,r}return a}(Object(O.a)(Error));function y(e){return e?{headers:[["Authorization","Bearer ".concat(e)]]}:{}}function S(e,t){if(t.length>0){var a=t.map((function(e){return e.map(encodeURIComponent).join("=")})).join("&");return e.includes("?")?e.endsWith("&")?e+a:e+"&"+a:e+"?"+a}return e}function w(e,t){return function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new x(e.status,e.statusText);return e})).catch((function(t){throw t instanceof TypeError?(console.error("Server did not respond for ".concat(e,". ")+"May be caused by timeout, refused connection, network error, etc.",t),new Error(h.get("Cannot reach server"))):(console.error(t),t)}))}(e,t).then((function(e){return e.json()}))}function P(e){var t=[],a={};return e.forEach((function(e){var n=e[0],r=e[1],i=[];e[2].forEach((function(e){var t=e[0],n=e[1];i.push(t),a[t]=n})),t.push({title:n,description:r,names:i})})),{groups:t,images:a}}var k=a(7),C=a(23);function T(e){return e.map(I)}function I(e){if(e.dimensions&&e.dimensions.length){var t=e.dimensions,a=t.findIndex((function(e){return"time"===e.name}));if(a>-1){var n=t[a],r=n.coordinates;if(r&&r.length&&"string"===typeof r[0]){var i=r,o=i.map((function(e){return new Date(e).getTime()}));return(t=Object(C.a)(t))[a]=Object(k.a)(Object(k.a)({},n),{},{coordinates:o,labels:i}),Object(k.a)(Object(k.a)({},e),{},{dimensions:t})}}}return e}function N(e,t,a,n){var r=y(n),i=encodeURIComponent(t),o=encodeURIComponent(a);return w("".concat(e,"/datasets/").concat(i,"/places/").concat(o),r)}var E=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return a}(Object(O.a)(Error));function M(e,t){!function(e,t){if(null===e)throw new E("assertion failed: ".concat(t," must not be null"))}(e,t),function(e,t){if("undefined"===typeof e)throw new E("assertion failed: ".concat(t," must not be undefined"))}(e,t)}function A(e,t){if(function(e,t){if(!Array.isArray(e))throw new E("assertion failed: ".concat(t," must be an array"))}(e,t),0===e.length)throw new E("assertion failed: ".concat(t," must be a non-empty array"))}function z(e,t){return t&&e.find((function(e){return e.id===t}))||null}function R(e,t){return t&&e.variables.find((function(e){return e.name===t}))||null}function D(e){M(e,"dataset"),A(e.dimensions,"dataset.dimensions");var t=e.dimensions.find((function(e){return"time"===e.name}));return t?(A(t.coordinates,"timeDimension.coordinates"),A(t.labels,"timeDimension.labels"),t):null}function L(e){var t=D(e);if(!t)return null;var a=t.coordinates;return[a[0],a[a.length-1]]}var B=a(55),G=a(451),_=a(94),F=a(140),V=a(8),U=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return a}(Object(O.a)(Error)),W={separator:",",comment:"#",quote:'"',escape:"\\",trim:!0,nanToken:"NaN",trueToken:"true",falseToken:"false"};function Z(e,t){return new K(t).parse(e)}var K=function(){function e(t){Object(p.a)(this,e),this.options=void 0,this.options=Object(k.a)(Object(k.a)({},W),t),this.parseLine=this.parseLine.bind(this)}return Object(m.a)(e,[{key:"parse",value:function(e){return this.parseText(e).map(this.parseLine)}},{key:"parseText",value:function(e){var t=this.options,a=t.comment,n=t.trim;return e.split("\n").map((function(e,t){return n&&(e=e.trim()),[e,t]})).filter((function(e){var t=Object(V.a)(e,2),n=t[0];t[1];return""!==n.trim()&&!n.startsWith(a)}))}},{key:"parseLine",value:function(e){for(var t,a,n=Object(V.a)(e,2),r=n[0],i=n[1],o=this.options,c=o.separator,s=o.quote,l=o.escape,u=!1,d=[],p=0,m=0;m<r.length;m++){var f=r[m];f===l?m++:u?f===s&&(u=!1):f===s?u=!0:f===c&&(this.collectValue(r,p,m,d),p=m+1)}if(u)throw t="missing quote character [".concat(this.options.quote,"]"),a=p,new U("line ".concat(i+1,", column ").concat(a+1,": ").concat(t));return this.collectValue(r,p,m,d),d}},{key:"collectValue",value:function(e,t,a,n){var r=e.slice(t,a);n.push(this.parseToken(r))}},{key:"parseToken",value:function(e){var t=this.options;if(t.trim&&(e=e.trim()),""===e)return null;if(e.startsWith(t.quote))e=e.substring(1,e.length-1);else{if(e===t.trueToken)return!0;if(e===t.falseToken)return!1;if(e===t.nanToken)return Number.NaN;var a=parseFloat(e);if(!Number.isNaN(a))return a}return function(e,t){var a=e.indexOf(t);if(a<0)return e;for(var n=0,r="";a<e.length;a++)e[a]===t&&(r+=e.substring(n,a)+e.substring(a+1,a+2),n=a+=2);return r+=e.substring(n,e.length)}(e,t.escape)}}]),e}();var H={name:"Text/CSV",fileExt:".txt,.csv",checkError:function(e){if(""!==e.trim())try{Z(e)}catch(t){return console.error(t),"".concat(t)}return null}},q=Object(k.a)(Object(k.a)({},W),{},{xName:"longitude",yName:"latitude",forceGeometry:!1,geometryName:"geometry",labelName:"name",labelPrefix:"CSV-"}),J={name:"GeoJSON",fileExt:".json,.geojson",checkError:function(e){if(""!==e.trim())try{JSON.parse(e)}catch(t){return console.error(t),"".concat(t)}return null}},Y={labelNames:"label, name, title, id",labelPrefix:"GeoJSON-"},Q={name:"WKT",fileExt:".txt,.wkt",checkError:function(e){return null}},X={label:"",labelPrefix:"WKT-"};function $(){return(Math.random().toString(16).substr(2)+"-"+Date.now().toString(16)).toUpperCase()}var ee=a(209),te=a.n(ee),ae=a(512),ne=a(967),re=a(251),ie=a(965),oe=a(249),ce=a(248),se=a(287),le=a(964),ue=a(250),de=a(962),pe=a(959),me=a(961),fe=a(400),be=a(956),je=a(247),he=a(957),ge=a(958),ve=a(960),Oe=a(513),xe=a(963),ye=a(966);var Se=function(){var e=new URL(window.location.href),t=e.pathname.split("/"),a=t.length;return a>0?"index.html"===t[a-1]?new URL(t.slice(0,a-1).join("/"),window.location.origin):new URL(e.pathname,window.location.origin):new URL(window.location.origin)}(),we=Se;function Pe(e){for(var t=e,a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var c=o[i];""!==c&&(t.endsWith("/")?c.startsWith("/")?t+=c.substr(1):t+=c:c.startsWith("/")?t+=c:t+="/"+c)}return t}console.log("baseUrl = ",Se.href);var ke={amber:be.a,blue:je.a,blueGrey:he.a,brown:ge.a,cyan:pe.a,deepOrange:ve.a,deepPurple:me.a,green:ce.a,grey:Oe.a,indigo:de.a,lightBlue:oe.a,lightGreen:xe.a,lime:le.a,orange:se.a,pink:ie.a,purple:ue.a,red:re.a,teal:ye.a,yellow:ne.a};function Ce(e,t){var a=e[t];if("string"===typeof a){var n=ke[a];if(!n)throw new Error("branding.".concat(t,' "').concat(a,'" is invalid'));e[t]=n}}function Te(e,t){return Ce(e=Object(k.a)({},e),"primaryColor"),Ce(e,"secondaryColor"),function(e,t,a){var n=e[t];"string"===typeof n&&(e[t]=Pe(we.href,a,n))}(e,"logoImage",t),e}var Ie=new URLSearchParams(window.location.search),Ne=function(){function e(t,a,n,r){Object(p.a)(this,e),this.name=void 0,this.server=void 0,this.branding=void 0,this.authClient=void 0,this.name=t,this.server=a,this.branding=n,this.authClient=r}return Object(m.a)(e,null,[{key:"load",value:function(){var t=Object(ae.a)(te.a.mark((function t(){var a,n,r,i,o,c,s,l;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Ie.get("configPath")||"config",r=Pe(we.href,a,"config.json"),t.prev=2,t.next=5,fetch(r);case 5:return n=t.sent,t.next=8,n.json();case 8:n=t.sent,t.next=17;break;case 12:t.prev=12,t.t0=t.catch(2),a="",n=fe;case 17:return i=n.name||"default",o=n.authClient&&Object(k.a)({},n.authClient),(c=Object(k.a)(Object(k.a)({},fe.server),n.server)).id=Ie.get("serverId")||c.id,c.name=Ie.get("serverName")||c.name,c.url=Ie.get("serverUrl")||c.url,s=0!=parseInt(Ie.get("compact")||"0"),l=Te(Object(k.a)(Object(k.a)(Object(k.a)({},fe.branding),n.branding),{},{compact:s||!!n.branding.compact}),a),e._instance=new e(i,c,l,o),l.windowTitle&&this.changeWindowTitle(l.windowTitle),l.windowIcon&&this.changeWindowIcon(l.windowIcon),t.abrupt("return",e._instance);case 30:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"instance",get:function(){return e.assertConfigLoaded(),e._instance}},{key:"assertConfigLoaded",value:function(){if(!e._instance)throw new Error("internal error: configuration not available yet")}},{key:"changeWindowTitle",value:function(e){document.title=e}},{key:"changeWindowIcon",value:function(e){var t=document.querySelector('link[rel="icon"]');null!==t?t.href=e:((t=document.createElement("link")).rel="icon",t.href=e,document.head.appendChild(t))}}]),e}();Ne._instance=void 0;var Ee=[["yellow",ne.a],["red",re.a],["pink",ie.a],["lightBlue",oe.a],["green",ce.a],["orange",se.a],["lime",le.a],["purple",ue.a],["indigo",de.a],["cyan",pe.a],["deepPurple",me.a]],Me=function(){var e={};return Ee.forEach((function(t){var a=Object(V.a)(t,2),n=a[0],r=a[1];e[n]=r})),e}(),Ae=Ee.map((function(e){var t=Object(V.a)(e,2),a=t[0];t[1];return a}));function ze(e){return Ae[e%Ae.length]}function Re(e,t){var a=function(e){return"light"===e?800:400}(t);return Me[e][a]}var De={Mapbox:{param:"access_token",token:"pk.eyJ1IjoiZm9ybWFuIiwiYSI6ImNrM2JranV0bDBtenczb2szZG84djh6bWUifQ.q0UKwf4CWt5fcQwIDwF8Bg"}};var Le=We(["label","title","name","id"]),Be=We(["description","desc","abstract","comment"]),Ge=We(["color"]),_e=We(["image","img","picture","pic"]);var Fe=Object(B.b)((function(e,t){var a={};return Ve(a,e,t,"label",t.id+"",Le),Ve(a,e,t,"color",ze(function(e){var t,a=e.id+"",n=0;if(0===a.length)return n;for(t=0;t<a.length;t++)n=(n<<5)-n+a.charCodeAt(t),n|=0;return n}(t)),Ge),Ve(a,e,t,"image",null,_e),Ve(a,e,t,"description",null,Be),Object(k.a)({placeGroup:e,place:t},a)}));function Ve(e,t,a,n,r,i){var o,c=t.propertyMapping&&t.propertyMapping[n];if(c){if(c.includes("${"))return void(e[n]=function(e,t){var a=t;if(e.properties){var n,r=Object(u.a)(Object.getOwnPropertyNames(e.properties));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!a.includes("${"))break;var o="${"+i+"}";a.includes(o)&&(a=a.replace(o,"".concat(e.properties[i])))}}catch(c){r.e(c)}finally{r.f()}}return a}(a,c));i.length>0&&i[0]!==c&&(i=[c].concat(Object(C.a)(i)))}a.properties&&(o=Ue(a.properties,i)),void 0===o&&(o=Ue(a,i)),e[n]=o||r}function Ue(e,t){var a,n=Object(u.a)(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r in e)return e[r]}}catch(i){n.e(i)}finally{n.f()}}function We(e){var t,a=[],n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a=a.concat(r.toLowerCase(),r.toUpperCase(),r[0].toUpperCase()+r.substr(1).toLowerCase())}}catch(i){n.e(i)}finally{n.f()}return a}function Ze(e,t){e.forEach((function(e){Ke(e)&&e.features.forEach((function(a){t(e,a)}))}))}function Ke(e){return!!e.features}function He(e,t){if(!t||!Ke(e))return null;var a=e.features.find((function(e){return e.id===t}));if(a)return a;var n=e.placeGroups;if(n)for(var r in n){var i=He(n[r],t);if(i)return i}return null}function qe(e,t){if(t){var a,n=Object(u.a)(e);try{for(n.s();!(a=n.n()).done;){var r=He(a.value,t);if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}}return null}var Je=0,Ye=0,Qe=0;function Xe(e,t){return{type:"Feature",id:$(),geometry:(new d.a).writeGeometryObject(e),properties:t}}var $e=a(223),et=a(174),tt=a(191),at=a(159),nt=a(141),rt=a(138),it=a(314),ot=a(1);function ct(e){return Object(ot.jsx)(n.Fragment,{children:e.children})}var st=a(395),lt=a(325),ut=a(514),dt=a(322),pt=a(276),mt=(a(677),a(678),"EPSG:4326"),ft="EPSG:3857",bt=ft,jt=n.createContext({mapObjects:{}}),ht={width:"100%",height:"100%"},gt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).contextValue=void 0,n.clickEventsKey=null,n.handleClick=function(e){var t=n.props.onClick;t&&t(e)},n.handleDrop=function(e){if(n.props.onDropFiles){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var a=0;a<e.dataTransfer.items.length;a++){var r=e.dataTransfer.items[a];if("file"===r.kind){var i=r.getAsFile();null!==i&&t.push(i)}}else if(e.dataTransfer.files)for(var o=0;o<e.dataTransfer.files.length;o++){var c=e.dataTransfer.files[o];null!==c&&t.push(c)}t.length&&n.props.onDropFiles(t)}},n.handleDragOver=function(e){n.props.onDropFiles&&e.preventDefault()},n.handleRef=function(e){n.contextValue.mapDiv=e},n.handleResize=function(){var e=n.contextValue.mapDiv,t=n.contextValue.map;if(e&&t){t.updateSize();var a=t.getView(),r=n.getMinZoom(e);r!==a.getMinZoom()&&a.setMinZoom(r)}},n.getMinZoom=function(e){var t=e.clientWidth,a=Math.LOG2E*Math.log(t/256);return a>=0?a:0};var r=e.id,i=e.mapObjects;return n.contextValue=i?{map:i[r]||void 0,mapObjects:i}:{mapObjects:{}},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.id,t=this.contextValue.mapDiv,a=null;if(this.props.isStale){var n=this.contextValue.mapObjects[e];n instanceof dt.a&&((a=n).setTarget(t),this.clickEventsKey&&a.un("click",this.clickEventsKey.listener))}if(!a){var r=this.getMinZoom(t),i=new pt.a({projection:bt,center:[0,0],minZoom:r,zoom:r});a=new dt.a(Object(k.a)(Object(k.a)({view:i},this.getMapOptions()),{},{target:t}))}this.contextValue.map=a,this.contextValue.mapObjects[e]=a,this.clickEventsKey=a.on("click",this.handleClick),a.updateSize(),this.forceUpdate(),window.addEventListener("resize",this.handleResize);var o=this.props.onMapRef;o&&o(a)}},{key:"componentDidUpdate",value:function(e){var t=this.contextValue.map,a=this.contextValue.mapDiv,n=this.getMapOptions();t.setProperties(Object(k.a)({},n)),t.setTarget(a),t.updateSize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize);var e=this.props.onMapRef;e&&e(null)}},{key:"render",value:function(){var e;return this.contextValue.map&&(e=Object(ot.jsx)(jt.Provider,{value:this.contextValue,children:this.props.children})),Object(ot.jsx)("div",{ref:this.handleRef,style:ht,onDragOver:this.handleDragOver,onDrop:this.handleDrop,children:e})}},{key:"getMapOptions",value:function(){var e=Object(k.a)({},this.props);return delete e.children,delete e.onClick,delete e.onDropFiles,e}}]),a}(n.Component),vt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).context={},e.object=null,e}return Object(m.a)(a,[{key:"getMapObject",value:function(e){return this.context.mapObjects&&this.context.mapObjects[e]||null}},{key:"getOptions",value:function(){var e=Object(k.a)({},this.props);return delete e.id,e}},{key:"componentDidMount",value:function(){this._updateMapObject(this.addMapObject(this.context.map))}},{key:"componentDidUpdate",value:function(e){this._updateMapObject(this.updateMapObject(this.context.map,this.object,e))}},{key:"componentWillUnmount",value:function(){var e=this.context.map;this.removeMapObject(e,this.object),this.props.id&&delete this.context.mapObjects[this.props.id],this.object=null}},{key:"_updateMapObject",value:function(e){null!=e&&this.props.id&&(e.set("objectId",this.props.id),this.context.mapObjects[this.props.id]=e),this.object=e}},{key:"render",value:function(){return null}}]),a}(n.PureComponent);vt.contextType=jt;var Ot;Ot=function(){};var xt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"addMapObject",value:function(e){var t=new st.a(this.props);return e.getLayers().push(t),t}},{key:"updateMapObject",value:function(e,t,a){var n=t.getSource(),r=this.props.source;if(r&&n!==r){var i=!0;if(n instanceof lt.a&&r instanceof lt.a){var o=n,c=r;if(function(e,t){if(Ot("tile grid:",e,t),Ot("min zoom:",e.getMinZoom(),t.getMinZoom()),Ot("max zoom:",e.getMaxZoom(),t.getMaxZoom()),e.getMinZoom()!==t.getMinZoom()||e.getMaxZoom()!==t.getMaxZoom())return!1;var a=e.getExtent(),n=t.getExtent();Ot("extent:",a,n);for(var r=0;r<a.length;r++)if(a[r]!==n[r])return!1;var i=e.getResolutions(),o=t.getResolutions();Ot("resolutions:",i,o);var c=i.length;if(c!==o.length)return!1;for(var s=0;s<c;s++){var l=e.getResolution(s),u=t.getResolution(s);if(Ot("resolution ".concat(s,":"),l,u),l!==u)return!1;var d=e.getOrigin(s),p=t.getOrigin(s);Ot("origin ".concat(s,":"),d,p);for(var m=0;m<d.length;m++)if(d[m]!==p[m])return!1;var f=e.getTileSize(s),b=t.getTileSize(s);Ot("tile size ".concat(s,":"),f,b);for(var j=0;j<d.length;j++)if("number"===typeof f&&(f=[f,f]),"number"===typeof b&&(b=[b,b]),f[0]!==b[0]||f[1]!==b[1])return!1;var h=e.getFullTileRange(s),g=t.getFullTileRange(s);if(Ot("tile range ".concat(s,":"),h,g),h&&g){if(h.getWidth()!==g.getWidth()||h.getHeight()!==g.getHeight())return!1}else if(h||g)return!1}return!0}(o.getTileGrid(),c.getTileGrid())){Ot("--\x3e Equal tile grids!");var s=o.getUrls(),l=c.getUrls();s===l||!l||null!==s&&s[0]===l[0]||(o.setUrls(l),i=!1);var u=o.getTileLoadFunction(),d=c.getTileLoadFunction();u!==d&&(o.setTileLoadFunction(d),i=!1);var p=o.getTileUrlFunction(),m=c.getTileUrlFunction();p!==m&&(o.setTileUrlFunction(m),i=!1)}else Ot("--\x3e Tile grids are not equal!")}var f=n.getContextOptions(),b=r.getContextOptions();("object"!==typeof f||f.imageSmoothing)!==("object"!==typeof b||b.imageSmoothing)&&(i=!0),i?(t.setSource(r),Ot("--\x3e Replaced source (expect flickering!)")):Ot("--\x3e Updated source (check, is it still flickering?)")}return this.props.visible&&this.props.visible!==a.visible&&t.setVisible(this.props.visible),this.props.opacity&&this.props.opacity!==a.opacity&&t.setOpacity(this.props.opacity),this.props.zIndex&&this.props.zIndex!==a.zIndex&&t.setZIndex(this.props.zIndex),this.props.minResolution&&this.props.minResolution!==a.minResolution&&t.setMinResolution(this.props.minResolution),this.props.maxResolution&&this.props.maxResolution!==a.maxResolution&&t.setMaxResolution(this.props.maxResolution),t}},{key:"removeMapObject",value:function(e,t){e.getLayers().remove(t)}}]),a}(vt);new et.a({url:"https://a.tiles.mapbox.com/v3/mapbox.natural-earth-2/{z}/{x}/{y}.png",attributions:["&copy; <a href=&quot;https://www.naturalearthdata.com/&quot;>MapBox</a>","&copy; <a href=&quot;https://www.mapbox.com/&quot;>MapBox</a> and contributors"]}),new et.a({url:"https://gis.ngdc.noaa.gov/arcgis/rest/services/web_mercator/gebco_2014_contours/MapServer/tile/{z}/{y}/{x}",attributions:["&copy; <a href=&quot;https://www.gebco.net/data_and_products/gridded_bathymetry_data/&quot;>GEBCO</a>","&copy; <a href=&quot;https://maps.ngdc.noaa.gov/&quot;>NOAHH</a> and contributors"]}),new ut.a,new et.a({url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",attributions:["&copy; <a href=&quot;https://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a> contributors"]});var yt=a(218),St=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"addMapObject",value:function(e){var t=new yt.a(this.props);return e.getLayers().push(t),t}},{key:"updateMapObject",value:function(e,t,a){return this.props.source!==a.source&&this.props.source&&t.setSource(this.props.source),this.props.visible&&this.props.visible!==a.visible&&t.setVisible(this.props.visible),this.props.opacity&&this.props.opacity!==a.opacity&&t.setOpacity(this.props.opacity),this.props.zIndex&&this.props.zIndex!==a.zIndex&&t.setZIndex(this.props.zIndex),this.props.minResolution&&this.props.minResolution!==a.minResolution&&t.setMinResolution(this.props.minResolution),this.props.maxResolution&&this.props.maxResolution!==a.maxResolution&&t.setMaxResolution(this.props.maxResolution),t}},{key:"removeMapObject",value:function(e,t){e.getLayers().remove(t)}}]),a}(vt),wt=a(515),Pt=a.n(wt);function kt(e,t){var a=e.length;if(0===a)return-1;if(1===a)return 0;var n=0,r=a-1;if(t<=e[n])return n;if(t>=e[r])return r;for(var i,o=Math.floor(a/2),c=0;c<a;c++){if(t<(i=e[o])){var s=[Math.floor((n+o)/2),o];o=s[0],r=s[1]}else{if(!(t>i))return o;var l=[o,Math.floor((o+r)/2)];n=l[0],o=l[1]}if(n===o||o===r)return Math.abs(e[n]-t)<=Math.abs(e[r]-t)?n:r}return-1}var Ct=a(516),Tt=function(e){return e.dataState.datasets||[]},It=function(e){return e.dataState.timeSeriesGroups},Nt=function(e){return e.dataState.userPlaceGroup},Et=function(e){return e.dataState.userServers||[]},Mt=Object(B.a)(Tt,Nt,(function(e,t){var a={},n=[t];return e.forEach((function(e){e.placeGroups&&e.placeGroups.forEach((function(e){a[e.id]||(a[e.id]=e,n.push(e))}))})),n}));function At(e){return zt("localStorage",e)}function zt(e,t){try{var a=window[e],n="__storage_test__";return a.setItem(n,n),a.removeItem(n),new Rt(a,t)}catch(r){return null}}var Rt=function(){function e(t,a){Object(p.a)(this,e),this.nativeStorage=void 0,this.brandingName=void 0,this.nativeStorage=t,this.brandingName=a}return Object(m.a)(e,[{key:"getItem",value:function(e,t,a){var n=this.nativeStorage.getItem(this.makeKey(e));return null!==n?a?a(n):n:t}},{key:"getObjectItem",value:function(e,t){return this.getItem(e,t,(function(e){return JSON.parse(e)}))}},{key:"getBooleanProperty",value:function(e,t,a){this.getProperty(e,t,a,(function(e){return"true"===e}))}},{key:"getIntProperty",value:function(e,t,a){this.getProperty(e,t,a,parseInt)}},{key:"getStringProperty",value:function(e,t,a){this.getProperty(e,t,a,(function(e){return e}))}},{key:"getObjectProperty",value:function(e,t,a){this.getProperty(e,t,a,(function(e){return JSON.parse(e)}))}},{key:"getProperty",value:function(e,t,a,n){t[e]=this.getItem(e,a[e],n)}},{key:"setItem",value:function(e,t,a){if("undefined"===typeof t||null===t)this.nativeStorage.removeItem(this.makeKey(e));else{var n=a?a(t):t+"";this.nativeStorage.setItem(this.makeKey(e),n)}}},{key:"setObjectItem",value:function(e,t){this.setItem(e,t,(function(e){return JSON.stringify(e)}))}},{key:"setPrimitiveProperty",value:function(e,t){this.setItem(e,t[e])}},{key:"setObjectProperty",value:function(e,t){this.setObjectItem(e,t[e])}},{key:"makeKey",value:function(e){return"xcube.".concat(this.brandingName,".").concat(e)}}]),e}();function Dt(e){var t=At(Ne.instance.name);if(t)try{t.setPrimitiveProperty("locale",e),t.setPrimitiveProperty("privacyNoticeAccepted",e),t.setPrimitiveProperty("autoShowTimeSeries",e),t.setPrimitiveProperty("showTimeSeriesErrorBars",e),t.setPrimitiveProperty("showTimeSeriesPointsOnly",e),t.setPrimitiveProperty("showTimeSeriesMedian",e),t.setPrimitiveProperty("timeAnimationInterval",e),t.setPrimitiveProperty("timeChunkSize",e),t.setPrimitiveProperty("infoCardOpen",e),t.setObjectProperty("infoCardElementStates",e),t.setPrimitiveProperty("imageSmoothingEnabled",e),t.setPrimitiveProperty("mapProjection",e),t.setPrimitiveProperty("baseMapUrl",e),t.setPrimitiveProperty("exportTimeSeries",e),t.setPrimitiveProperty("exportTimeSeriesSeparator",e),t.setPrimitiveProperty("exportPlaces",e),t.setPrimitiveProperty("exportPlacesAsCollection",e),t.setPrimitiveProperty("exportZipArchive",e),t.setPrimitiveProperty("exportFileName",e),t.setPrimitiveProperty("userPlacesFormatName",e),t.setObjectProperty("userPlacesFormatOptions",e)}catch(a){console.warn("failed to store user settings: ".concat(a))}}var Lt=[250,500,1e3,2500];function Bt(){var e=Ne.instance.branding;return function(e){var t=At(Ne.instance.name);if(t){var a=Object(k.a)({},e);try{t.getStringProperty("locale",a,e),t.getBooleanProperty("privacyNoticeAccepted",a,e),t.getBooleanProperty("autoShowTimeSeries",a,e),t.getBooleanProperty("showTimeSeriesErrorBars",a,e),t.getBooleanProperty("showTimeSeriesPointsOnly",a,e),t.getBooleanProperty("showTimeSeriesMedian",a,e),t.getIntProperty("timeAnimationInterval",a,e),t.getIntProperty("timeChunkSize",a,e),t.getBooleanProperty("infoCardOpen",a,e),t.getObjectProperty("infoCardElementStates",a,e),t.getBooleanProperty("imageSmoothingEnabled",a,e),t.getStringProperty("mapProjection",a,e),t.getStringProperty("baseMapUrl",a,e),t.getBooleanProperty("exportTimeSeries",a,e),t.getStringProperty("exportTimeSeriesSeparator",a,e),t.getBooleanProperty("exportPlaces",a,e),t.getBooleanProperty("exportPlacesAsCollection",a,e),t.getBooleanProperty("exportZipArchive",a,e),t.getStringProperty("exportFileName",a,e),t.getStringProperty("userPlacesFormatName",a,e),t.getObjectProperty("userPlacesFormatOptions",a,e)}catch(n){console.warn("Failed to load user settings: ".concat(n))}return a}return console.warn("User settings not found or access denied"),e}({selectedDatasetId:null,selectedVariableName:null,selectedPlaceGroupIds:["user"],selectedPlaceId:null,selectedUserPlaceId:null,selectedServerId:Ne.instance.server.id,selectedTime:null,selectedTimeRange:null,timeSeriesUpdateMode:"add",timeAnimationActive:!1,timeAnimationInterval:1e3,timeChunkSize:20,autoShowTimeSeries:!0,showTimeSeriesPointsOnly:!1,showTimeSeriesErrorBars:!0,showTimeSeriesMedian:"median"===e.defaultAgg,userPlacesFormatName:"csv",userPlacesFormatOptions:{geojson:Object(k.a)({},Y),csv:Object(k.a)({},q),wkt:Object(k.a)({},X)},flyTo:null,activities:{},locale:"en",dialogOpen:{},privacyNoticeAccepted:!1,mapInteraction:"Point",lastMapInteraction:"Point",showRgbLayer:!1,infoCardOpen:!1,infoCardElementStates:{dataset:{visible:!0,viewMode:"text"},variable:{visible:!0,viewMode:"text"},place:{visible:!0,viewMode:"text"}},mapProjection:e.mapProjection||bt,imageSmoothingEnabled:!1,showDatasetBoundaries:!1,baseMapUrl:e.baseMapUrl||"http://a.tile.osm.org/{z}/{x}/{y}.png",exportTimeSeries:!0,exportTimeSeriesSeparator:"TAB",exportPlaces:!0,exportPlacesAsCollection:!0,exportZipArchive:!0,exportFileName:"export"})}var Gt={},_t=function(e){return e.controlState.selectedDatasetId},Ft=function(e){return e.controlState.selectedVariableName},Vt=function(e){return e.controlState.selectedPlaceGroupIds},Ut=function(e){return e.controlState.selectedPlaceId},Wt=function(e){return e.controlState.selectedTime},Zt=function(e){return e.controlState.timeAnimationActive},Kt=function(e){return e.controlState.imageSmoothingEnabled},Ht=function(e){return e.controlState.infoCardElementStates},qt=function(e){return e.controlState.mapProjection},Jt=Object(B.a)(Tt,_t,z),Yt=Object(B.a)(Jt,(function(e){return e&&e.variables||[]})),Qt=Object(B.a)(Jt,Ft,(function(e,t){return e&&t&&e.variables.find((function(e){return e.name===t}))||null})),Xt=Object(B.a)(Qt,(function(e){return e&&e.units||"-"})),$t=Object(B.a)(Qt,(function(e){return e?[e.colorBarMin,e.colorBarMax]:[0,1]})),ea=Object(B.a)(Qt,(function(e){return e&&e.colorBarName||"viridis"})),ta=Object(B.a)(Qt,(function(e){return e&&"number"==typeof e.opacity?e.opacity:1})),aa=Object(B.a)(Jt,(function(e){return null!==e?L(e):null})),na=Object(B.a)(Jt,(function(e){return null!==e&&e.rgbSchema||null})),ra=Object(B.a)(Jt,(function(e){return e&&e.placeGroups||[]})),ia=Object(B.a)(ra,Nt,(function(e,t){return t.features&&0!==t.features.length?e.concat([t]):e}));function oa(e,t){var a=[];return null!==t&&t.length>0&&e.forEach((function(e){t.indexOf(e.id)>-1&&a.push(e)})),a}var ca=Object(B.a)(ra,Vt,oa),sa=Object(B.a)(ia,Vt,oa),la=Object(B.a)(sa,(function(e){return e.map((function(e){return e.title||e.id})).join(", ")})),ua=Object(B.a)(sa,(function(e){var t,a=e.map((function(e){return Ke(e)?e.features:[]}));return(t=[]).concat.apply(t,Object(C.a)(a))})),da=Object(B.a)(ua,Ut,(function(e,t){return e.find((function(e){return e.id===t}))||null})),pa=Object(B.a)(sa,Ut,(function(e,t){return 0===e.length||null===t?null:function(e,t){var a,n=Object(u.a)(e);try{var r=function(){var e=a.value;if(Ke(e)){var n=e.features.find((function(a){return t(e,a)}));if(n)return{v:Fe(e,n)}}};for(n.s();!(a=n.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(o){n.e(o)}finally{n.f()}return null}(e,(function(e,a){return a.id===t}))})),ma=Object(B.a)(It,_t,Ft,Ut,(function(e,t,a,n){if(!t||!a||!n)return!1;var r,i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){var o,c=r.value,s=Object(u.a)(c.timeSeriesArray);try{for(s.s();!(o=s.n()).done;){var l=o.value.source;if(l.datasetId===t&&l.variableName===a&&l.placeId===n)return!1}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}return!0})),fa=Object(B.a)(It,ia,(function(e,t){var a={};return Ze(t,(function(t,n){var r,i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){if(r.value.timeSeriesArray.find((function(e){return e.source.placeId===n.id}))){a[n.id]=Fe(t,n);break}}}catch(o){i.e(o)}finally{i.f()}})),a})),ba=Object(B.a)(sa,(function(e){var t=[];return Ze(e,(function(e,a){t.push(Fe(e,a).label)})),t})),ja=Object(B.a)(Jt,Ft,(function(e,t){return e&&R(e,t)||null})),ha=Object(B.a)(ja,(function(e){return e.controlState.timeChunkSize}),(function(e,t){if(e&&e.timeChunkSize){var a=e.timeChunkSize;return a*Math.ceil(t/a)}return t})),ga=Object(B.a)(Jt,(function(e){return e&&D(e)||null})),va=Object(B.a)(Jt,(function(e){return e&&e.attributions||null})),Oa=Object(B.a)(ga,(function(e){return null===e||0===e.coordinates.length?null:e.coordinates})),xa=Object(B.a)(Wt,Oa,(function(e,t){return null===e||null===t?-1:kt(t,e)}));var ya=Pt()((function(e){if(e)return function(t,a){e.getView().getInteracting()?e.once("moveend",(function(){t.getImage().src=a})):t.getImage().src=a}}),{serializer:function(e){var t=e[0];if(t){var a=t.getTarget();return"string"===typeof a?a:a&&a.id||"map"}return""}});function Sa(e,t,a,n,r,i,o,c,s,l,u,d){if(null!==c){var p;if(o){var m=kt(o.coordinates,c);m>-1&&(p=o.labels[m])}p||(p=new Date(c).toISOString()),r=[].concat(Object(C.a)(r),[["time",p]])}"number"===typeof n&&(n+=3);var f=function(e,t,a,n,r,i,o,c,s){return new et.a({url:e,projection:t,tileGrid:a,attributions:n||void 0,transition:r?0:250,imageSmoothing:i,tileLoadFunction:o,maxZoom:s})}(S(t,r),l,function(e,t){if(e!==ft){var a="number"===typeof t?t+1:20;return new it.a({tileSize:[256,256],origin:[-180,90],extent:[-180,-90,180,90],resolutions:Array.from({length:a},(function(e,t){return 180/256/Math.pow(2,t)}))})}}(l,n),u,s,d,ya(Gt.map),0,n);return Object(ot.jsx)(xt,{id:e,source:f,zIndex:10,opacity:i})}var wa=Object(B.a)(Jt,qt,(function(e){return e.controlState.showDatasetBoundaries}),(function(e,t,a){if(!e||!a)return null;var n=e.geometry;if(!n){if(!e.bbox)return console.warn("Dataset ".concat(e.id," has no bbox!")),null;var r=Object(V.a)(e.bbox,4),i=r[0],o=r[1],c=r[2],s=r[3];n={type:"Polygon",coordinates:[[[i,o],[c,o],[c,s],[i,s],[i,o]]]}}var l=new $e.a({features:new d.a({dataProjection:mt,featureProjection:t}).readFeatures({type:"Feature",geometry:n})}),u=new rt.c({stroke:new nt.a({color:"orange",width:3,lineDash:[2,4]})});return Object(ot.jsx)(St,{id:"".concat(e.id,".bbox"),source:l,style:u,zIndex:11,opacity:.5})})),Pa=Object(B.a)(ja,ga,Wt,Zt,qt,$t,ea,ta,va,Kt,(function(e,t,a,n,r,i,o,c,s,l){if(!e)return null;if(!e.tileUrl)return console.warn("Variable ".concat(e.name," has no tileUrl!")),null;var u=[["crs",r],["vmin","".concat(i[0])],["vmax","".concat(i[1])],["cbar",o]];return Sa("variable",e.tileUrl,e.tileLevelMin,e.tileLevelMax,u,c,t,a,n,r,s,l)})),ka=Object(B.a)((function(e){return e.controlState.showRgbLayer}),na,ta,ga,Wt,Zt,qt,va,Kt,(function(e,t,a,n,r,i,o,c,s){if(!e||!t)return null;var l=[["crs",o]];return Sa("rgb",t.tileUrl,t.tileLevelMin,t.tileLevelMax,l,a,n,r,i,o,c,s)}));function Ca(){return new nt.a({color:[200,0,0,.75],width:1.25})}function Ta(){return new at.a({color:[255,0,0,Ne.instance.branding.polygonFillOpacity||.25]})}var Ia=Object(B.a)(ca,qt,(function(e,t){if(0===e.length)return null;var a=[];return e.forEach((function(e,n){Ke(e)&&a.push(Object(ot.jsx)(St,{id:"placeGroup.".concat(e.id),style:new rt.c({image:new tt.a({fill:Ta(),stroke:Ca(),radius:6}),stroke:Ca(),fill:Ta()}),zIndex:100,source:new $e.a({features:new d.a({dataProjection:mt,featureProjection:t}).readFeatures(e)})},n))})),Object(ot.jsx)(ct,{children:a})})),Na=Object(B.a)(Ht,(function(e){var t=[];return Object.getOwnPropertyNames(e).forEach((function(a){e[a].visible&&t.push(a)})),t})),Ea=Object(B.a)(Ht,(function(e){var t={};return Object.getOwnPropertyNames(e).forEach((function(a){t[a]=e[a].viewMode||"text"})),t})),Ma=Object(B.a)((function(e){return e.controlState.activities}),(function(e){return Object.keys(e).map((function(t){return e[t]}))})),Aa=Object(B.a)(Et,(function(e){return e.controlState.selectedServerId}),(function(e,t){if(0===e.length)throw new Error("internal error: no servers configured");var a=e.find((function(e){return e.id===t}));if(!a)throw new Error('internal error: server with ID "'.concat(t,'" not found'));return a})),za=Object(B.a)((function(e){return e.controlState.baseMapUrl}),(function(e){var t,a=function(e){var t,a=Object(u.a)(Ct);try{for(a.s();!(t=a.n()).done;){var n=t.value,r=n.datasets.find((function(t){return t.endpoint===e}));if(r)return{group:n,dataset:r}}}catch(i){a.e(i)}finally{a.f()}return null}(e);if(a){var n=(t=a.group.name,De[t]),r=new et.a({url:a.dataset.endpoint+(n?"?".concat(n.param,"=").concat(n.token):""),attributions:["&copy; <a href=&quot;".concat(a.group.link,"&quot;>").concat(a.group.name,"</a>")]});return Object(ot.jsx)(xt,{id:a.group.name+"-"+a.dataset.name,source:r,zIndex:0})}if(e){var i=new et.a({url:e});return Object(ot.jsx)(xt,{id:e,source:i,zIndex:0})}return null}));var Ra=a(517),Da=a.n(Ra),La=a(4),Ba=-new Date("1970-01-01T00:00:00").getTime();function Ga(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Date(e+(t?Ba:0))}function _a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ga(e,t).toISOString().substr(0,10)}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ga(e,t).toISOString().substr(0,a?16:19).replace("T"," ")}var Va=31536e6;var Ua="POST_MESSAGE";function Wa(e,t){return{type:Ua,messageType:e,messageText:t.message||t+""}}var Za="HIDE_MESSAGE";var Ka=a(684),Ha="UPDATE_SERVER_INFO";function qa(){return function(e,t){var a,n=Aa(t());e(qn(Ha,h.get("Connecting to server"))),(a=n.url,w("".concat(a,"/"))).then((function(t){e(function(e){return{type:Ha,serverInfo:e}}(t))})).catch((function(t){e(Wa("error",t))})).then((function(){e(Yn(Ha))}))}}var Ja="UPDATE_RESOURCES";function Ya(){return function(e,t){var a=Aa(t());e(qn(Ja,h.get("Updating resources"))),function(e,t){var a=S("".concat(e,"/maintenance/update"),[]),n=y(t);try{return w(a,n).then((function(){return!0})).catch((function(e){return console.error(e),!1}))}catch(r){return console.error(r),Promise.resolve(!1)}}(a.url,t().userAuthState.accessToken).then((function(e){e&&window.location.reload()})).finally((function(){return e(Yn(Ja))}))}}var Qa="UPDATE_DATASETS";function Xa(){return function(e,t){var a,n,r=Aa(t());e(qn(Qa,h.get("Loading data"))),(a=r.url,n=t().userAuthState.accessToken,w(S("".concat(a,"/datasets"),[["details","1"]]),y(n)).then((function(e){return e.datasets})).then(T)).then((function(a){if(e($a(a)),a.length>0){var n=t().controlState.selectedDatasetId||a[0].id;e(yn(n,a,!0))}})).catch((function(t){e(Wa("error",t)),e($a([]))})).then((function(){e(Yn(Qa))}))}}function $a(e){return{type:Qa,datasets:e}}var en="UPDATE_DATASET_PLACE_GROUP";function tn(e,t){return{type:en,datasetId:e,placeGroup:t}}var an="ADD_USER_PLACE";var nn="ADD_USER_PLACES";function rn(e){return function(t,a){var n,r=a().controlState.userPlacesFormatName;try{if("csv"===r){var i=function(e){return e.controlState.userPlacesFormatOptions.csv}(a());n=function(e,t){var a=Z(e,t);if(a.length<2)throw new Error(h.get("Missing header line in CSV"));var n,r=Object(u.a)(a[0]);try{for(r.s();!(n=r.n()).done;){var i=n.value;if("string"!==typeof i||""===i)throw new Error(h.get("Invalid header line in CSV"))}}catch(C){r.e(C)}finally{r.f()}var o,c=a[0].map((function(e){return e})),s=c.map((function(e){return e.toLowerCase()})),l=c.length,d=Object(u.a)(a);try{for(d.s();!(o=d.n()).done;)if(o.value.length!==l)throw new Error(h.get("All rows must have same length"))}catch(C){d.e(C)}finally{d.f()}var p=t.labelName.toLowerCase(),m=t.xName.toLowerCase(),f=t.yName.toLowerCase(),b=t.geometryName.toLowerCase(),j=t.forceGeometry,g=s.findIndex((function(e){return e===p})),v=s.findIndex((function(e){return e===m})),O=s.findIndex((function(e){return e===f})),x=s.findIndex((function(e){return e===b}));if(j||v<0||O<0||v===O){if(x<0)throw new Error(h.get("No geometry column(s) found"))}else x=-1;var y=t.labelPrefix.trim();""===y&&(y=q.labelPrefix);for(var S=new G.a,w=[],P=1,k=function(){var t=a[P],n=null;if(x>=0){if("string"===typeof t[x])try{n=S.readGeometry(e)}catch(u){}}else{var r=t[v],i=t[O];"number"===typeof r&&Number.isFinite(r)&&"number"===typeof i&&Number.isFinite(i)&&(n=new _.a([r,i]))}if(null===n)throw new Error(h.get("Invalid geometry in data row ".concat(P)));var o={color:"red"};t.forEach((function(e,t){if(t!==v&&t!==O&&t!==x){var a=c[t];o[a]=e}}));var s=void 0;if(g>=0)s="".concat(t[g]);else{var l=++Je;s="".concat(y).concat(l)}o.label=s,w.push(Xe(n,o))};P<a.length;P++)k();return w}(e,i)}else if("geojson"===r){var o=function(e){return e.controlState.userPlacesFormatOptions.geojson}(a());n=function(e,t){var a=t.labelNames,n=new Set(a.split(",").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return""!==e}))),r=t.labelPrefix.trim();""===r&&(r=Y.labelPrefix);var i,o=new d.a;try{i=o.readFeatures(e)}catch(l){try{var c=o.readGeometry(e);i=[new F.a(c)]}catch(l){throw new Error(h.get("Invalid GeoJSON"))}}var s=[];return i.forEach((function(e){var t=e.getProperties(),a=e.getGeometry();if(a){var i="",o={color:"red"};if(t)for(var c in t){var l=t[c];null!==l&&"number"!==typeof l&&"string"!==typeof l&&"boolean"!==typeof l||(o[c]=l),""===i&&"string"===typeof l&&n.has(c.toLowerCase())&&(i=l)}if(""===i){var u=++Ye;i="".concat(r,"-").concat(u)}o.label=i,s.push(Xe(a,o))}})),s}(e,o)}else if("wkt"===r){var c=function(e){return e.controlState.userPlacesFormatOptions.wkt}(a());n=function(e,t){var a=t.labelPrefix.trim();""===a&&(a=X.labelPrefix);var n=t.label.trim();if(""===n){var r=++Qe;n="".concat(a).concat(r)}try{return[Xe((new G.a).readGeometry(e),{label:n})]}catch(i){throw new Error(h.get("Invalid Geometry WKT"))}}(e,c)}else n=[]}catch(s){t(Wa("error",s)),t(er("addUserPlacesFromText")),n=[]}n.length?(t(function(e,t,a){return{type:nn,places:e,mapProjection:t,selectPlace:a}}(n,qt(a()),!0)),t(In(["user"])),1===n.length&&(t(En(n[0].id,ua(a()),!0)),a().controlState.autoShowTimeSeries&&t(sn())),t(Wa("info",h.get("Imported ".concat(n.length," place(s)"))))):t(Wa("warning",h.get("No places imported")))}}var on="REMOVE_USER_PLACE";var cn="REMOVE_ALL_USER_PLACES";function sn(){return function(e,t){var a=Aa(t()),n=_t(t()),r=ga(t()),i=ja(t()),o=Ut(t()),c=da(t()),s=t().controlState.timeSeriesUpdateMode,l=t().controlState.showTimeSeriesMedian,u=t().controlState.showTimeSeriesErrorBars,d=ha(t()),p=Mt(t());if(n&&i&&o&&r){var m=r.labels,f=m.length,b=f-1,j=b-(d=d>0?d:f)+1,h=function(){var e=j>=0?m[j]:null,r=m[b];return function(e,t,a,n,r,i,o,c,s,l){var u,d=null,p=[];c?(p.push(["aggMethods","median"]),u="median"):s?(p.push(["aggMethods","mean,std"]),u="mean",d="std"):(p.push(["aggMethods","mean"]),u="mean"),i&&p.push(["startDate",i]),o&&p.push(["endDate",o]);var m=encodeURIComponent(t),f=encodeURIComponent(a.name);return w(S("".concat(e,"/timeseries/").concat(m,"/").concat(f),p),Object(k.a)(Object(k.a)({},y(l)),{},{method:"post",body:JSON.stringify(r)})).then((function(e){if(!(e=e.result)||0===e.length)return null;var i=e.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{time:new Date(e.time).getTime()})}));return{source:{datasetId:t,variableName:a.name,variableUnits:a.units||void 0,placeId:n,geometry:r,valueDataKey:u,errorDataKey:d},data:i,color:"green"}}))}(a.url,n,i,c.id,c.geometry,e,r,l,u,t().userAuthState.accessToken)};h().then((function t(a){if(null!==a&&ln(p,c.id)){var n=j>0,r=n?(f-j)/f:1;e(function(e,t,a){return{type:un,timeSeries:e,updateMode:t,dataMode:a}}(Object(k.a)(Object(k.a)({},a),{},{dataProgress:r}),s,b===f-1?"new":"append")),n&&ln(p,c.id)&&(j-=d,b-=d,h().then(t))}else e(Wa("info","No data found here"))})).catch((function(t){e(Wa("error",t))}))}}}function ln(e,t){return null!==qe(e,t)}var un="UPDATE_TIME_SERIES";var dn="REMOVE_TIME_SERIES_GROUP";var pn="REMOVE_ALL_TIME_SERIES";var mn="CONFIGURE_SERVERS";function fn(e,t){return{type:mn,servers:e,selectedServerId:t}}function bn(){return function(e){e(qa()),e(Xa()),e((function(e,t){var a,n=Aa(t());(a=n.url,w("".concat(a,"/colorbars")).then(P)).then((function(t){e(function(e){return{type:jn,colorBars:e}}(t))})).catch((function(t){e(Wa("error",t))}))}))}}var jn="UPDATE_COLOR_BARS";var hn="UPDATE_VARIABLE_COLOR_BAR";var gn=function e(){Object(p.a)(this,e)},vn=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this)).fileName=void 0,n.zipArchive=void 0,n.fileName=e,n.zipArchive=new Da.a,n}return Object(m.a)(a,[{key:"write",value:function(e,t){this.zipArchive.file(e,t)}},{key:"close",value:function(){var e=this;this.zipArchive.generateAsync({type:"blob"}).then((function(t){return Ka(t,e.fileName)}))}}]),a}(gn),On=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"write",value:function(e,t){var a=new Blob([t],{type:"text/plain;charset=utf-8"});Ka(a,e)}},{key:"close",value:function(){}}]),a}(gn);var xn="SELECT_DATASET";function yn(e,t,a){return function(n){n(function(e,t){return{type:xn,selectedDatasetId:e,datasets:t}}(e,t)),e&&a&&n(Sn(e))}}function Sn(e){return function(t,a){var n=z(Tt(a()),e);n&&n.bbox&&t(Cn(n.bbox))}}var wn=["Point","LineString","LinearRing","Polygon","MultiPoint","MultiLineString","MultiPolygon","Circle"];function Pn(e){return function(t,a){var n=qe(sa(a()),e);n&&(n.bbox?t(Cn(n.bbox)):n.geometry&&wn.includes(n.geometry.type)&&t(Cn((new d.a).readGeometry(n.geometry))))}}var kn="FLY_TO";function Cn(e){return{type:kn,mapId:"map",location:e}}var Tn="SELECT_PLACE_GROUPS";function In(e){return function(t,a){var n=Aa(a());t(function(e){return{type:Tn,selectedPlaceGroupIds:e}}(e));var r=Jt(a()),i=ca(a());if(null!==r&&i.length>0){var o,c=Object(u.a)(i);try{for(c.s();!(o=c.n()).done;){var s=o.value;Ke(s)||function(){var e=r.id,i=s.id,o="".concat(en,"-").concat(e,"-").concat(i);t(qn(o,h.get("Loading places"))),N(n.url,e,i,a().userAuthState.accessToken).then((function(e){t(tn(r.id,e))})).catch((function(e){t(Wa("error",e))})).finally((function(){t(Yn(o))}))}()}}catch(l){c.e(l)}finally{c.f()}}}}var Nn="SELECT_PLACE";function En(e,t,a){return function(n){n(function(e,t){return{type:Nn,selectedPlaceId:e,places:t}}(e,t)),a&&e&&n(Pn(e))}}var Mn="SET_RGB_LAYER_VISIBILITY";var An="SELECT_VARIABLE";var zn="SELECT_TIME";function Rn(e){return{type:zn,selectedTime:e}}var Dn="INC_SELECTED_TIME";var Ln="SELECT_TIME_RANGE";function Bn(e){return{type:Ln,selectedTimeRange:e}}var Gn="SELECT_TIME_SERIES_UPDATE_MODE";var _n="UPDATE_TIME_ANIMATION";var Fn="SET_MAP_INTERACTION";function Vn(e){return{type:Fn,mapInteraction:e}}var Un="SHOW_INFO_CARD";function Wn(e){return{type:Un,infoCardOpen:e}}var Zn="SET_VISIBLE_INFO_CARD_ELEMENTS";var Kn="UPDATE_INFO_CARD_ELEMENT_VIEW_MODE";var Hn="ADD_ACTIVITY";function qn(e,t){return{type:Hn,id:e,message:t}}var Jn="REMOVE_ACTIVITY";function Yn(e){return{type:Jn,id:e}}var Qn="CHANGE_LOCALE";function Xn(e){return{type:Qn,locale:e}}var $n="OPEN_DIALOG";function er(e){return{type:$n,dialogId:e}}var tr="CLOSE_DIALOG";function ar(e){return{type:tr,dialogId:e}}var nr="UPDATE_SETTINGS";function rr(e){return{type:nr,settings:e}}var ir=a(449),or=a(985),cr=a(978),sr=a(1004),lr=a(986),ur=a(1013),dr=a(1014),pr=a(331),mr=a(1007),fr=a(579),br=a(998),jr=a(970),hr=a(1012),gr=a(1015),vr=a(525),Or=a.n(vr),xr=a(384),yr=a.n(xr),Sr=a(383),wr=a.n(Sr),Pr=a(46),kr=a.n(Pr),Cr=a(246),Tr=a(372),Ir=a(997),Nr=a(999),Er=a(1011),Mr=a(972),Ar=a(1010),zr=a(1009),Rr=a(973),Dr=a(444),Lr=a.n(Dr),Br=a(969),Gr=a(995),_r=a(1005),Fr=a(996),Vr=a(968),Ur=a(586),Wr=function(e){var t=e.userInfo;return Object(ot.jsxs)(Gr.a,{container:!0,justifyContent:"center",spacing:1,children:[Object(ot.jsx)(Gr.a,{item:!0,children:Object(ot.jsx)("img",{src:t.picture,width:84,alt:h.get("User Profile")})}),Object(ot.jsx)(Gr.a,{item:!0,children:Object(ot.jsx)(Ur.a,{elevation:3,children:Object(ot.jsxs)(_r.a,{children:[Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:t.name,secondary:h.get("User name")})}),Object(ot.jsx)(Br.a,{light:!0}),Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:"".concat(t.email," (").concat(t.email_verified?h.get("verified"):h.get("not verified"),")"),secondary:h.get("E-mail")})}),Object(ot.jsx)(Br.a,{light:!0}),Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:t.nickname,secondary:h.get("Nickname")})})]})})})]})},Zr=function(e){var t=e.classes,a=e.updateAccessToken,r=Object(Tr.useAuth)(),i=n.useState(null),o=Object(V.a)(i,2),c=o[0],s=o[1],l=n.useState(!1),u=Object(V.a)(l,2),d=u[0],p=u[1];n.useEffect((function(){console.log("User changed:",r.user),r.user&&r.user.access_token?a(r.user.access_token):a(null)}),[r.user,a]);var m=function(){p(!1)},f=function(){s(null)};if(r.user){var b,j=r.user.profile,g=Object(ot.jsx)(Lr.a,{});if(j)if(j.picture)b=Object(ot.jsx)(Ir.a,{className:t.imageAvatar,src:j.picture,alt:j.name});else{var v=j.given_name||j.name||j.nickname,O=j.family_name,x=null;v&&O?x=v[0]+O[0]:v?x=v[0]:O&&(x=O[0]),null!==x&&(g=x.toUpperCase()),b=Object(ot.jsx)(Ir.a,{className:t.letterAvatar,children:g})}else b=Object(ot.jsx)(Ir.a,{className:t.letterAvatar,children:"?"});return Object(ot.jsxs)(n.Fragment,{children:[Object(ot.jsx)(mr.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"user-menu","aria-haspopup":"true",size:"small",className:t.iconButton,children:b}),Object(ot.jsxs)(fr.a,{id:"user-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:f,children:[Object(ot.jsx)(br.a,{onClick:function(){f(),p(!0)},children:h.get("Profile")}),Object(ot.jsx)(br.a,{onClick:function(){f(),r.signoutRedirect().then((function(){})).catch((function(e){console.error(e)}))},children:h.get("Log out")})]}),Object(ot.jsxs)(Mr.a,{open:d,TransitionComponent:Cr.a,keepMounted:!0,onClose:m,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(ot.jsx)(Rr.a,{id:"alert-dialog-slide-title",children:h.get("User Profile")}),Object(ot.jsx)(zr.a,{children:Object(ot.jsx)(Wr,{userInfo:r.user.profile})}),Object(ot.jsx)(Ar.a,{children:Object(ot.jsx)(Nr.a,{onClick:m,color:"primary",children:"OK"})})]})]})}var y=Object(ot.jsx)(mr.a,{onClick:r.isLoading?void 0:function(){r.signinRedirect().then((function(){})).catch((function(e){console.error(e)}))},size:"small",children:Object(ot.jsx)(Lr.a,{})});return r.isLoading&&(y=Object(ot.jsxs)("div",{className:t.signInWrapper,children:[y,Object(ot.jsx)(Er.a,{size:24,className:t.signInProgress})]})),y},Kr=Object(hr.a)((function(e){return Object(jr.a)({imageAvatar:{width:32,height:32,color:"#fff",backgroundColor:ve.a[300]},letterAvatar:{width:32,height:32,color:"#fff",backgroundColor:ve.a[300]},signInWrapper:{margin:e.spacing(1),position:"relative"},signInProgress:{color:ve.a[300],position:"absolute",top:"50%",left:"50%",zIndex:1,marginTop:-12,marginLeft:-12},iconButton:{padding:0}})}))((function(e){return Ne.instance.authClient?Object(ot.jsx)(Zr,Object(k.a)({},e)):null})),Hr="UPDATE_ACCESS_TOKEN";var qr={updateAccessToken:function(e){return function(t,a){var n=a().userAuthState.accessToken;n!==e&&(t(function(e){return{type:Hr,accessToken:e}}(e)),null!==e&&null!==n||t(Xa()))}}},Jr=Object(o.b)((function(e){return{}}),qr)(Kr),Yr=a(987),Qr=a(989),Xr=a(216),$r=a.n(Xr),ei=a(974),ti=Object(Qr.a)((function(e){return Object(jr.a)({dialog:{backgroundColor:e.palette.grey[600]},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},text:{marginTop:e.spacing(4),marginLeft:e.spacing(40),marginRight:e.spacing(40)}})})),ai=r.a.forwardRef((function(e,t){return Object(ot.jsx)(ei.a,Object(k.a)({direction:"up",ref:t},e))})),ni=function(e){var t=e.title,a=e.href,r=e.open,i=e.onClose,o=Object(n.useState)(""),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){fetch(a).then((function(e){return e.text()})).then((function(e){return l(e)}))}));var u=ti();return Object(ot.jsxs)(Mr.a,{fullScreen:!0,open:r,onClose:i,TransitionComponent:ai,children:[Object(ot.jsx)(ur.a,{className:u.appBar,children:Object(ot.jsxs)(dr.a,{children:[Object(ot.jsx)(mr.a,{edge:"start",color:"inherit",onClick:i,"aria-label":"close",size:"large",children:Object(ot.jsx)($r.a,{})}),Object(ot.jsx)(pr.a,{variant:"h6",className:u.title,children:t})]})}),Object(ot.jsx)(zr.a,{className:u.dialog,children:Object(ot.jsx)("div",{className:u.text,children:Object(ot.jsx)(Yr.a,{children:s,linkTarget:"_blank"})})})]})},ri={openDialog:er,updateResources:Ya},ii=Object(o.b)((function(e){return{locale:e.controlState.locale,appName:Ne.instance.branding.appBarTitle,allowRefresh:Ne.instance.branding.allowRefresh}}),ri)(Object(hr.a)((function(e){return Object(jr.a)({toolbar:{backgroundColor:Ne.instance.branding.headerBackgroundColor,paddingRight:e.spacing(1)},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},logoAnchor:{display:"flex",alignItems:"center"},logo:{marginLeft:e.spacing(1)},title:Object(k.a)({flexGrow:1,marginLeft:e.spacing(1)},Ne.instance.branding.headerTitleStyle),imageAvatar:{width:24,height:24,color:"#fff",backgroundColor:ve.a[300]},letterAvatar:{width:24,height:24,color:"#fff",backgroundColor:ve.a[300]},signInWrapper:{margin:e.spacing(1),position:"relative"},signInProgress:{color:ve.a[300],position:"absolute",top:"50%",left:"50%",zIndex:1,marginTop:-12,marginLeft:-12},iconButton:Object(k.a)({marginLeft:e.spacing(2)},Ne.instance.branding.headerIconStyle)})}))((function(e){var t=e.classes,a=e.appName,r=e.openDialog,i=e.allowRefresh,o=e.updateResources,c=n.useState(null),s=Object(V.a)(c,2),l=s[0],u=s[1],d=n.useState(!1),p=Object(V.a)(d,2),m=p[0],f=p[1],b=n.useState(!1),j=Object(V.a)(b,2),g=j[0],v=j[1],O=function(){u(null)};return Object(ot.jsxs)(ur.a,{position:"absolute",className:kr()(t.appBar),children:[Object(ot.jsxs)(dr.a,{disableGutters:!0,className:t.toolbar,variant:"dense",children:[Object(ot.jsx)("a",{href:Ne.instance.branding.organisationUrl||"",target:"_blank",rel:"noreferrer",className:t.logoAnchor,children:Object(ot.jsx)("img",{src:Ne.instance.branding.logoImage,width:Ne.instance.branding.logoWidth,alt:"xcube logo",className:t.logo})}),Object(ot.jsx)(pr.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:a}),Object(ot.jsx)(Jr,{}),i&&Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Refresh"),children:Object(ot.jsx)(mr.a,{onClick:o,size:"small",className:t.iconButton,children:Object(ot.jsx)(wr.a,{})})}),Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Help"),children:Object(ot.jsx)(mr.a,{onClick:function(e){u(e.currentTarget)},size:"small",className:t.iconButton,children:Object(ot.jsx)(Or.a,{})})}),Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Settings"),children:Object(ot.jsx)(mr.a,{onClick:function(){r("settings")},size:"small",className:t.iconButton,children:Object(ot.jsx)(yr.a,{})})})]}),Object(ot.jsxs)(fr.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:O,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[Object(ot.jsx)(br.a,{onClick:function(){O(),v(!0)},children:h.get("User Manual")}),Object(ot.jsx)(br.a,{onClick:function(){O(),f(!0)},children:h.get("Imprint")})]}),Object(ot.jsx)(ni,{title:h.get("User Manual"),href:"manual.md",open:g,onClose:function(){v(!1)}}),Object(ot.jsx)(ni,{title:h.get("Imprint"),href:"imprint.md",open:m,onClose:function(){f(!1)}})]})}))),oi=Object(hr.a)((function(e){return Object(jr.a)({form:{display:"flex",flexWrap:"wrap",paddingTop:e.spacing(1),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexGrow:0}})}))((function(e){var t=e.classes,a=e.children;return Object(ot.jsx)("form",{className:t.form,autoComplete:"off",children:a})})),ci=a(1018),si=a(1017),li=a(991),ui=a(1016),di=a(976),pi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(1)}})}))((function(e){var t=e.classes,a=e.label,n=e.control,r=e.actions;return Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[a,n,r]})})})),mi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(2),marginBottom:e.spacing(1),minWidth:120},selectEmpty:{}})}))((function(e){var t=e.classes,a=e.selectedDatasetId,n=e.datasets,r=e.selectDataset;a=a||"",n=n||[];var i=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"dataset-select",children:h.get("Dataset")}),o=Object(ot.jsx)(li.a,{variant:"standard",value:a,onChange:function(e){var t=e.target.value||null;r(t,n,!0)},input:Object(ot.jsx)(ci.a,{name:"dataset",id:"dataset-select"}),displayEmpty:!0,name:"dataset",className:t.selectEmpty,children:n.map((function(e){return Object(ot.jsx)(br.a,{value:e.id,selected:e.id===a,children:e.title},e.id)}))});return Object(ot.jsx)(pi,{label:i,control:o})})),fi={selectDataset:yn},bi=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedDatasetId:e.controlState.selectedDatasetId,datasets:e.dataState.datasets}}),fi)(mi),ji=a(526),hi=a.n(ji),gi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(2),marginBottom:e.spacing(1),minWidth:120},selectEmpty:{},button:{margin:e.spacing(.1)}})}))((function(e){var t=e.classes,a=e.canAddTimeSeries,n=e.selectedVariableName,r=e.variables,i=e.selectVariable,o=e.addTimeSeries;n=n||"",r=r||[];var c=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"variable-select",children:h.get("Variable")}),s=Object(ot.jsx)(li.a,{variant:"standard",className:t.selectEmpty,value:n,onChange:function(e){i(e.target.value||null)},input:Object(ot.jsx)(ci.a,{name:"variable",id:"variable-select"}),displayEmpty:!0,name:"variable",children:r.map((function(e){return Object(ot.jsx)(br.a,{value:e.name,selected:e.name===n,children:e.title||e.name},e.name)}))}),l=Object(ot.jsx)(mr.a,{className:t.button,disabled:!a,onClick:function(){o()},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show time-series diagram"),children:Object(ot.jsx)(hi.a,{})})});return Object(ot.jsx)(pi,{label:c,control:s,actions:l})})),vi={selectVariable:function(e){return{type:An,selectedVariableName:e}},addTimeSeries:sn},Oi=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedVariableName:e.controlState.selectedVariableName,canAddTimeSeries:ma(e),variables:Yt(e)}}),vi)(gi),xi=a(1020),yi=a(1021),Si=Object(hr.a)((function(e){return Object(jr.a)({})}))((function(e){var t=e.showRgbLayer,a=e.rgbSchema,n=e.setRgbLayerVisibility;return Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show RGB layer instead"),children:Object(ot.jsx)(xi.a,{label:h.get("RGB"),control:Object(ot.jsx)(yi.a,{color:"primary",checked:null!==a&&t,disabled:null===a,onChange:function(e){n(e.target.checked)}})})})})),wi={setRgbLayerVisibility:function(e){return{type:Mn,showRgbLayer:e}}},Pi=Object(o.b)((function(e){return{locale:e.controlState.locale,rgbSchema:na(e),showRgbLayer:e.controlState.showRgbLayer}}),wi)(Si),ki=a(994),Ci=a(385),Ti=a.n(Ci),Ii=Object(hr.a)((function(e){return Object(jr.a)({select:{minWidth:"5em"}})}))((function(e){var t=e.classes,a=e.placeGroups,n=e.selectPlaceGroups,r=e.selectedPlaceGroupIds,i=e.selectedPlaceGroupsTitle,o=e.removeAllUserPlaces;if(r=r||[],0===(a=a||[]).length||1===a.length&&"user"===a[0].id)return null;var c=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"place-groups-select",children:h.get("Places")}),s=Object(ot.jsx)(li.a,{variant:"standard",multiple:!0,displayEmpty:!0,onChange:function(e){n(e.target.value||null)},input:Object(ot.jsx)(ci.a,{name:"place-groups",id:"place-groups-select"}),value:r,renderValue:function(){return i},name:"place-groups",className:t.select,children:a.map((function(e){return Object(ot.jsxs)(br.a,{value:e.id,children:[Object(ot.jsx)(ki.a,{checked:r.indexOf(e.id)>-1}),Object(ot.jsx)(Vr.a,{primary:e.title})]},e.id)}))}),l=1===r.length&&"user"===r[0],u=Object(ot.jsx)(mr.a,{disabled:!l,onClick:function(){o()},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Remove places"),children:Object(ot.jsx)(Ti.a,{})})});return Object(ot.jsx)(pi,{label:c,control:s,actions:u})})),Ni={selectPlaceGroups:In,removeAllUserPlaces:function(){return{type:cn}}},Ei=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedPlaceGroupIds:e.controlState.selectedPlaceGroupIds,placeGroups:ia(e),selectedPlaceGroupsTitle:la(e)}}),Ni)(Ii),Mi=Object(hr.a)((function(e){return Object(jr.a)({select:{minWidth:"5em"},button:{}})}))((function(e){var t=e.classes,a=e.selectPlace,n=e.placeLabels,r=e.selectedPlaceId,i=e.selectedPlaceGroupIds,o=e.removeUserPlace,c=e.places;c=c||[],n=n||[],r=r||"",i=i||[];var s=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"place-select",children:h.get("Place")}),l=Object(ot.jsx)(li.a,{variant:"standard",value:r,onChange:function(e){a(e.target.value||null,c,!0)},input:Object(ot.jsx)(ci.a,{name:"place",id:"place-select"}),displayEmpty:!0,name:"place",className:t.select,disabled:0===c.length,children:c.map((function(e,t){return Object(ot.jsx)(br.a,{value:e.id,selected:e.id===r,children:n[t]},e.id)}))}),u=c.length>0&&1===i.length&&"user"===i[0]&&""!==r,d=Object(ot.jsx)(mr.a,{className:t.button,disabled:!u,onClick:function(){null!==r&&o(r,c)},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Remove place"),children:Object(ot.jsx)(Ti.a,{})})});return Object(ot.jsx)(pi,{label:s,control:l,actions:d})})),Ai={selectPlace:En,removeUserPlace:function(e,t){return{type:on,id:e,places:t}},openDialog:er},zi=Object(o.b)((function(e){return{locale:e.controlState.locale,datasets:e.dataState.datasets,userPlaceGroup:e.dataState.userPlaceGroup,selectedPlaceGroupIds:e.controlState.selectedPlaceGroupIds,selectedPlaceId:e.controlState.selectedPlaceId,places:ua(e),placeLabels:ba(e)}}),Ai)(Mi),Ri=a(528),Di=a.n(Ri),Li=a(529),Bi=a.n(Li),Gi=a(527),_i=a.n(Gi),Fi=a(530),Vi=a.n(Fi),Ui=a(531),Wi=a.n(Ui),Zi=a(1022),Ki=a(1001),Hi=Object(Qr.a)((function(e){return{formControl:{marginTop:e.spacing(1.5),marginRight:e.spacing(2)}}}));var qi={setMapInteraction:Vn},Ji=Object(o.b)((function(e){return{mapInteraction:e.controlState.mapInteraction}}),qi)((function(e){var t=e.mapInteraction,a=e.setMapInteraction,n=Hi();return Object(ot.jsx)(ui.a,{variant:"standard",className:n.formControl,children:Object(ot.jsxs)(Ki.a,{size:"small",value:t,exclusive:!0,onChange:function(e,t){a(null!==t?t:"Select")},children:[Object(ot.jsx)(Zi.a,{value:"Select",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Select a place in map"),children:Object(ot.jsx)(_i.a,{})})},0),Object(ot.jsx)(Zi.a,{value:"Point",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Add a point location in map"),children:Object(ot.jsx)(Di.a,{})})},1),Object(ot.jsx)(Zi.a,{value:"Polygon",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Draw a polygon area in map"),children:Object(ot.jsx)(Bi.a,{})})},2),Object(ot.jsx)(Zi.a,{value:"Circle",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Draw a circular area in map"),children:Object(ot.jsx)(Vi.a,{})})},3),Object(ot.jsx)(Zi.a,{value:"Geometry",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Import geometry"),children:Object(ot.jsx)(Wi.a,{})})},4)]})})})),Yi=a(1023),Qi=a(386),Xi=a.n(Qi),$i=a(580),eo=a(577),to=a(988),ao=Object(hr.a)((function(e){return Object(jr.a)({})}))((function(e){var t,a,n=e.hasTimeDimension,r=e.selectedTime,i=e.selectedTimeRange,o=e.selectTime,c=Object(ot.jsx)(Xi.a,{shrink:!0,htmlFor:"time-select",children:"".concat(h.get("Time")," (UTC)")}),s="number"===typeof r?Ga(r):null;Array.isArray(i)&&(t=Ga(i[0]),a=Ga(i[1]));var l=Object(ot.jsx)($i.a,{dateAdapter:eo.a,children:Object(ot.jsx)(to.a,{disabled:!n,variant:"inline",emptyLabel:n?void 0:h.get("Missing time axis"),inputFormat:"yyyy-MM-dd hh:mm:ss",id:"time-select",value:s,minDateTime:t,maxDateTime:a,onChange:function(e){o(null!==e?e.getTime():null)},ampm:!1,renderInput:function(e){return Object(ot.jsx)(Yi.a,Object(k.a)(Object(k.a)({},e),{},{variant:"standard",size:"small"}))}})});return Object(ot.jsx)(pi,{label:c,control:l})})),no={selectTime:Rn},ro=Object(o.b)((function(e){return{locale:e.controlState.locale,hasTimeDimension:!!ga(e),selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange}}),no)(ao),io=a(1025),oo=Object(hr.a)((function(e){return Object(jr.a)({box:{marginTop:e.spacing(2),marginLeft:e.spacing(5),marginRight:e.spacing(5),minWidth:200},label:{color:"grey",fontSize:"1em"}})}))((function(e){var t=e.classes,a=e.hasTimeDimension,r=e.selectedTime,i=e.selectTime,o=e.selectedTimeRange,c=Object(n.useState)(r),s=Object(V.a)(c,2),l=s[0],u=s[1];if(Object(n.useEffect)((function(){u(r||(o?o[0]:0))}),[r,o]),!a)return null;var d=Array.isArray(o);d||(o=[Date.now()-2*Va,Date.now()]);var p=[{value:o[0],label:_a(o[0])},{value:o[1],label:_a(o[1])}];return Object(ot.jsx)(di.a,{className:t.box,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Select time in dataset"),children:Object(ot.jsx)(io.a,{disabled:!d,min:o[0],max:o[1],value:l||0,valueLabelDisplay:"off",valueLabelFormat:function(e){return Fa(e)},marks:p,onChange:function(e,t){"number"===typeof t&&u(t)},onChangeCommitted:function(e,t){i&&"number"===typeof t&&i(t)},size:"small"})})})})),co={selectTime:Rn,selectTimeRange:Bn},so=Object(o.b)((function(e){return{locale:e.controlState.locale,hasTimeDimension:!!ga(e),selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange}}),co)(oo),lo=a(535),uo=a.n(lo),po=a(536),mo=a.n(po),fo=a(534),bo=a.n(fo),jo=a(537),ho=a.n(jo),go=a(532),vo=a.n(go),Oo=a(533),xo=a.n(Oo),yo=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginTop:e.spacing(1),marginRight:e.spacing(1)}})}))((function(e){var t=e.classes,a=e.timeAnimationActive,r=e.timeAnimationInterval,i=e.updateTimeAnimation,o=e.selectedTime,c=e.selectedTimeRange,s=e.selectTime,l=e.incSelectedTime,u=Object(n.useRef)(null);Object(n.useEffect)((function(){return p(),f}));var d=function(){l(1)},p=function(){a?m():f()},m=function(){f(),u.current=window.setInterval(d,r)},f=function(){null!==u.current&&(window.clearInterval(u.current),u.current=null)},b="number"===typeof o,j=h.get(a?"Stop":"Start"),g=a?Object(ot.jsx)(vo.a,{}):Object(ot.jsx)(xo.a,{}),v=Object(ot.jsx)(mr.a,{disabled:!b,"aria-label":j,onClick:function(){i(!a,r)},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Auto-step through times in the dataset"),children:g})}),O=Object(ot.jsx)(mr.a,{disabled:!b||a,onClick:function(){s(c?c[0]:null)},size:"large",children:Object(ot.jsx)(bo.a,{})}),x=Object(ot.jsx)(mr.a,{disabled:!b||a,onClick:function(){l(-1)},size:"large",children:Object(ot.jsx)(uo.a,{})}),y=Object(ot.jsx)(mr.a,{disabled:!b||a,onClick:function(){l(1)},size:"large",children:Object(ot.jsx)(mo.a,{})}),S=Object(ot.jsx)(mr.a,{disabled:!b||a,onClick:function(){s(c?c[1]:null)},size:"large",children:Object(ot.jsx)(ho.a,{})});return Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[O,x,v,y,S]})})})),So={selectTime:Rn,incSelectedTime:function(e){return{type:Dn,increment:e}},updateTimeAnimation:function(e,t){return{type:_n,timeAnimationActive:e,timeAnimationInterval:t}}},wo=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange,timeAnimationActive:e.controlState.timeAnimationActive,timeAnimationInterval:e.controlState.timeAnimationInterval}}),So)(yo),Po=a(538),ko=a.n(Po),Co=a(270),To=a.n(Co),Io=a(539),No=a.n(Io),Eo=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginTop:e.spacing(1),marginRight:e.spacing(1),marginLeft:"auto"}})}))((function(e){var t=e.classes,a=e.visible,n=e.flyToSelectedObject,r=e.infoCardOpen,i=e.showInfoCard,o=e.timeSeriesGroups,c=e.openDialog,s=e.allowRefresh,l=e.updateResources,u=e.compact;if(!a)return null;var d,p=o.length>0;Ne.instance.branding.allowDownloads&&(d=Object(ot.jsx)(mr.a,{disabled:!p,onClick:function(){return c("export")},size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Export data"),children:Object(ot.jsx)(ko.a,{})})}));var m,f,b=Object(ot.jsx)(mr.a,{onClick:n,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show selected place in map"),children:Object(ot.jsx)(No.a,{})})}),j=Object(ot.jsx)(mr.a,{onClick:function(){return i(!0)},disabled:r,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Open information panel"),children:Object(ot.jsx)(To.a,{})})});return u&&(s&&(m=Object(ot.jsx)(mr.a,{onClick:l,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Refresh"),children:Object(ot.jsx)(wr.a,{})})})),f=Object(ot.jsx)(mr.a,{onClick:function(){return c("settings")},size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Settings"),children:Object(ot.jsx)(yr.a,{})})})),Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[m,d,b,j,f]})})})),Mo={showInfoCard:Wn,flyToSelectedObject:function(){return function(e,t){var a=Ut(t()),n=_t(t());a?e(Pn(a)):n&&e(Sn(n))}},openDialog:er,updateResources:Ya},Ao=Object(o.b)((function(e){return{locale:e.controlState.locale,visible:!(!e.controlState.selectedDatasetId&&!e.controlState.selectedPlaceId),infoCardOpen:e.controlState.infoCardOpen,timeSeriesGroups:e.dataState.timeSeriesGroups,compact:Ne.instance.branding.compact,allowRefresh:Ne.instance.branding.allowRefresh}}),Mo)(Eo),zo=Object(o.b)((function(e){return{locale:e.controlState.locale,show:e.dataState.datasets.length>0}}),{})((function(e){return e.show?Object(ot.jsxs)(oi,{children:[Object(ot.jsx)(bi,{}),Object(ot.jsx)(Oi,{}),Object(ot.jsx)(Pi,{}),Object(ot.jsx)(Ei,{}),Object(ot.jsx)(zi,{}),Object(ot.jsx)(Ji,{}),Object(ot.jsx)(ro,{}),Object(ot.jsx)(wo,{}),Object(ot.jsx)(so,{}),Object(ot.jsx)(Ao,{})]}):null})),Ro=a(317),Do=a(18),Lo=a(95),Bo=(a(745),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={error:null},n}return Object(m.a)(a,[{key:"componentDidCatch",value:function(e,t){console.error(e),t.componentStack&&console.error(t.componentStack)}},{key:"render",value:function(){if(!this.props.children)throw new Error("An ErrorBoundary requires at least one child");return this.state.error?Object(ot.jsxs)("div",{children:[Object(ot.jsx)("h2",{className:"errorBoundary-header",children:h.get("Something went wrong.")}),Object(ot.jsxs)("details",{className:"errorBoundary-details",style:{whiteSpace:"pre-wrap"},children:[this.state.error.toString(),Object(ot.jsx)("br",{})]})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),a}(n.Component)),Go=a(162),_o=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).divRef=null,e.handleDivRef=function(t){e.divRef=t},e}return Object(m.a)(a,[{key:"addMapObject",value:function(e){var t=new Go.a({element:this.divRef});return e.addControl(t),t}},{key:"updateMapObject",value:function(e,t,a){return t}},{key:"removeMapObject",value:function(e,t){var a,n=Object(u.a)(e.getControls().getArray());try{for(n.s();!(a=n.n()).done;){if(a.value===t){e.removeControl(t);break}}}catch(r){n.e(r)}finally{n.f()}}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.style,n=e.className,r=(n?n+" ":"")+"ol-unselectable ol-control";return Object(ot.jsx)("div",{style:a,className:r,ref:this.handleDivRef,children:t})}}]),a}(vt),Fo=a(354),Vo=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"addMapObject",value:function(e){var t=new Fo.a(this.getOptions());return e.addControl(t),t}},{key:"updateMapObject",value:function(e,t,a){return t.setProperties(this.getOptions()),t}},{key:"removeMapObject",value:function(e,t){e.removeControl(t)}}]),a}(vt),Uo=a(131),Wo=a(86),Zo=a(355),Ko=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"addMapObject",value:function(e){var t=new Zo.a(this.getOptions()),a=!!this.props.active;return t.setActive(a),e.addInteraction(t),a&&this.listen(t,this.props),t}},{key:"updateMapObject",value:function(e,t,a){t.setProperties(this.getOptions());var n=!!this.props.active;return t.setActive(n),this.unlisten(t,a),n&&this.listen(t,this.props),t}},{key:"removeMapObject",value:function(e,t){this.unlisten(t,this.props),e.removeInteraction(t)}},{key:"getOptions",value:function(){var e=Object(Uo.a)(Object(Wo.a)(a.prototype),"getOptions",this).call(this);delete e.layerId,delete e.active,delete e.onDrawStart,delete e.onDrawEnd;var t=this.props.layerId;if(t&&!e.source){var n=this.getMapObject(t);n&&(e.source=n.getSource())}return e}},{key:"listen",value:function(e,t){var a=t.onDrawStart,n=t.onDrawEnd;a&&e.on("drawstart",a),n&&e.on("drawend",n)}},{key:"unlisten",value:function(e,t){var a=t.onDrawStart,n=t.onDrawEnd;a&&e.un("drawstart",a),n&&e.un("drawend",n)}}]),a}(vt),Ho=a(25),qo=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"addMapObject",value:function(e){return this.updateView(e)}},{key:"removeMapObject",value:function(e,t){}},{key:"updateMapObject",value:function(e,t){return this.updateView(e)}},{key:"updateView",value:function(e){var t=this.props.projection,a=e.getView().getProjection();if("string"===typeof t&&a&&(a=a.getCode()),t&&t!==a){var n=e.getView(),r=new pt.a(Object(k.a)(Object(k.a)({},this.props),{},{center:Object(Ho.m)(n.getCenter()||[0,0],a,t),minZoom:n.getMinZoom(),zoom:n.getZoom()}));e.getLayers().forEach((function(e){e instanceof yt.a&&e.getSource().forEachFeature((function(e){var n;null===(n=e.getGeometry())||void 0===n||n.transform(a,t)}))})),e.setView(r)}else e.getView().setProperties(this.props);return e.getView()}}]),a}(vt),Jo=a(540),Yo=a.n(Jo);function Qo(e,t,a){if(e.getGeometry()instanceof _.a)e.setStyle(function(e,t,a,n){var r=new at.a({color:t}),i=new nt.a({color:a,width:n});return new rt.c({image:new tt.a({radius:e,fill:r,stroke:i})})}(7,t,"white",1));else{a="number"===typeof a?a:.25;var n=Yo()(t);n=Array.isArray(n)?[n[0],n[1],n[2],a]:[255,255,255,a],e.setStyle(function(e,t,a){var n=new at.a({color:e}),r=new nt.a({color:t,width:a});return new rt.c({fill:n,stroke:r})}(n,t,2))}}var Xo=new $e.a,$o=new $e.a,ec={zIndex:1e3,right:272,top:10},tc=new nt.a({color:[255,200,0,1],width:3}),ac=new at.a({color:[255,200,0,.05]}),nc=new rt.c({stroke:tc,fill:ac,image:new tt.a({radius:10,stroke:tc,fill:ac})}),rc=Object(hr.a)((function(e){return Object(jr.a)({})}),{withTheme:!0})((function(e){var t=e.theme,a=e.mapId,r=e.mapInteraction,i=e.mapProjection,o=e.baseMapLayer,c=e.rgbLayer,s=e.variableLayer,l=e.datasetBoundaryLayer,p=e.placeGroupLayers,m=e.colorBarLegend,f=e.addUserPlace,b=e.addUserPlacesFromText,j=e.userPlaceGroup,g=e.selectPlace,v=e.selectedPlaceId,O=e.places,x=e.imageSmoothing,y=e.onMapRef,S=Object(n.useState)(null),w=Object(V.a)(S,2),P=w[0],k=w[1],C=Object(n.useState)(v||null),T=Object(V.a)(C,2),I=T[0],N=T[1];Object(n.useEffect)((function(){if(P){var e=v||null;if(e!==I){if($o.clear(),e){var t=function(e,t){var a,n=Object(u.a)(e.getLayers().getArray());try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r instanceof yt.a){var i=r.getSource().getFeatureById(t);if(i)return i}}}catch(o){n.e(o)}finally{n.f()}return null}(P,e);if(t){var a=t.clone();a.setId("Select-"+t.getId()),a.setStyle(void 0),$o.addFeature(a)}}N(e)}}}),[P,v,I]),Object(n.useEffect)((function(){P&&P.getLayers().forEach((function(e){e instanceof st.a?e.getSource().changed():e.changed()}))}),[P,x]);var E=function(e){if(null!==P&&f&&"Select"!==r){var a=function(){var a=e.feature,n=a.getGeometry();if(!n)return{v:void 0};var i="User-".concat(r,"-").concat($()),o=P.getView().getProjection();if(n instanceof Ro.a){var c=Object(Lo.b)(n);a.setGeometry(c)}n=a.clone().getGeometry().transform(o,mt);var s=(new d.a).writeGeometryObject(n);a.setId(i);var l=0;Gt.userLayer&&(l=Xo.getFeatures().length);var u=ze(l);Qo(a,Re(u,t.palette.mode),Ne.instance.branding.polygonFillOpacity);for(var p=h.get(r),m="",b=1;m="".concat(p," ").concat(b),j.features.find((function(e){return(e.properties||{}).label===m}));b++);f(i,m,u,s,!0)}();if("object"===typeof a)return a.v}return!0};var M=null;m&&(M=Object(ot.jsx)(_o,{id:"legend",style:ec,children:m})),null!==c&&(s=c);return Object(ot.jsx)(Bo,{children:Object(ot.jsxs)(gt,{id:a,onClick:function(e){return function(e){if("Select"===r){var t=null,a=e.map.getFeaturesAtPixel(e.pixel);if(a){var n,i=Object(u.a)(a);try{for(i.s();!(n=i.n()).done;){var o=n.value;if("function"===typeof o.getId){t=o.getId()+"";break}}}catch(c){i.e(c)}finally{i.f()}}g&&g(t,O,!1)}}(e)},onMapRef:function(e){y&&y(e),k(e)},mapObjects:Gt,isStale:!0,onDropFiles:function(e){b&&e.forEach((function(e){var t=new FileReader;t.onloadend=function(){"string"===typeof t.result&&b(t.result)},t.readAsText(e,"UTF-8")}))},children:[Object(ot.jsx)(qo,{id:"view",projection:i}),Object(ot.jsxs)(ct,{children:[o,s,l,Object(ot.jsx)(St,{id:"userLayer",opacity:1,zIndex:500,source:Xo}),Object(ot.jsx)(St,{id:"selectionLayer",opacity:.7,zIndex:510,style:nc,source:$o})]}),p,Object(ot.jsx)(Ko,{id:"drawPoint",layerId:"userLayer",active:"Point"===r,type:Do.a.POINT,wrapX:!0,stopClick:!0,onDrawEnd:E}),Object(ot.jsx)(Ko,{id:"drawPolygon",layerId:"userLayer",active:"Polygon"===r,type:Do.a.POLYGON,wrapX:!0,stopClick:!0,onDrawEnd:E}),Object(ot.jsx)(Ko,{id:"drawCircle",layerId:"userLayer",active:"Circle"===r,type:Do.a.CIRCLE,wrapX:!0,stopClick:!0,onDrawEnd:E}),M,Object(ot.jsx)(Vo,{bar:!1})]})})}));var ic=a(1008),oc="_alpha",cc="_r";function sc(e){var t=e.baseName;return e.isReversed&&(t+=cc),e.isAlpha&&(t+=oc),t}function lc(e){var t=e[0],a=e[e.length-1],n=Math.min(10,Math.max(2,Math.round(-Math.log10(a-t))));return e.map((function(e){return function(e,t){var a=Math.round(e);return Math.abs(a-e)<1e-8?a+"":e.toFixed(t)}(e,n)}))}function uc(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return lc(dc(e,t,a))}function dc(e,t,a){for(var n=(t-e)/(a-1),r=new Array(a),i=0;i<a;i++)r[i]=e+i*n;return r}var pc=new Image;pc.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURcDAwP///ytph7QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAUSURBVBjTYwABQSCglEENMxgYGAAynwRB8BEAgQAAAABJRU5ErkJggg==";var mc=function(e){var t=e.colorBar,a=e.imageData,r=e.opacity,i=e.width,o=e.height,c=e.onOpenEditor,s=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=s.current;if(null!==e){var n=new Image;n.onload=function(){!function(e,t,a,n){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var i=r.getContext("2d");if(null===i)return;i.drawImage(n,0,0);var o=i.getImageData(0,0,r.width,r.height).data;if(o=o.slice(0,o.length/2),e.isReversed){for(var c=new Uint8ClampedArray(o.length),s=0;s<o.length;s+=4){var l=o.length-s-4;c[l]=o[s],c[l+1]=o[s+1],c[l+2]=o[s+2],c[l+3]=o[s+3]}o=c}if(e.isAlpha)for(var u=512/o.length,d=0;d<o.length/2;d+=4)o[d+3]=u*d;if(t<1)for(var p=0;p<o.length;p+=4)o[p+3]*=t;Promise.resolve(createImageBitmap(new ImageData(o,o.length/4,1))).then((function(e){var t=a.getContext("2d");if(null!==t){var n=t.createPattern(pc,"repeat");t.fillStyle=null!==n?n:"#ffffff",t.fillRect(0,0,a.width,a.height),t.drawImage(e,0,0,a.width,a.height)}}))}(t,r,e,n)},n.src="data:image/png;base64,".concat(a)}}),[t,a,r]),Object(ot.jsx)(ot.Fragment,{children:Boolean(a)?Object(ot.jsx)("canvas",{ref:s,width:i||240,height:o||24,onClick:c}):Object(ot.jsx)("div",{children:h.get("Unknown color bar")+": ".concat(t.baseName)})})};var fc=Object(Qr.a)((function(e){return{title:{fontSize:"x-small",fontWeight:"bold",width:"100%",display:"flex",flexWrap:"nowrap",justifyContent:"center",paddingBottom:e.spacing(.5)},label:{fontSize:"x-small",fontWeight:"bold",width:"100%",display:"flex",flexWrap:"nowrap",justifyContent:"space-between"},container:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),paddingBottom:e.spacing(.5),paddingTop:e.spacing(.5),color:"black"},sliderBox:{marginTop:e.spacing(1),marginLeft:e.spacing(5),marginRight:e.spacing(5),minWidth:320,width:"calc(100% - ".concat(e.spacing(12),"px)")},colorBarBox:{marginTop:e.spacing(.6),marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},colorBarGroupTitle:{marginTop:e.spacing(.4),color:e.palette.grey[400]},colorBarGroupItemBox:{marginTop:e.spacing(.2)},colorBarMinMaxEditor:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},minMaxBox:{display:"flex",justifyContent:"center"},minTextField:{maxWidth:"8em",paddingRight:2},maxTextField:{maxWidth:"8em",paddingLeft:2}}}));function bc(e){var t=e.minValue,a=e.maxValue,r=e.count;return Object(ot.jsx)(n.Fragment,{children:uc(t,a,r).map((function(e,t){return Object(ot.jsx)("span",{children:e},t)}))})}function jc(e){return[e[0]+"",e[1]+""]}var hc={updateVariableColorBar:function(e,t,a){return function(n,r){var i=r().controlState.selectedDatasetId,o=r().controlState.selectedVariableName;i&&o&&n(function(e,t,a,n,r){return{type:hn,datasetId:e,variableName:t,colorBarMinMax:a,colorBarName:n,opacity:r}}(i,o,e,t,a))}}},gc=Object(o.b)((function(e){return{variableName:Ft(e),variableUnits:Xt(e),variableColorBarMinMax:$t(e),variableColorBarName:ea(e),variableOpacity:ta(e),colorBars:e.dataState.colorBars}}),hc)((function(e){var t=e.variableName,a=e.variableUnits,r=e.variableColorBarMinMax,i=e.variableColorBarName,o=e.variableOpacity,c=e.updateVariableColorBar,s=e.colorBars,l=e.width,d=e.height,p=e.numTicks,m=fc(),f=n.useState(null),b=Object(V.a)(f,2),j=b[0],g=b[1],v=n.useState(null),O=Object(V.a)(v,2),x=O[0],y=O[1],S=n.useState(r),w=Object(V.a)(S,2),P=w[0],C=w[1],T=n.useState(r),I=Object(V.a)(T,2),N=I[0],E=I[1],M=n.useState(jc(r)),A=Object(V.a)(M,2),z=A[0],R=A[1],D=n.useState([!1,!1]),L=Object(V.a)(D,2),B=L[0],G=L[1];n.useEffect((function(){R(jc(r))}),[r]);var _=Boolean(j),F=Boolean(x);if(!t||!s)return null;var U,W,Z=function(e){var t=e,a=t.endsWith(oc);a&&(t=t.slice(0,t.length-oc.length));var n=t.endsWith(cc);return n&&(t=t.slice(0,t.length-cc.length)),{baseName:t,isAlpha:a,isReversed:n}}(i),K=s.images[Z.baseName],H="".concat(t," (").concat(a||"-",")");if(_){for(var q,J=Object(V.a)(N,2),Y=J[0],Q=J[1],X=Y<Q?Q-Y:1,$=Math.floor(Math.log10(X)),ee=X*Math.pow(10,-$),te=null,ae=0,ne=[.25,.2,.15,.125,.1];ae<ne.length;ae++){var re=ee/ne[ae],ie=Math.floor(re);if(Math.abs(ie-re)<1e-10){te=ie;break}}null!==te&&te>=2?q=Math.max(2,Math.round(te/2)):(q=4,te=8);var oe=Y<Q?X/te:.5,ce=Y-q*oe,se=Q+q*oe,le=(se-ce)/(te+2*q),ue=[ce,Y,Q,se],de=lc(ue).map((function(e,t){return{value:ue[t],label:e}}));U=Object(ot.jsxs)("div",{className:m.colorBarMinMaxEditor,children:[Object(ot.jsx)("span",{style:{paddingLeft:14},children:H}),Object(ot.jsx)(di.a,{className:m.sliderBox,children:Object(ot.jsx)(io.a,{min:ce,max:se,value:P,marks:de,step:le,onChange:function(e,t){Array.isArray(t)&&C([t[0],t[1]])},onChangeCommitted:function(e,t){Array.isArray(t)&&c([t[0],t[1]],i,o)},valueLabelDisplay:"auto",size:"small"})}),Object(ot.jsxs)(di.a,{component:"form",className:m.minMaxBox,children:[Object(ot.jsx)(Yi.a,{className:m.minTextField,label:"Minimum",variant:"filled",size:"small",value:z[0],error:B[0],onChange:function(e){return function(e){var t=e.target.value;R([t,z[1]]);var a=Number.parseFloat(t),n=!1;if(!Number.isNaN(a)&&a<P[1]){if(a!==P[0]){var r=[a,P[1]];C(r),E(r),c(r,i,o)}}else n=!0;G([n,B[1]])}(e)}}),Object(ot.jsx)(Yi.a,{className:m.maxTextField,label:"Maximum",variant:"filled",size:"small",value:z[1],error:B[1],onChange:function(e){return function(e){var t=e.target.value;R([z[0],t]);var a=Number.parseFloat(t),n=!1;if(!Number.isNaN(a)&&a>P[0]){if(a!==P[1]){var r=[P[0],a];C(r),E(r),c(r,i,o)}}else n=!0;G([B[0],n])}(e)}})]})]})}if(F){var pe,me=0,fe=[],be=Object(u.a)(s.groups);try{for(be.s();!(pe=be.n()).done;){var je=pe.value;if(je.names&&0!==je.names.length){fe.push(Object(ot.jsx)(gr.a,{arrow:!0,title:je.description,placement:"left",children:Object(ot.jsx)(di.a,{className:m.colorBarGroupTitle,children:je.title})},me++));var he,ge=Object(u.a)(je.names);try{var ve=function(){var e=he.value;fe.push(Object(ot.jsx)(di.a,{className:m.colorBarGroupItemBox,border:1,borderColor:e===Z.baseName?"orange":"black",width:240,height:20,children:Object(ot.jsx)(gr.a,{arrow:!0,title:e,placement:"left",children:Object(ot.jsx)("img",{src:"data:image/png;base64,".concat(s.images[e]),alt:"Color Bar",width:"100%",height:"100%",onClick:function(){var t;t=e,i=sc(Object(k.a)(Object(k.a)({},Z),{},{baseName:t})),c(r,i,o)}})})},me++))};for(ge.s();!(he=ge.n()).done;)ve()}catch(Oe){ge.e(Oe)}finally{ge.f()}}}}catch(Oe){be.e(Oe)}finally{be.f()}W=Object(ot.jsxs)(di.a,{className:m.colorBarBox,children:[Object(ot.jsxs)(di.a,{component:"span",children:[Object(ot.jsx)(ki.a,{color:"primary",checked:Z.isAlpha,onChange:function(e){var t=e.currentTarget.checked;i=sc(Object(k.a)(Object(k.a)({},Z),{},{isAlpha:t})),c(r,i,o)},size:"small",style:{paddingLeft:0,paddingRight:2,paddingTop:4,paddingBottom:4}}),Object(ot.jsx)(di.a,{component:"span",children:h.get("Hide small values")}),Object(ot.jsx)(ki.a,{color:"primary",checked:Z.isReversed,onChange:function(e){var t=e.currentTarget.checked;i=sc(Object(k.a)(Object(k.a)({},Z),{},{isReversed:t})),c(r,i,o)},size:"small",style:{paddingLeft:10,paddingRight:2,paddingTop:4,paddingBottom:4}}),Object(ot.jsx)(di.a,{component:"span",children:h.get("Reverse")})]}),Object(ot.jsxs)(di.a,{component:"div",style:{display:"flex",alignItems:"center"},children:[Object(ot.jsx)("span",{children:h.get("Opacity")}),Object(ot.jsx)(io.a,{min:0,max:1,value:o,step:.01,style:{flexGrow:1,marginLeft:10,marginRight:10},onChange:function(e,t){c(r,i,t)},size:"small"})]}),fe]})}return Object(ot.jsxs)("div",{className:"ol-control "+m.container,children:[Object(ot.jsx)("div",{className:m.title,children:Object(ot.jsx)("span",{children:H})}),Object(ot.jsx)(mc,{colorBar:Z,imageData:K,opacity:o,width:l,height:d,onOpenEditor:function(e){y(e.currentTarget)}}),Object(ot.jsx)("div",{className:m.label,onClick:function(e){g(e.currentTarget),C(r),E(r)},children:Object(ot.jsx)(bc,{minValue:r[0],maxValue:r[1],count:p||5})}),Object(ot.jsx)(ic.a,{anchorEl:j,open:_,onClose:function(){g(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:U}),Object(ot.jsx)(ic.a,{anchorEl:x,open:F,onClose:function(){y(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:W})]})})),vc={addUserPlace:function(e,t,a,n,r){return function(i,o){i(function(e,t,a,n,r){return{type:an,id:e,label:t,color:a,geometry:n,selectPlace:r}}(e,t,a,n,r)),o().controlState.autoShowTimeSeries&&i(sn())}},addUserPlacesFromText:rn,selectPlace:En},Oc=Object(o.b)((function(e,t){return{locale:e.controlState.locale,variableLayer:Pa(e),rgbLayer:ka(e),datasetBoundaryLayer:wa(e),placeGroupLayers:Ia(e),colorBarLegend:Object(ot.jsx)(gc,{}),userPlaceGroup:Nt(e),mapId:"map",mapInteraction:e.controlState.mapInteraction,mapProjection:qt(e),selectedPlaceId:e.controlState.selectedPlaceId,places:ua(e),baseMapLayer:za(e),imageSmoothing:Kt(e),onMapRef:t.onMapRef}}),vc)(rc),xc=a(549),yc=a.n(xc),Sc=a(541),wc=a(582),Pc=a(545),kc=a(548),Cc=a(982),Tc=a(983),Ic=a(558),Nc=a(559),Ec=a(984),Mc=a(330),Ac=a(324),zc=function(e){return Object(jr.a)({chartContainer:{userSelect:"none",marginTop:e.spacing(1),width:"99%",height:"32vh",display:"flex",flexDirection:"column",alignItems:"flex-stretch"},responsiveContainer:{flexGrow:1},actionButton:{zIndex:1e3,opacity:.8},toolTipContainer:{backgroundColor:"black",opacity:.8,color:"white",border:"2px solid black",borderRadius:e.spacing(2),padding:e.spacing(1.5)},toolTipValue:{fontWeight:"bold"},toolTipLabel:{fontWeight:"bold",paddingBottom:e.spacing(1)},chartTitle:{}})},Rc=["dataMin","dataMax"],Dc=["auto","auto"],Lc=Object(hr.a)(zc,{withTheme:!0})((function(e){var t,a,r=e.classes,i=e.timeSeriesGroup,o=e.selectTimeSeries,c=e.selectedTime,s=e.selectTime,l=e.selectedTimeRange,u=e.selectTimeRange,d=e.places,p=e.selectPlace,m=e.placeInfos,f=e.dataTimeRange,b=e.theme,j=e.showErrorBars,g=e.showPointsOnly,v=e.removeTimeSeriesGroup,O=e.completed,x=Object(n.useState)({}),y=Object(V.a)(x,2),S=y[0],w=y[1],P=function(){w({})},C=b.palette.mode,T=b.palette.primary.light,I=b.palette.primary.main,N=b.palette.primary.contrastText,E=!1,M=null,A=null;if(l){E=!((t=l)===(a=f||null)||null!==t&&null!=a&&t[0]===a[0]&&t[1]===a[1]);var z=Object(V.a)(l,2);M=z[0],A=z[1]}var R=function(){var e=S.firstTime,t=S.secondTime;if(console.log("zoomIn:",e,t),e!==t&&void 0!==e&&void 0!==t){var a=e,n=t;if(a>n){var r=[n,a];a=r[0],n=r[1]}P(),u&&u([a,n])}else P()},D=function(){P(),u&&u(f||null)},L=null,B=i.timeSeriesArray.map((function(e,t){var a=e.source,n=a.valueDataKey,r=a.variableName,c="yellow";if(m){var s=m[a.placeId];if(s){var l=s.place,u=s.label,f=s.color;if("Point"===l.geometry.type){var b=l.geometry.coordinates[0],h=l.geometry.coordinates[1];r+=" (".concat(u,": ").concat(h.toFixed(5),",").concat(b.toFixed(5),")")}else r+=" (".concat(u,")");c=f}}var v=[];e.data.forEach((function(e){if(null!==e[n]){var t=!0,a=!0;null!==M&&(t=e.time>=M),null!==A&&(a=e.time<=A),t&&a&&v.push(e)}})),null===L&&(L=n);var O,x=Re(c,C);return n&&j&&a.errorDataKey&&(O=Object(ot.jsx)(Sc.a,{dataKey:a.errorDataKey,width:4,strokeWidth:1,stroke:x})),Object(ot.jsx)(wc.a,{type:"monotone",name:r,unit:a.variableUnits,data:v,dataKey:n,dot:Object(ot.jsx)(Gc,{radius:3,stroke:x,fill:"white",strokeWidth:2}),activeDot:Object(ot.jsx)(Gc,{radius:3,stroke:"white",fill:x,strokeWidth:2}),stroke:x,strokeOpacity:g?0:e.dataProgress,isAnimationActive:!1,onClick:function(){return a=i.id,n=t,r=e,o&&o(a,n,r),void p(r.source.placeId,d,!0);var a,n,r},children:O},t)})),G=null;null!==c&&(G=Object(ot.jsx)(Pc.a,{isFront:!0,x:c,stroke:I,strokeWidth:3,strokeOpacity:.5}));var _=S.firstTime,F=S.secondTime,U=null;void 0!==_&&void 0!==F&&(U=Object(ot.jsx)(kc.a,{x1:_,x2:F,strokeOpacity:.3,fill:T,fillOpacity:.3}));var W=[];if(E){var Z=Object(ot.jsx)(mr.a,{className:r.actionButton,"aria-label":"Zoom Out",onClick:function(){D()},size:"large",children:Object(ot.jsx)(yc.a,{})},"zoomOutButton");W.push(Z)}var K,H=O.reduce((function(e,t){return e+t}),0)/O.length;K=H>0&&H<100?Object(ot.jsx)(Er.a,{size:24,className:r.actionButton,color:"secondary"},"loadingTimeSeriesGroup"):Object(ot.jsx)(mr.a,{className:r.actionButton,"aria-label":"Close",onClick:function(){v&&v(i.id)},size:"large",children:Object(ot.jsx)($r.a,{})},"removeTimeSeriesGroup"),W.push(K);var q=h.get("Time-Series"),J=i.variableUnits||h.get("unknown units"),Y="".concat(q," (").concat(J,")");return Object(ot.jsxs)("div",{className:r.chartContainer,children:[Object(ot.jsxs)(di.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(pr.a,{className:r.chartTitle,children:Y}),Object(ot.jsx)(di.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",children:W})]}),Object(ot.jsx)(Cc.a,{width:"99%",className:r.responsiveContainer,children:Object(ot.jsxs)(Tc.a,{onMouseDown:function(e){var t=e&&e.activeLabel;w({firstTime:t})},onMouseMove:function(e){if(void 0!==S.firstTime){var t=e&&e.activeLabel;w(Object(k.a)(Object(k.a)({},S),{},{secondTime:t}))}},onMouseUp:function(e){R()},onMouseEnter:function(){P()},onMouseLeave:function(){P()},onClick:function(e){e&&s&&null!==e.activeLabel&&Number.isFinite(e.activeLabel)&&s(e.activeLabel),P()},syncId:"anyId",style:{color:N},children:[Object(ot.jsx)(Ic.a,{dataKey:"time",type:"number",tickCount:6,domain:l||Rc,tickFormatter:function(e){return"number"===typeof e&&Number.isFinite(e)?_a(e):null},stroke:N,allowDuplicatedCategory:!1}),Object(ot.jsx)(Nc.a,{dataKey:L||"mean",type:"number",domain:Dc,stroke:N}),Object(ot.jsx)(Ec.a,{strokeDasharray:"3 3"}),Object(ot.jsx)(Mc.a,{content:Object(ot.jsx)(Bc,{})}),Object(ot.jsx)(Ac.a,{}),B,U,G]})})]})})),Bc=Object(hr.a)(zc)((function(e){var t=e.classes,a=e.active,n=e.label,r=e.payload;if(!a)return null;if("number"!==typeof n)return null;if(!r||0===r.length)return null;var i=r.map((function(e,a){var n=e.name,r=e.value,i=e.color,o=e.unit,c=e.dataKey;if("number"!==typeof r)return null;var s=r.toFixed(3);"#00000000"===i&&(i="#FAFFDD");var l=-1!==n.indexOf(":")?"":" (".concat(c,")");return Object(ot.jsxs)("div",{children:[Object(ot.jsxs)("span",{children:[n,":\xa0"]}),Object(ot.jsx)("span",{className:t.toolTipValue,style:{color:i},children:s}),Object(ot.jsxs)("span",{children:["\xa0","".concat(o," ").concat(l)]})]},a)}));return i?Object(ot.jsxs)("div",{className:t.toolTipContainer,children:[Object(ot.jsx)("span",{className:t.toolTipLabel,children:"".concat(Fa(n)," UTC")}),i]}):null})),Gc=function(e){var t=e.cx,a=e.cy,n=e.radius,r=e.stroke,i=e.fill,o=e.strokeWidth,c=n+.5*o,s=2*c,l=Math.floor(100*n/s+.5)+"%",u=Math.floor(100*o/s+.5)+"%";return"number"===typeof t&&"number"===typeof a?Object(ot.jsx)("svg",{x:t-c,y:a-c,width:s,height:s,viewBox:"0 0 ".concat(1024," ").concat(1024),children:Object(ot.jsx)("circle",{cx:"50%",cy:"50%",r:l,strokeWidth:u,stroke:r,fill:i})}):null},_c=Object(hr.a)((function(e){return Object(jr.a)({box:{marginTop:e.spacing(1),marginLeft:e.spacing(5),marginRight:e.spacing(5),width:"calc(100% - ".concat(e.spacing(18),")"),height:"5em",display:"flex",alignItems:"flex-end"}})}))((function(e){var t=e.classes,a=e.dataTimeRange,r=e.selectedTimeRange,i=e.selectTimeRange,o=Object(n.useState)(r),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){l(r)}),[r]);var u=Array.isArray(a);u||(a=[Date.now()-2*Va,Date.now()]);var d=[{value:a[0],label:_a(a[0])},{value:a[1],label:_a(a[1])}];return Object(ot.jsx)(di.a,{className:t.box,children:Object(ot.jsx)(io.a,{disabled:!u,min:a[0],max:a[1],value:s,marks:d,onChange:function(e,t){Array.isArray(t)&&l([t[0],t[1]])},onChangeCommitted:function(e,t){i&&Array.isArray(t)&&i([t[0],t[1]])},size:"small",valueLabelDisplay:"on",valueLabelFormat:function(e){return Fa(e)}})})})),Fc=Object(hr.a)((function(e){return Object(jr.a)({chartContainer:{display:"flex",flexDirection:"column",flexWrap:"wrap",flexFlow:"flex-start",alignItems:"center"},noChartsCard:{width:"20em"},noChartsTitle:{fontSize:14}})}),{withTheme:!0})((function(e){var t=e.classes,a=e.locale,n=e.timeSeriesGroups,r=e.selectedTime,i=e.selectedTimeRange,o=e.dataTimeRange,c=e.selectTime,s=e.selectTimeRange,l=e.removeTimeSeriesGroup,u=e.showPointsOnly,d=e.showErrorBars,p=e.placeInfos,m=e.places,f=e.selectPlace,b=n.map((function(e){var t=e.timeSeriesArray.map((function(e){return e.dataProgress?100*e.dataProgress:0}));return Object(ot.jsx)(Lc,{locale:a,timeSeriesGroup:e,selectedTime:r,selectedTimeRange:i,dataTimeRange:o,selectTime:c,selectTimeRange:s,removeTimeSeriesGroup:l,completed:t,showPointsOnly:u,showErrorBars:d,placeInfos:p,places:m,selectPlace:f},e.id)}));return 0===b.length?null:Object(ot.jsxs)("div",{className:t.chartContainer,children:[Object(ot.jsx)(_c,{selectedTimeRange:i,dataTimeRange:o,selectTimeRange:s}),b]})})),Vc={selectTime:Rn,selectTimeRange:Bn,removeTimeSeriesGroup:function(e){return{type:dn,id:e}},selectPlace:En},Uc=Object(o.b)((function(e){return{locale:e.controlState.locale,timeSeriesGroups:e.dataState.timeSeriesGroups,selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange,dataTimeRange:aa(e),showPointsOnly:e.controlState.showTimeSeriesPointsOnly,showErrorBars:e.controlState.showTimeSeriesErrorBars,placeInfos:fa(e),places:ua(e)}}),Vc)(Fc),Wc=a(1026),Zc=a(1027),Kc=a(1036),Hc=a(1030),qc=a(1028),Jc=a(1029),Yc=a(1002),Qc=a(1032),Xc=a(1033),$c=a(1035),es=a(1031),ts=a(1034),as=a(567),ns=a.n(as),rs=a(563),is=a.n(rs),os=a(566),cs=a.n(os),ss=a(564),ls=a.n(ss),us=a(565),ds=a.n(us),ps=a(562),ms=a.n(ps),fs=a(394),bs=a(396),js=a(581),hs=a.p+"static/media/python-bw.071ec04f.png",gs=Object(Qr.a)((function(e){return Object(jr.a)({card:{maxWidth:"100%",marginBottom:e.spacing(1),marginRight:e.spacing(1)},info:{marginRight:e.spacing(1)},close:{marginLeft:"auto"},table:{},keyValueTableContainer:{background:e.palette.divider},variableHtmlReprContainer:{background:e.palette.divider,padding:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)},media:{height:200},cardContent:{padding:8},code:{fontFamily:"Monospace"}})})),vs=function(e){var t=e.infoCardOpen,a=e.showInfoCard,n=e.visibleInfoCardElements,r=e.setVisibleInfoCardElements,i=e.infoCardElementViewModes,o=e.updateInfoCardElementViewMode,c=e.selectedDataset,s=e.selectedVariable,l=e.selectedPlaceInfo,u=e.selectedTime,d=e.serverConfig,p=e.allowViewModePython,m=gs();if(!t)return null;var f,b,j;if(c){var g="dataset",v=i.dataset,O=n.includes(g);f=Object(ot.jsx)(Os,{isIn:O,viewMode:v,setViewMode:function(e){return o(g,e)},dataset:c,serverConfig:d,hasPython:p})}if(c&&s){var x="variable",y=i.variable,S=n.includes(x);b=Object(ot.jsx)(xs,{isIn:S,viewMode:y,setViewMode:function(e){return o(x,e)},variable:s,time:u,serverConfig:d,hasPython:p})}if(l){var w="place",P=i.place,k=n.includes(w);j=Object(ot.jsx)(ys,{isIn:k,viewMode:P,setViewMode:function(e){return o(w,e)},placeInfo:l})}return Object(ot.jsxs)(Wc.a,{className:m.card,children:[Object(ot.jsxs)(Zc.a,{disableSpacing:!0,children:[Object(ot.jsx)(To.a,{fontSize:"large",className:m.info}),Object(ot.jsxs)(Ki.a,{size:"small",value:n,onChange:function(e,t){r(t)},children:[Object(ot.jsx)(Zi.a,{value:"dataset",disabled:null===c,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Dataset information"),children:Object(ot.jsx)(ms.a,{})})},0),Object(ot.jsx)(Zi.a,{value:"variable",disabled:null===s,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Variable information"),children:Object(ot.jsx)(is.a,{})})},1),Object(ot.jsx)(Zi.a,{value:"place",disabled:null===l,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Place information"),children:Object(ot.jsx)(ls.a,{})})},2)]},0),Object(ot.jsx)(mr.a,{onClick:function(){a(!1)},className:m.close,size:"large",children:Object(ot.jsx)($r.a,{})},1)]}),f,b,j]})},Os=function(e){var t,a=e.isIn,n=e.viewMode,r=e.setViewMode,i=e.dataset,o=e.serverConfig,c=e.hasPython;if("code"===n){var s=Is(i.dimensions,["name","size","dtype"]),l=Is(i,["id","title","bbox","attrs"]);l.dimensions=s,t=Object(ot.jsx)(Cs,{code:JSON.stringify(l,null,2)})}else if("list"===n)t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(ws,{data:Object.getOwnPropertyNames(i.attrs||{}).map((function(e){return[e,i.attrs[e]]}))})});else if("text"===n){var u=[[h.get("Dimension names"),i.dimensions.map((function(e){return e.name})).join(", ")],[h.get("Dimension data types"),i.dimensions.map((function(e){return e.dtype})).join(", ")],[h.get("Dimension lengths"),i.dimensions.map((function(e){return e.size})).join(", ")],[h.get("Geographical extent")+" (x1, y1, x2, y2)",i.bbox.map((function(e){return e+""})).join(", ")],[h.get("Spatial reference system"),i.spatialRef]];t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(ws,{data:u})})}else"python"===n&&(t=Object(ot.jsx)(Ts,{code:Ns(o,i)}));return Object(ot.jsx)(Ss,{title:i.title||"?",subheader:i.title&&"ID: ".concat(i.id),isIn:a,viewMode:n,setViewMode:r,hasPython:c,children:t})},xs=function(e){var t,a,n=e.isIn,r=e.viewMode,i=e.setViewMode,o=e.variable,c=e.time,s=e.serverConfig,l=e.hasPython,u=gs();if("code"===r){var d=Is(o,["id","name","title","units","shape","dtype","shape","timeChunkSize","colorBarMin","colorBarMax","colorBarName","attrs"]);t=Object(ot.jsx)(Cs,{code:JSON.stringify(d,null,2)})}else if("list"===r){if(t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(ws,{data:Object.getOwnPropertyNames(o.attrs||{}).map((function(e){return[e,o.attrs[e]]}))})}),o.htmlRepr){a=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(Ur.a,{ref:function(e){e&&o.htmlRepr&&(e.innerHTML=o.htmlRepr)},className:u.variableHtmlReprContainer})})}}else if("text"===r){var p=[[h.get("Title"),o.title],[h.get("Name"),o.name],[h.get("Units"),o.units],[h.get("Data type"),o.dtype],[h.get("Dimension names"),o.dims.join(", ")],[h.get("Dimension lengths"),o.shape.map((function(e){return e+""})).join(", ")],[h.get("Time chunk size"),o.timeChunkSize]];t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(ws,{data:p})})}else"python"===r&&(t=Object(ot.jsx)(Ts,{code:Es(s,o,c)}));return Object(ot.jsxs)(Ss,{title:o.title||o.name,subheader:"".concat(h.get("Name"),": ").concat(o.name),isIn:n,viewMode:r,setViewMode:i,hasPython:l,children:[a,t]})},ys=function(e){var t,a,n,r=e.isIn,i=e.viewMode,o=e.setViewMode,c=e.placeInfo,s=gs(),l=c.place;if("code"===i)t=Object(ot.jsx)(Cs,{code:JSON.stringify(l,null,2)});else if("list"===i)if(l.properties){var u=Object.getOwnPropertyNames(l.properties).map((function(e){return[e,l.properties[e]]}));t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(ws,{data:u})})}else t=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(pr.a,{children:h.get("There is no information available for this location.")})});else c.image&&c.image.startsWith("http")&&(a=Object(ot.jsx)(qc.a,{className:s.media,image:c.image,title:c.label})),c.description&&(n=Object(ot.jsx)(Ps,{children:Object(ot.jsx)(pr.a,{children:c.description})}));return Object(ot.jsxs)(Ss,{title:c.label,subheader:"".concat(h.get("Geometry type"),": ").concat(h.get(l.geometry.type)),isIn:r,viewMode:i,setViewMode:o,children:[a,n,t]})},Ss=function(e){var t=e.isIn,a=e.title,n=e.subheader,r=e.viewMode,i=e.setViewMode,o=e.hasPython,c=e.children;return Object(ot.jsxs)(Jc.a,{in:t,timeout:"auto",unmountOnExit:!0,children:[Object(ot.jsx)(Hc.a,{title:a,subheader:n,action:Object(ot.jsxs)(Ki.a,{size:"small",value:r,exclusive:!0,onChange:function(e,t){i(t)},children:[Object(ot.jsx)(Zi.a,{value:"text",children:Object(ot.jsx)(ds.a,{})},0),Object(ot.jsx)(Zi.a,{value:"list",children:Object(ot.jsx)(cs.a,{})},1),Object(ot.jsx)(Zi.a,{value:"code",children:Object(ot.jsx)(ns.a,{})},2),o&&Object(ot.jsx)(Zi.a,{value:"python",children:Object(ot.jsx)("img",{src:hs,width:24,alt:"python logo"})},3)]},0)}),c]})},ws=function(e){var t=e.data,a=gs();return Object(ot.jsx)(es.a,{component:Ur.a,className:a.keyValueTableContainer,children:Object(ot.jsx)(Qc.a,{className:a.table,size:"small",children:Object(ot.jsx)(Xc.a,{children:t.map((function(e,t){var a=Object(V.a)(e,2),n=a[0],r=a[1],i=r;return"string"===typeof r&&(r.startsWith("http://")||r.startsWith("https://"))?i=Object(ot.jsx)(Yc.a,{href:r,target:"_blank",rel:"noreferrer",children:r}):Array.isArray(r)&&(i="["+r.map((function(e){return e+""})).join(", ")+"]"),Object(ot.jsxs)(ts.a,{children:[Object(ot.jsx)($c.a,{children:n}),Object(ot.jsx)($c.a,{align:"right",children:i})]},t)}))})})})},Ps=function(e){var t=e.children,a=gs();return Object(ot.jsx)(Kc.a,{className:a.cardContent,children:t})},ks=function(e){var t=e.code,a=e.extension;return Object(ot.jsx)(Ps,{children:Object(ot.jsx)(fs.a,{theme:Ne.instance.branding.themeName||"light",height:"320px",extensions:[a],value:t,readOnly:!0})})},Cs=function(e){var t=e.code;return Object(ot.jsx)(ks,{code:t,extension:Object(bs.a)()})},Ts=function(e){var t=e.code;return Object(ot.jsx)(ks,{code:t,extension:Object(js.a)()})};function Is(e,t){var a,n={},r=Object(u.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;i in e&&(n[i]=e[i])}}catch(o){r.e(o)}finally{r.f()}return n}function Ns(e,t){return["from xcube.core.store import new_data_store","","store = new_data_store(",'    "s3",','    root="datasets",  # can also use "pyramids" here',"    storage_options={",'        "anon": True,','        "client_kwargs": {','            "endpoint_url": "'.concat(e.url,'/s3"'),"        }","    }",")","# list(store.get_data_ids())",'dataset = store.open_data("'.concat(t.id,'.zarr")')].join("\n")}function Es(e,t,a){var n=t.name,r=t.colorBarMin,i=t.colorBarMax,o=t.colorBarName,c="";return null!==a&&(c='.sel(time="'.concat(Fa(a),'", method="nearest")')),["var = dataset.".concat(n).concat(c),"var.plot.imshow(vmin=".concat(r,", vmax=").concat(i,', cmap="').concat(o,'")')].join("\n")}var Ms={showInfoCard:Wn,setVisibleInfoCardElements:function(e){return{type:Zn,visibleElements:e}},updateInfoCardElementViewMode:function(e,t){return{type:Kn,elementType:e,viewMode:t}}},As=Object(o.b)((function(e){return{locale:e.controlState.locale,infoCardOpen:e.controlState.infoCardOpen,visibleInfoCardElements:Na(e),infoCardElementViewModes:Ea(e),selectedDataset:Jt(e),selectedVariable:Qt(e),selectedPlaceInfo:pa(e),selectedTime:Wt(e),serverConfig:Aa(e),allowViewModePython:Ne.instance.branding.allowViewModePython}}),Ms)(vs),zs=a(106),Rs=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;if(Object(p.a)(this,a),(n=t.call(this,e)).lastPosition=null,n.bodyEventListeners=void 0,!e.onChange)throw Error("onChange property must be provided");return n.onMouseDown=n.onMouseDown.bind(Object(zs.a)(n)),n.bodyEventListeners=[["mousemove",n.onBodyMouseMove.bind(Object(zs.a)(n))],["mouseup",n.onBodyMouseUp.bind(Object(zs.a)(n))],["onmouseenter",n.onBodyMouseEnter.bind(Object(zs.a)(n))],["onmouseleave",n.onBodyMouseLeave.bind(Object(zs.a)(n))]],n}return Object(m.a)(a,[{key:"componentWillUnmount",value:function(){this.removeBodyMouseListeners()}},{key:"render",value:function(){return Object(ot.jsx)("div",{className:"hor"===this.props.dir?this.props.classes.hor:this.props.classes.ver,onMouseDown:this.onMouseDown})}},{key:"onMouseDown",value:function(e){this.isButton1Pressed(e)?(this.lastPosition=this.getCurrentPosition(e),this.removeBodyMouseListeners(),this.addBodyMouseListeners()):this.lastPosition=null}},{key:"onBodyMouseMove",value:function(e){if(null!==this.lastPosition&&this.isButton1Pressed(e)){var t=this.getCurrentPosition(e),a=t-this.lastPosition;this.lastPosition=t,0!==a&&this.props.onChange(a)}}},{key:"onBodyMouseUp",value:function(e){this.endDragging()}},{key:"onBodyMouseEnter",value:function(e){this.endDragging()}},{key:"onBodyMouseLeave",value:function(e){this.endDragging()}},{key:"isButton1Pressed",value:function(e){return 0===e.button&&1===e.buttons}},{key:"getCurrentPosition",value:function(e){return"hor"===this.props.dir?e.screenX:e.screenY}},{key:"endDragging",value:function(){this.removeBodyMouseListeners(),this.lastPosition=null}},{key:"addBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.addEventListener(e[0],e[1])}))}},{key:"removeBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.removeEventListener(e[0],e[1])}))}}]),a}(n.PureComponent),Ds=Object(hr.a)((function(e){return Object(jr.a)({hor:{flex:"none",border:"none",outline:"none",width:"8px",minHeight:"100%",maxHeight:"100%",cursor:"col-resize",backgroundColor:"dark"===e.palette.mode?"white":"black",opacity:0},ver:{flex:"none",border:"none",outline:"none",height:"8px",minWidth:"100%",maxWidth:"100%",cursor:"row-resize",backgroundColor:"dark"===e.palette.mode?"white":"black",opacity:0}})}))(Rs),Ls=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleSplitDelta=n.handleSplitDelta.bind(Object(zs.a)(n)),n.state={size:e.initialSize||50},n}return Object(m.a)(a,[{key:"handleSplitDelta",value:function(e){var t=this;this.setState((function(a){var n=a.size,r=n+e;return t.props.onChange&&t.props.onChange(r,n),{size:r}}))}},{key:"render",value:function(){var e,t,a,n,r=this.props.children;if(!r||!Array.isArray(r))return r;if(1===r.length)return r[0];if(r.length>2)throw new Error("SplitPane expects not more than two children");if("hor"===this.props.dir){var i=this.state.size;e=this.props.classes.hor,t=this.props.classes.childVer,a=Object(k.a)({width:i},this.props.child1Style),n=this.props.child2Style}else{var o=this.state.size;e=this.props.classes.ver,t=this.props.classes.childVer,a=Object(k.a)({height:o},this.props.child1Style),n=this.props.child2Style}return Object(ot.jsxs)("div",{id:"SplitPane",className:kr()(e,this.props.className),style:this.props.style,children:[Object(ot.jsx)("div",{id:"SplitPane-Child-1",className:kr()(t,this.props.child1ClassName),style:a,children:r[0]}),Object(ot.jsx)(Ds,{dir:this.props.dir,onChange:this.handleSplitDelta}),Object(ot.jsx)("div",{id:"SplitPane-Child-2",className:kr()(t,this.props.child2ClassName),style:n,children:r[1]})]})}}]),a}(n.PureComponent),Bs=Object(hr.a)((function(e){return Object(jr.a)({hor:{display:"flex",flexFlow:"row nowrap",flex:"auto"},ver:{height:"100%",display:"flex",flexFlow:"column nowrap",flex:"auto"},childHor:{flex:"none"},childVer:{flex:"none"}})}))(Ls),Gs={padding:0},_s=function(){return window.innerWidth/window.innerHeight>=1?"hor":"ver"},Fs=Object(o.b)((function(e){return{hasInfoCard:e.controlState.infoCardOpen&&null!==e.controlState.selectedDatasetId&&e.dataState.datasets.length>0,hasTimeseries:e.dataState.timeSeriesGroups.length>0}}),{})(Object(hr.a)((function(e){return Object(jr.a)({splitPaneHor:{flexGrow:1,overflow:"hidden"},splitPaneVer:{flexGrow:1,overflowX:"hidden",overflowY:"auto"},mapPaneHor:Object(k.a)({height:"100%",overflow:"hidden"},Gs),mapPaneVer:Object(k.a)({width:"100%",overflow:"hidden"},Gs),detailsPaneHor:{flex:"auto",overflowX:"hidden",overflowY:"auto"},detailsPaneVer:{width:"100%",overflow:"hidden"},viewerContainer:{overflow:"hidden",width:"100%",height:"100%"}})}))((function(e){var t=e.classes,a=e.hasInfoCard,r=e.hasTimeseries,i=n.useState(null),o=Object(V.a)(i,2),c=o[0],s=o[1],l=n.useState(_s()),u=Object(V.a)(l,2),d=u[0],p=u[1];n.useEffect((function(){m(),window.onresize=m}),[]);var m=function(){p(_s())};if(a||r){var f="hor"===d?t.splitPaneHor:t.splitPaneVer,b="hor"===d?t.mapPaneHor:t.mapPaneVer,j="hor"===d?t.detailsPaneHor:t.detailsPaneVer;return Object(ot.jsxs)(Bs,{dir:d,initialSize:Math.max(window.innerWidth,window.innerHeight)/2,onChange:function(e){c&&c.updateSize()},className:f,child1ClassName:b,child2ClassName:j,children:[Object(ot.jsx)(Oc,{onMapRef:s}),Object(ot.jsxs)("div",{children:[Object(ot.jsx)(As,{}),Object(ot.jsx)(Uc,{})]})]})}return Object(ot.jsx)("div",{className:t.viewerContainer,children:Object(ot.jsx)(Oc,{onMapRef:s})})}))),Vs=Object(o.b)((function(e){return{locale:e.controlState.locale,hasConsent:e.controlState.privacyNoticeAccepted,compact:Ne.instance.branding.compact}}),{})(Object(hr.a)((function(e){return Object(jr.a)({main:Object(La.a)({padding:0,width:"100vw",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch"},e.breakpoints.up("md"),{overflow:"hidden"})})}))((function(e){var t=e.classes,a=e.hasConsent,n=e.compact;return Object(ot.jsxs)("main",{className:t.main,children:[!n&&Object(ot.jsx)(dr.a,{variant:"dense"}),a&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(zo,{}),Object(ot.jsx)(Fs,{})]})]})}))),Us=a(1037),Ws=a(568),Zs=a.n(Ws),Ks=Object(Qr.a)((function(e){return{icon:{marginRight:e.spacing(2)}}}));var Hs={updateSettings:rr,syncWithServer:bn},qs=Object(o.b)((function(e){return{open:!e.controlState.privacyNoticeAccepted,settings:e.controlState}}),Hs)((function(e){var t=e.open,a=e.settings,r=e.updateSettings,i=e.syncWithServer,o=Object(n.useState)(null),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){var e=h.get("legal/privacy-note.en.md");fetch(e).then((function(e){return e.text()})).then((function(e){return l(e)}))}));var u=Ks();return t?Object(ot.jsxs)(Mr.a,{open:t,disableEscapeKeyDown:!0,keepMounted:!0,scroll:"body",children:[Object(ot.jsx)(Rr.a,{children:h.get("Privacy Notice")}),Object(ot.jsx)(zr.a,{children:Object(ot.jsx)(Us.a,{children:null===s?Object(ot.jsx)(Er.a,{}):Object(ot.jsx)(Yr.a,{children:s,linkTarget:"_blank"})})}),Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsxs)(Nr.a,{onClick:function(){r(Object(k.a)(Object(k.a)({},a),{},{privacyNoticeAccepted:!0})),i()},color:"primary",children:[Object(ot.jsx)(Zs.a,{className:u.icon}),h.get("Accept and continue")]}),Object(ot.jsx)(Nr.a,{onClick:function(){try{window.history.length>0?window.history.back():"function"===typeof window.home?window.home():window.location.href="about:home"}catch(e){console.error(e)}},children:h.get("Leave")})]})]}):null})),Js=Object(hr.a)((function(e){return Object(jr.a)({progress:{margin:e.spacing(2)},message:{margin:e.spacing(1)},contentContainer:{margin:e.spacing(1),textAlign:"center",display:"flex",alignItems:"center",flexDirection:"column"}})}))((function(e){var t=e.classes,a=e.messages;return 0===a.length?null:Object(ot.jsxs)(Mr.a,{open:!0,"aria-labelledby":"loading",children:[Object(ot.jsx)(Rr.a,{id:"loading",children:h.get("Please wait...")}),Object(ot.jsxs)("div",{className:t.contentContainer,children:[Object(ot.jsx)(Er.a,{className:t.progress}),a.map((function(e,a){return Object(ot.jsx)(pr.a,{component:"div",className:t.message,children:e},a)}))]})]})})),Ys=Object(o.b)((function(e){return{locale:e.controlState.locale,messages:Ma(e)}}),{})(Js),Qs=a(1038),Xs=a(1039),$s=a(571),el=a.n($s),tl=a(570),al=a.n(tl),nl=a(569),rl={success:a.n(nl).a,warning:al.a,error:el.a,info:To.a},il={vertical:"bottom",horizontal:"center"},ol=Object(hr.a)((function(e){return Object(jr.a)({close:{padding:e.spacing(.5)},success:{color:e.palette.error.contrastText,backgroundColor:ce.a[600]},error:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.dark},info:{color:e.palette.error.contrastText,backgroundColor:e.palette.primary.dark},warning:{color:e.palette.error.contrastText,backgroundColor:be.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}})}))((function(e){var t=e.classes,a=e.className,n=e.message,r=e.hideMessage,i=function(){r(n.id)};if(!n)return null;var o=rl[n.type];return Object(ot.jsx)(Qs.a,{open:!0,anchorOrigin:il,autoHideDuration:5e3,onClose:i,children:Object(ot.jsx)(Xs.a,{className:kr()(t[n.type],a),"aria-describedby":"client-snackbar",message:Object(ot.jsxs)("span",{id:"client-snackbar",className:t.message,children:[Object(ot.jsx)(o,{className:kr()(t.icon,t.iconVariant)}),n.text]}),action:[Object(ot.jsx)(mr.a,{"aria-label":"Close",color:"inherit",className:t.close,onClick:i,size:"large",children:Object(ot.jsx)($r.a,{className:t.icon})},"close")]})},n.type+":"+n.text)})),cl={hideMessage:function(e){return{type:Za,messageId:e}}},sl=Object(o.b)((function(e){var t=e.messageLogState.newEntries;return{locale:e.controlState.locale,message:t.length>0?t[0]:null}}),cl)(ol),ll=function(e){var t=e.children,a=Ne.instance.authClient;if(!a)return Object(ot.jsx)(ot.Fragment,{children:t});var n=window.location.origin;return Object(ot.jsx)(Bo,{children:Object(ot.jsx)(Tr.AuthProvider,Object(k.a)(Object(k.a)({},a),{},{loadUserInfo:!0,scope:"openid email profile",automaticSilentRenew:!0,redirect_uri:n,post_logout_redirect_uri:n,popup_post_logout_redirect_uri:n,onSigninCallback:function(e){console.info("handleSigninCallback:",e),window.history.replaceState({},document.title,window.location.pathname)},onRemoveUser:function(){console.info("handleRemoveUser"),window.location.pathname="/"},children:t}))})},ul=a(1024),dl=a(572),pl=a.n(dl),ml=a(574),fl=a.n(ml),bl=a(573),jl=a.n(bl),hl=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},textField2:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:400},button:{margin:.1*e.spacing(1)}})}))((function(e){var t=e.classes,a=e.open,r=e.servers,i=e.selectedServer,o=e.closeDialog,c=e.configureServers,s=Object(n.useRef)(!1),l=Object(n.useState)(r),u=Object(V.a)(l,2),d=u[0],p=u[1],m=Object(n.useState)(i),f=Object(V.a)(m,2),b=f[0],j=f[1],g=Object(n.useState)("select"),v=Object(V.a)(g,2),O=v[0],x=v[1];Object(n.useEffect)((function(){s.current&&(p(r),j(i)),s.current=!0}),[r,i]);var y,S,w,P=function(){o("server")},T=function(){var e=b.id;return d.findIndex((function(t){return t.id===e}))},I=function(e,t){var a=Object(C.a)(d);a[e]=t,p(a),j(t),x("select")},N=function(e,t){p(e),j(t),x("select")},E=function(){var e=Object(k.a)(Object(k.a)({},b),{},{id:$()}),t=[].concat(Object(C.a)(d),[e]);N(t,e)},M=function(){I(T(),Object(k.a)({},b))},A=function(){var e=T();I(T(),d[e])},z=function(){var e=Object(C.a)(d);if(e.length<2)throw new Error("internal error: server list cannot be emptied");var t=T(),a=e[t+(t>0?-1:1)];e.splice(t,1),N(e,a)},R=d.map((function(e,t){return Object(ot.jsx)(br.a,{value:e.id,children:e.name},t)}));return y="add"===O?h.get("Add"):"edit"===O?h.get("Save"):h.get("OK"),S="add"===O?h.get("Add Server"):"edit"===O?h.get("Edit Server"):h.get("Select Server"),w="add"===O||"edit"===O?Object(ot.jsxs)(zr.a,{dividers:!0,children:[Object(ot.jsx)(Yi.a,{variant:"standard",required:!0,id:"server-name",label:"Name",className:t.textField,margin:"normal",value:b.name,onChange:function(e){var t=e.target.value,a=Object(k.a)(Object(k.a)({},b),{},{name:t});j(a)}}),Object(ot.jsx)("br",{}),Object(ot.jsx)(Yi.a,{variant:"standard",required:!0,id:"server-url",label:"URL",className:t.textField2,margin:"normal",value:b.url,onChange:function(e){var t=e.target.value,a=Object(k.a)(Object(k.a)({},b),{},{url:t});j(a)}})]}):Object(ot.jsx)(zr.a,{dividers:!0,children:Object(ot.jsxs)("div",{children:[Object(ot.jsxs)(ui.a,{variant:"standard",className:t.formControl,children:[Object(ot.jsx)(Xi.a,{htmlFor:"server-name",children:"Name"}),Object(ot.jsx)(li.a,{variant:"standard",value:b.id,onChange:function(e){var t=e.target.value,a=d.find((function(e){return e.id===t}));j(a)},inputProps:{name:"server-name",id:"server-name"},children:R}),Object(ot.jsx)(ul.a,{children:b.url})]}),Object(ot.jsx)(mr.a,{className:t.button,"aria-label":"Add",color:"primary",onClick:function(){x("add")},size:"large",children:Object(ot.jsx)(pl.a,{fontSize:"small"})}),Object(ot.jsx)(mr.a,{className:t.button,"aria-label":"Edit",onClick:function(){x("edit")},size:"large",children:Object(ot.jsx)(jl.a,{fontSize:"small"})}),Object(ot.jsx)(mr.a,{className:t.button,"aria-label":"Delete",disabled:d.length<2,onClick:function(){z()},size:"large",children:Object(ot.jsx)(fl.a,{fontSize:"small"})})]})}),Object(ot.jsxs)(Mr.a,{open:a,onClose:function(){P()},"aria-labelledby":"server-dialog-title",children:[Object(ot.jsx)(Rr.a,{id:"server-dialog-title",children:S}),w,Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsx)(Nr.a,{onClick:function(){"select"===O?P():A()},children:h.get("Cancel")}),Object(ot.jsx)(Nr.a,{onClick:function(){"select"===O?(o("server"),c(d,b.id)):"add"===O?E():"edit"===O&&M()},autoFocus:!0,color:"primary",children:y})]})]})})),gl={closeDialog:ar,configureServers:function(e,t){return function(a,n){n().controlState.selectedServerId!==t?(a({type:pn}),a(fn(e,t)),a(bn())):n().dataState.userServers!==e&&a(fn(e,t))}}},vl=Object(o.b)((function(e){return{open:!!e.controlState.dialogOpen.server,servers:Et(e),selectedServer:Aa(e)}}),gl)(hl),Ol=a(1040),xl=a(433),yl=Object(Qr.a)((function(e){return{settingsPanelTitle:{marginBottom:e.spacing(1)},settingsPanelPaper:{backgroundColor:("dark"===e.palette.mode?xl.j:xl.c)(e.palette.background.paper,.1),marginBottom:e.spacing(2)},settingsPanelList:{margin:0}}})),Sl=function(e){var t=e.title,a=e.children,n=yl(),i=r.a.Children.count(a),o=[];return r.a.Children.forEach(a,(function(e,t){o.push(e),t<i-1&&o.push(Object(ot.jsx)(Br.a,{variant:"fullWidth",component:"li"},i+t))})),Object(ot.jsxs)(di.a,{children:[t&&""!==t&&Object(ot.jsx)(pr.a,{variant:"body1",className:n.settingsPanelTitle,children:t}),Object(ot.jsx)(Ur.a,{elevation:4,className:n.settingsPanelPaper,children:Object(ot.jsx)(_r.a,{component:"nav",dense:!0,className:n.settingsPanelList,children:o})})]})},wl=a(1006),Pl=function(e){var t,a=e.label,n=e.value,r=e.onClick,i=e.children;n||(t={marginBottom:10});var o,c=Object(ot.jsx)(Vr.a,{primary:a,secondary:n});return i&&(o=Object(ot.jsx)(wl.a,{children:i})),r?Object(ot.jsxs)(Fr.a,{style:t,button:!0,onClick:r,children:[c,o]}):Object(ot.jsxs)(Fr.a,{style:t,children:[c,o]})},kl=function(e){var t=e.propertyName,a=e.settings,n=e.updateSettings,r=e.disabled;return Object(ot.jsx)(yi.a,{checked:!!a[t],onChange:function(){return n(Object(k.a)(Object(k.a)({},a),{},Object(La.a)({},t,!a[t])))},disabled:r})},Cl=a(992),Tl=a(1003),Il=function(e){var t=e.propertyName,a=e.settings,n=e.updateSettings,r=e.options,i=e.disabled;return Object(ot.jsx)(Tl.a,{row:!0,value:a[t],onChange:function(e,r){n(Object(k.a)(Object(k.a)({},a),{},Object(La.a)({},t,r)))},children:r.map((function(e){var t=Object(V.a)(e,2),a=t[0],n=t[1];return Object(ot.jsx)(xi.a,{control:Object(ot.jsx)(Cl.a,{}),value:n,label:a,disabled:i},a)}))})},Nl=Object(Qr.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2},intTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2,width:e.spacing(6)},localeAvatar:{margin:10}}})),El=function(e){var t=e.open,a=e.closeDialog,n=e.settings,i=e.selectedServer,o=e.updateSettings,c=e.changeLocale,s=e.openDialog,l=e.viewerVersion,u=e.serverInfo,d=r.a.useState(null),p=Object(V.a)(d,2),m=p[0],f=p[1],b=r.a.useState(null),j=Object(V.a)(b,2),g=j[0],v=j[1],O=r.a.useState(n.timeChunkSize+""),x=Object(V.a)(O,2),y=x[0],S=x[1],w=Nl();if(r.a.useEffect((function(){var e=parseInt(y);Number.isNaN(e)||e===n.timeChunkSize||o({timeChunkSize:e})}),[y,n,o]),!t)return null;var P=null;Boolean(m)&&(P=Object.getOwnPropertyNames(h.languages).map((function(e){var t=h.languages[e];return Object(ot.jsx)(br.a,{selected:e===n.locale,onClick:function(){return c(e)},children:Object(ot.jsx)(Vr.a,{primary:t})},e)})));var k=null;Boolean(g)&&(k=[],Ct.forEach((function(e,t){k.push(Object(ot.jsx)(Ol.a,{disableSticky:!0,children:e.name},t)),e.datasets.forEach((function(e,a){k.push(Object(ot.jsx)(br.a,{selected:n.baseMapUrl===e.endpoint,onClick:function(){return o({baseMapUrl:e.endpoint})},children:Object(ot.jsx)(Vr.a,{primary:e.name})},t+"."+a))}))})));var C=n.baseMapUrl;return Ct.forEach((function(e){e.datasets.forEach((function(t){t.endpoint===n.baseMapUrl&&(C="".concat(e.name," / ").concat(t.name))}))})),Object(ot.jsxs)("div",{children:[Object(ot.jsxs)(Mr.a,{open:t,fullWidth:!0,maxWidth:"sm",onClose:function(){a("settings")},scroll:"body",children:[Object(ot.jsx)(Rr.a,{children:h.get("Settings")}),Object(ot.jsxs)(zr.a,{children:[Object(ot.jsxs)(Sl,{title:h.get("General"),children:[Object(ot.jsx)(Pl,{label:h.get("Server"),value:i.name,onClick:function(){s("server")}}),Object(ot.jsx)(Pl,{label:h.get("Language"),value:h.languages[n.locale],onClick:function(e){f(e.currentTarget)}}),Object(ot.jsx)(Pl,{label:h.get("Time interval of the player"),children:Object(ot.jsx)(Yi.a,{variant:"standard",select:!0,className:w.textField,value:n.timeAnimationInterval,onChange:function(e){o({timeAnimationInterval:parseInt(e.target.value)})},margin:"normal",children:Lt.map((function(e,t){return Object(ot.jsx)(br.a,{value:e,children:e+" ms"},t)}))})})]}),Object(ot.jsxs)(Sl,{title:h.get("Time-Series"),children:[Object(ot.jsx)(Pl,{label:h.get("Show graph after adding a place"),value:Ml(n.autoShowTimeSeries),children:Object(ot.jsx)(kl,{propertyName:"autoShowTimeSeries",settings:n,updateSettings:o})}),Object(ot.jsx)(Pl,{label:h.get("Show dots only, hide lines"),value:Ml(n.showTimeSeriesPointsOnly),children:Object(ot.jsx)(kl,{propertyName:"showTimeSeriesPointsOnly",settings:n,updateSettings:o})}),Object(ot.jsx)(Pl,{label:h.get("Show error bars"),value:Ml(n.showTimeSeriesErrorBars),children:Object(ot.jsx)(kl,{propertyName:"showTimeSeriesErrorBars",settings:n,updateSettings:o})}),Object(ot.jsx)(Pl,{label:h.get("Show median instead of mean (disables error bars)"),value:Ml(n.showTimeSeriesMedian),children:Object(ot.jsx)(kl,{propertyName:"showTimeSeriesMedian",settings:n,updateSettings:o})}),Object(ot.jsx)(Pl,{label:h.get("Minimal number of data points in a time series update"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:w.intTextField,value:y,onChange:function(e){S(e.target.value)},margin:"normal",size:"small"})})]}),Object(ot.jsxs)(Sl,{title:h.get("Map"),children:[Object(ot.jsx)(Pl,{label:h.get("Base map"),value:C,onClick:function(e){v(e.currentTarget)}}),Object(ot.jsx)(Pl,{label:h.get("Projection"),children:Object(ot.jsx)(Il,{propertyName:"mapProjection",settings:n,updateSettings:o,options:[[h.get("Geographic"),mt],[h.get("Mercator"),ft]]})}),Object(ot.jsx)(Pl,{label:h.get("Image smoothing"),value:Ml(n.imageSmoothingEnabled),children:Object(ot.jsx)(kl,{propertyName:"imageSmoothingEnabled",settings:n,updateSettings:o})}),Object(ot.jsx)(Pl,{label:h.get("Show dataset boundaries"),value:Ml(n.showDatasetBoundaries),children:Object(ot.jsx)(kl,{propertyName:"showDatasetBoundaries",settings:n,updateSettings:o})})]}),Object(ot.jsx)(Sl,{title:h.get("Legal Agreement"),children:Object(ot.jsx)(Nr.a,{onClick:function(){o({privacyNoticeAccepted:!1}),window.location.reload()},children:h.get("Revoke consent")})}),Object(ot.jsxs)(Sl,{title:h.get("System Information"),children:[Object(ot.jsx)(Pl,{label:"xcube Viewer ".concat(h.get("version")),value:l}),Object(ot.jsx)(Pl,{label:"xcube Server ".concat(h.get("version")),value:u?u.version:h.get("Cannot reach server")})]})]})]}),Object(ot.jsx)(fr.a,{anchorEl:m,keepMounted:!0,open:Boolean(m),onClose:function(){f(null)},children:P}),Object(ot.jsx)(fr.a,{anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:function(){v(null)},children:k})]})},Ml=function(e){return e?h.get("On"):h.get("Off")},Al={closeDialog:ar,updateSettings:rr,changeLocale:Xn,openDialog:er},zl=Object(o.b)((function(e){return{locale:e.controlState.locale,open:e.controlState.dialogOpen.settings,settings:e.controlState,selectedServer:Aa(e),viewerVersion:"0.13.0-dev.2",serverInfo:e.dataState.serverInfo}}),Al)(El),Rl=Object(Qr.a)((function(e){return{separatorTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2,maxWidth:"6em"},fileNameTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2}}})),Dl=function(e){var t=e.open,a=e.closeDialog,n=e.settings,r=e.updateSettings,i=e.downloadTimeSeries,o=Rl(),c=function(){a("export")};return Object(ot.jsx)("div",{children:Object(ot.jsxs)(Mr.a,{open:t,fullWidth:!0,maxWidth:"xs",onClose:c,scroll:"body",children:[Object(ot.jsx)(zr.a,{children:Object(ot.jsxs)(Sl,{title:h.get("Export Settings"),children:[Object(ot.jsx)(Pl,{label:h.get("Include time-series data")+" (*.txt)",value:Ll(n.exportTimeSeries),children:Object(ot.jsx)(kl,{propertyName:"exportTimeSeries",settings:n,updateSettings:r})}),Object(ot.jsx)(Pl,{label:h.get("Separator for time-series data"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:o.separatorTextField,value:n.exportTimeSeriesSeparator,onChange:function(e){r({exportTimeSeriesSeparator:e.target.value})},disabled:!n.exportTimeSeries,margin:"normal",size:"small"})}),Object(ot.jsx)(Pl,{label:h.get("Include places data")+" (*.geojson)",value:Ll(n.exportPlaces),children:Object(ot.jsx)(kl,{propertyName:"exportPlaces",settings:n,updateSettings:r})}),Object(ot.jsx)(Pl,{label:h.get("Combine place data in one file"),value:Ll(n.exportPlacesAsCollection),children:Object(ot.jsx)(kl,{propertyName:"exportPlacesAsCollection",settings:n,updateSettings:r,disabled:!n.exportPlaces})}),Object(ot.jsx)(Pl,{label:h.get("As ZIP archive"),value:Ll(n.exportZipArchive),children:Object(ot.jsx)(kl,{propertyName:"exportZipArchive",settings:n,updateSettings:r})}),Object(ot.jsx)(Pl,{label:h.get("File name"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:o.fileNameTextField,value:n.exportFileName,onChange:function(e){r({exportFileName:e.target.value})},margin:"normal",size:"small"})})]})}),Object(ot.jsx)(Ar.a,{children:Object(ot.jsx)(Nr.a,{onClick:function(){c(),i()},color:"primary",disabled:!Bl(n),children:h.get("Download")})})]})})},Ll=function(e){return e?h.get("On"):h.get("Off")},Bl=function(e){return(e.exportTimeSeries||e.exportPlaces)&&(a=e.exportFileName,/^[0-9a-zA-Z_-]+$/.test(a))&&(!e.exportTimeSeries||("TAB"===(t=e.exportTimeSeriesSeparator).toUpperCase()||1===t.length));var t,a},Gl={closeDialog:ar,updateSettings:rr,downloadTimeSeries:function(){return function(e,t){var a=t().controlState,n=a.exportTimeSeries,r=a.exportTimeSeriesSeparator,i=a.exportPlaces,o=a.exportPlacesAsCollection,c=a.exportZipArchive,s=a.exportFileName,l=[];n?(l=[],Tt(t()).forEach((function(e){e.placeGroups&&(l=l.concat(e.placeGroups))})),l.push(Nt(t()))):i&&(l=sa(t()));!function(e,t,a){var n,r,i=a.includeTimeSeries,o=a.separator,c=a.includePlaces,s=a.fileName,l=a.placesAsCollection,d=a.zip;"TAB"===(o=o||"TAB").toUpperCase()&&(o="\t");if(s=s||"export",!i&&!c)return;n=d?new vn("".concat(s,".zip")):new On;if(i){var p=function(e,t){var a,n=new Set,r=new Set,i={},o=Object(u.a)(e);try{for(o.s();!(a=o.n()).done;){var c,s=a.value,l=Object(u.a)(s.timeSeriesArray);try{var d=function(){var e=c.value,t=e.source,a=t.placeId,o=t.datasetId,s=t.variableName,l=t.valueDataKey,u=t.errorDataKey;r.add(a);var d="".concat(o,".").concat(s,".").concat(l);n.add(d);var p=null;Boolean(u)&&(p="".concat(o,".").concat(s,".").concat(u),n.add(p)),e.data.forEach((function(e){var t=Fa(e.time),n=a+"-"+t,r=i[n];i[n]=r?Object(k.a)(Object(k.a)({},r),{},Object(La.a)({},d,e[l])):Object(La.a)({placeId:a,time:t},d,e[l]),null!==p&&(i[n][p]=e[u])}))};for(l.s();!(c=l.n()).done;)d()}catch(b){l.e(b)}finally{l.f()}}}catch(b){o.e(b)}finally{o.f()}var p=["placeId","time"].concat(Array.from(n).sort()),m=[];Object.keys(i).forEach((function(e){var t=i[e],a=new Array(p.length);p.forEach((function(e,n){a[n]=t[e]})),m.push(a)})),m.sort((function(e,t){var a=e[1],n=t[1],r=a.localeCompare(n);if(0!==r)return r;var i=e[0],o=t[0];return i.localeCompare(o)}));var f={};return r.forEach((function(e){f[e]=qe(t,e)})),{colNames:p,dataRows:m,referencedPlaces:f}}(e,t),m=p.colNames,f=p.dataRows,b=p.referencedPlaces,j={number:!0,string:!0},h=m.join(o),g=f.map((function(e){return e.map((function(e){return j[typeof e]?e+"":""})).join(o)})),v=[h].concat(g).join("\n");n.write("".concat(s,".txt"),v),r=b}else r={},t.forEach((function(e){e.features&&e.features.forEach((function(e){r[e.id]=e}))}));if(c)if(l){var O={type:"FeatureCollection",features:Object.keys(r).map((function(e){return r[e]}))};n.write("".concat(s,".geojson"),JSON.stringify(O,null,2))}else Object.keys(r).forEach((function(e){n.write("".concat(e,".geojson"),JSON.stringify(r[e],null,2))}));n.close()}(t().dataState.timeSeriesGroups,l,{includeTimeSeries:n,includePlaces:i,separator:r,placesAsCollection:o,zip:c,fileName:s})}}},_l=Object(o.b)((function(e){return{locale:e.controlState.locale,open:Boolean(e.controlState.dialogOpen.export),settings:e.controlState}}),Gl)(Dl),Fl=a(576),Vl=a.n(Fl),Ul=a(575),Wl=a.n(Ul),Zl=function(e){var t=e.title,a=e.accept,r=e.multiple,i=e.disabled,o=e.onSelect,c=e.className,s=n.useRef(null);return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)("input",{type:"file",accept:a,multiple:r,ref:s,hidden:!0,onChange:function(e){if(null!==e.target.files&&e.target.files.length){for(var t=[],a=0;a<e.target.files.length;a++)t.push(e.target.files[a]);o(t)}},disabled:i}),Object(ot.jsx)(Nr.a,{onClick:function(){null!==s.current&&s.current.click()},disabled:i,className:c,variant:"outlined",size:"small",children:t})]})},Kl=function(e){var t=e.options,a=e.updateOptions,n=e.className;return Object(ot.jsxs)("div",{className:n,children:[Object(ot.jsx)(Yi.a,{label:h.get("Label property names"),value:t.labelNames,onChange:function(e){a({labelNames:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1,marginRight:10}}),Object(ot.jsx)(Yi.a,{label:h.get("Label prefix (used as fallback)"),value:t.labelPrefix,onChange:function(e){a({labelPrefix:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1}})]})},Hl=function(e){var t=e.options,a=e.updateOptions,n=e.optionName,r=e.label;return Object(ot.jsx)(Yi.a,{label:h.get(r),value:t[n],onChange:function(e){return a(Object(La.a)({},n,e.target.value))},size:"small",variant:"standard"})},ql=function(e){var t=e.options,a=e.updateOptions;e.className;return Object(ot.jsxs)("div",{children:[Object(ot.jsxs)("div",{style:{display:"grid",gap:12,paddingTop:12,gridTemplateColumns:"auto auto"},children:[Object(ot.jsx)(Hl,{optionName:"xName",label:"X/longitude column name",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"yName",label:"Y/latitude column name",options:t,updateOptions:a}),Object(ot.jsxs)("span",{children:[Object(ot.jsx)(ki.a,{checked:t.forceGeometry,onChange:function(e){return a({forceGeometry:e.target.checked})},size:"small"}),Object(ot.jsx)("span",{children:"Use geometry column"})]}),Object(ot.jsx)(Hl,{optionName:"geometryName",label:"Geometry column name",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"labelName",label:"Label column name",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"labelPrefix",label:"Label prefix (used as fallback)",options:t,updateOptions:a})]}),Object(ot.jsxs)("div",{style:{display:"grid",gap:12,paddingTop:12,gridTemplateColumns:"auto auto auto"},children:[Object(ot.jsx)(Hl,{optionName:"separator",label:"Separator character",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"comment",label:"Comment character",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"quote",label:"Quote character",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"escape",label:"Escape character",options:t,updateOptions:a}),Object(ot.jsx)("div",{}),Object(ot.jsxs)("span",{children:[Object(ot.jsx)(ki.a,{checked:t.trim,onChange:function(e){return a({trim:e.target.checked})},size:"small"}),Object(ot.jsx)("span",{children:"Remove whitespaces"})]}),Object(ot.jsx)(Hl,{optionName:"nanToken",label:"Not-a-number token",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"trueToken",label:"True token",options:t,updateOptions:a}),Object(ot.jsx)(Hl,{optionName:"falseToken",label:"False token",options:t,updateOptions:a})]})]})},Jl=function(e){var t=e.options,a=e.updateOptions,n=e.className;return Object(ot.jsxs)("div",{className:n,children:[Object(ot.jsx)(Yi.a,{label:h.get("Label"),value:t.label,onChange:function(e){a({label:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1,marginRight:10}}),Object(ot.jsx)(Yi.a,{label:h.get("Label prefix (used as fallback)"),value:t.labelPrefix,onChange:function(e){a({labelPrefix:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1}})]})},Yl=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"].map((function(e){return e.toLowerCase()}));function Ql(e){if(""===(e=e.trim()))return"csv";if("{"===e[0])return"geojson";var t=e.substr(0,20).toLowerCase();return Yl.find((function(e){return t.startsWith(e)&&(t.length===e.length||"\n\t (".indexOf(t[e.length])>=0)}))?"wkt":"csv"}var Xl={csv:Object(k.a)(Object(k.a)({},H),{},{codeExt:[]}),geojson:Object(k.a)(Object(k.a)({},J),{},{codeExt:[Object(bs.a)()]}),wkt:Object(k.a)(Object(k.a)({},Q),{},{codeExt:[]})},$l=Object(Qr.a)((function(e){return{spacer:{flexGrow:1},actionBox:{paddingTop:e.spacing(.5),display:"flex",flexDirection:"row",alignItems:"center"},actionButton:{marginRight:e.spacing(1)},error:{fontSize:"small"}}})),eu=function(e){var t=e.open,a=e.closeDialog,r=e.userPlacesFormatName,i=e.userPlacesFormatOptions,o=e.updateSettings,c=e.addUserPlacesFromText,s=e.nextMapInteraction,l=e.setMapInteraction,u=n.useState(""),d=Object(V.a)(u,2),p=d[0],m=d[1],f=n.useState(null),b=Object(V.a)(f,2),j=b[0],g=b[1],v=n.useState(!1),O=Object(V.a)(v,2),x=O[0],y=O[1],S=n.useState(!1),w=Object(V.a)(S,2),P=w[0],C=w[1],T=n.useState(r),I=Object(V.a)(T,2),N=I[0],E=I[1],M=n.useState(i),A=Object(V.a)(M,2),z=A[0],R=A[1],D=$l();if(n.useEffect((function(){E(r)}),[r]),n.useEffect((function(){R(i)}),[i]),!t)return null;var L,B=function(){l(s),a("addUserPlacesFromText")},G=function(){console.info("PASTE!",p)};return L="csv"===N?Object(ot.jsx)(ql,{options:z.csv,updateOptions:function(e){R(Object(k.a)(Object(k.a)({},z),{},{csv:Object(k.a)(Object(k.a)({},z.csv),e)}))},className:D.actionBox}):"geojson"===N?Object(ot.jsx)(Kl,{options:z.geojson,updateOptions:function(e){R(Object(k.a)(Object(k.a)({},z),{},{geojson:Object(k.a)(Object(k.a)({},z.geojson),e)}))},className:D.actionBox}):Object(ot.jsx)(Jl,{options:z.wkt,updateOptions:function(e){R(Object(k.a)(Object(k.a)({},z),{},{wkt:Object(k.a)(Object(k.a)({},z.wkt),e)}))},className:D.actionBox}),Object(ot.jsxs)(Mr.a,{fullWidth:!0,open:t,onClose:B,"aria-labelledby":"server-dialog-title",children:[Object(ot.jsx)(Rr.a,{id:"server-dialog-title",children:h.get("Add Places")}),Object(ot.jsxs)(zr.a,{dividers:!0,children:[Object(ot.jsxs)(Tl.a,{row:!0,value:N,onChange:function(e){return function(e){E(e.target.value)}(e)},children:[Object(ot.jsx)(xi.a,{value:"csv",label:h.get(H.name),control:Object(ot.jsx)(Cl.a,{})},"csv"),Object(ot.jsx)(xi.a,{value:"geojson",label:h.get(J.name),control:Object(ot.jsx)(Cl.a,{})},"geojson"),Object(ot.jsx)(xi.a,{value:"wkt",label:h.get(Q.name),control:Object(ot.jsx)(Cl.a,{})},"wkt")]}),Object(ot.jsx)(fs.a,{theme:Ne.instance.branding.themeName||"light",placeholder:h.get("Enter text or drag & drop a text file."),autoFocus:!0,height:"400px",extensions:Xl[N].codeExt,value:p,onChange:function(e){var t=N;""===p&&e.length>10&&(t=Ql(e),E(t)),m(e),g(Xl[t].checkError(e))},onDrop:function(){m("")},onPaste:G,onPasteCapture:G}),j&&Object(ot.jsx)(pr.a,{color:"error",className:D.error,children:j}),Object(ot.jsxs)("div",{className:D.actionBox,children:[Object(ot.jsx)(Zl,{title:h.get("From File")+"...",accept:Xl[N].fileExt,multiple:!1,onSelect:function(e){var t=e[0];y(!0);var a=new FileReader;a.onloadend=function(){var e=a.result;E(Ql(e)),m(e),y(!1)},a.onabort=a.onerror=function(){y(!1)},a.readAsText(t,"UTF-8")},disabled:x,className:D.actionButton}),Object(ot.jsx)(Nr.a,{onClick:function(){m("")},disabled:""===p.trim()||x,className:D.actionButton,variant:"outlined",size:"small",children:h.get("Clear")}),Object(ot.jsx)(di.a,{className:D.spacer}),Object(ot.jsx)(Nr.a,{onClick:function(){return C(!P)},endIcon:P?Object(ot.jsx)(Wl.a,{}):Object(ot.jsx)(Vl.a,{}),variant:"outlined",size:"small",children:h.get("Options")})]}),Object(ot.jsx)(Jc.a,{in:P,timeout:"auto",unmountOnExit:!0,children:L})]}),Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsx)(Nr.a,{onClick:B,variant:"text",children:h.get("Cancel")}),Object(ot.jsx)(Nr.a,{onClick:function(){l("Select"),a("addUserPlacesFromText"),o({userPlacesFormatName:N,userPlacesFormatOptions:z}),c(p)},disabled:""===p.trim()||null!==j||x,color:"primary",variant:"text",children:h.get("OK")})]})]})},tu={closeDialog:ar,updateSettings:rr,setMapInteraction:Vn,addUserPlacesFromText:rn},au=Object(o.b)((function(e){return{open:!!e.controlState.dialogOpen.addUserPlacesFromText,userPlacesFormatName:e.controlState.userPlacesFormatName,userPlacesFormatOptions:e.controlState.userPlacesFormatOptions,nextMapInteraction:e.controlState.lastMapInteraction}}),tu)(eu),nu=Object(o.b)((function(e){return{compact:Ne.instance.branding.compact}}),{})((function(e){var t=e.compact;return Object(ot.jsx)(ll,{children:Object(ot.jsx)(cr.a,{injectFirst:!0,children:Object(ot.jsxs)(sr.a,{theme:Object(ir.a)(Object(or.a)({typography:{fontSize:12,htmlFontSize:14},palette:{mode:Ne.instance.branding.themeName,primary:Ne.instance.branding.primaryColor,secondary:Ne.instance.branding.secondaryColor}})),children:[Object(ot.jsx)(lr.a,{}),!t&&Object(ot.jsx)(ii,{}),Object(ot.jsx)(Vs,{}),Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(Ys,{}),Object(ot.jsx)(vl,{}),Object(ot.jsx)(zl,{}),Object(ot.jsx)(_l,{}),Object(ot.jsx)(au,{}),Object(ot.jsx)(qs,{}),Object(ot.jsx)(sl,{})]})]})})})}));function ru(){var e=function(){var e=At(Ne.instance.name);if(e)try{return e.getObjectItem("userServers",[])}catch(t){console.warn("failed to load user servers: ".concat(t))}return[]}(),t=[Object(k.a)({},Ne.instance.server)];return e.forEach((function(e){t.find((function(t){return t.id===e.id}))||t.push(e)})),{serverInfo:null,datasets:[],colorBars:null,timeSeriesGroups:[],userPlaceGroup:{id:"user",title:h.get("My places"),type:"FeatureCollection",features:[]},userServers:t}}function iu(e,t){switch(void 0===e&&(e=ru()),t.type){case Ha:return Object(k.a)(Object(k.a)({},e),{},{serverInfo:t.serverInfo});case Qa:return Object(k.a)(Object(k.a)({},e),{},{datasets:t.datasets});case hn:var a=e.datasets.findIndex((function(e){return e.id===t.datasetId}));if(a>=0){var n=e.datasets[a],r=n.variables.findIndex((function(e){return e.name===t.variableName}));if(r>=0){var i=n.variables[r],o=e.datasets.slice(),c=n.variables.slice();return c[r]=Object(k.a)(Object(k.a)({},i),{},{colorBarMin:t.colorBarMinMax[0],colorBarMax:t.colorBarMinMax[1],colorBarName:t.colorBarName,opacity:t.opacity}),o[a]=Object(k.a)(Object(k.a)({},n),{},{variables:c}),Object(k.a)(Object(k.a)({},e),{},{datasets:o})}}return e;case en:var s=t.placeGroup,l=e.datasets.map((function(e){if(e.placeGroups){var t=e.placeGroups.findIndex((function(e){return e.id===s.id}));if(t>=0){var a=Object(C.a)(e.placeGroups);return a[t]=s,Object(k.a)(Object(k.a)({},e),{},{placeGroups:a})}}return e}));return Object(k.a)(Object(k.a)({},e),{},{datasets:l});case an:var u=t.id,p=t.label,m=t.color,f={type:"Feature",id:u,geometry:t.geometry,properties:{label:p,color:m}},b=[].concat(Object(C.a)(e.userPlaceGroup.features),[f]),j=Object(k.a)(Object(k.a)({},e.userPlaceGroup),{},{features:b});return Object(k.a)(Object(k.a)({},e),{},{userPlaceGroup:j});case nn:var h=t.places,g=t.mapProjection;h.forEach((function(e){return function(e,t){if(Gt.userLayer){var a=Gt.userLayer,n=a.getSource(),r=(new d.a).readFeature(e,{dataProjection:"EPSG:4326",featureProjection:t});Qo(r,(e.properties||{}).color||"red",Ne.instance.branding.polygonFillOpacity),n.addFeature(r),a.changed()}}(e,g)}));var v=[].concat(Object(C.a)(e.userPlaceGroup.features),Object(C.a)(h)),O=Object(k.a)(Object(k.a)({},e.userPlaceGroup),{},{features:v});return Object(k.a)(Object(k.a)({},e),{},{userPlaceGroup:O});case on:var x=t.id,y=e.userPlaceGroup.features.findIndex((function(e){return e.id===x}));if(y>=0){ou([x]);var S=Object(C.a)(e.userPlaceGroup.features);S.splice(y,1);var w=Object(k.a)(Object(k.a)({},e.userPlaceGroup),{},{features:S}),P=su(e.timeSeriesGroups,[x]),T=e.timeSeriesGroups;return P.forEach((function(e){T=cu(T,e,"remove","append")})),Object(k.a)(Object(k.a)({},e),{},{userPlaceGroup:w,timeSeriesGroups:T})}return e;case cn:var I=e.userPlaceGroup.features.map((function(e){return e.id}));ou(I);var N=Object(k.a)(Object(k.a)({},e.userPlaceGroup),{},{features:[]}),E=su(e.timeSeriesGroups,I),M=e.timeSeriesGroups;return E.forEach((function(e){M=cu(M,e,"remove","append")})),Object(k.a)(Object(k.a)({},e),{},{userPlaceGroup:N,timeSeriesGroups:M});case jn:return Object(k.a)(Object(k.a)({},e),{},{colorBars:t.colorBars});case un:var A=t.timeSeries,z=t.updateMode,R=t.dataMode,D=cu(e.timeSeriesGroups,A,z,R);return D!==e.timeSeriesGroups?Object(k.a)(Object(k.a)({},e),{},{timeSeriesGroups:D}):e;case dn:var L=e.timeSeriesGroups.findIndex((function(e){return e.id===t.id}));if(L>=0){var B=Object(C.a)(e.timeSeriesGroups);return B.splice(L,1),Object(k.a)(Object(k.a)({},e),{},{timeSeriesGroups:B})}return e;case pn:return Object(k.a)(Object(k.a)({},e),{},{timeSeriesGroups:[]});case mn:return e.userServers!==t.servers?(function(e){var t=At(Ne.instance.name);if(t)try{t.setObjectItem("userServers",e)}catch(a){console.warn("failed to store user servers: ".concat(a))}}(t.servers),Object(k.a)(Object(k.a)({},e),{},{userServers:t.servers})):e}return e}function ou(e){if(Gt.userLayer){var t=Gt.userLayer.getSource();e.forEach((function(e){var a=t.getFeatureById(e);a&&t.removeFeature(a)}))}}function cu(e,t,a,n){var r,i=t,o=e.findIndex((function(e){return e.variableUnits===i.source.variableUnits}));if(o>=0){var c,s=e[o],l=s.timeSeriesArray,u=l.findIndex((function(e){return e.source.datasetId===i.source.datasetId&&e.source.variableName===i.source.variableName&&e.source.placeId===i.source.placeId}));if(u>=0){var d=l[u];"append"===n&&(i=Object(k.a)(Object(k.a)({},i),{},{data:[].concat(Object(C.a)(i.data),Object(C.a)(d.data))})),"replace"===a?c=[i]:"add"===a?(c=l.slice())[u]=i:(c=l.slice()).splice(u,1)}else c="replace"===a?[i]:"add"===a?[i].concat(Object(C.a)(l)):l;"replace"===a?r=[Object(k.a)(Object(k.a)({},s),{},{timeSeriesArray:c})]:"add"===a||c.length>=0?(r=e.slice())[o]=Object(k.a)(Object(k.a)({},s),{},{timeSeriesArray:c}):(r=e.slice()).splice(o,1)}else{if("replace"===a)r=[{id:$(),variableUnits:i.source.variableUnits,timeSeriesArray:[i]}];else if("add"===a){r=[{id:$(),variableUnits:i.source.variableUnits,timeSeriesArray:[i]}].concat(Object(C.a)(e))}else r=e}return r}function su(e,t){var a=[];return e.forEach((function(e){e.timeSeriesArray.forEach((function(e){t.forEach((function(t){e.source.placeId===t&&a.push(e)}))}))})),a}function lu(e,t,a){switch(void 0===e&&(e=Bt()),t.type){case nr:var n=Object(k.a)(Object(k.a)({},e),t.settings);return Dt(n),n;case Qa:var r=e.selectedDatasetId||Ie.get("dataset"),i=e.selectedVariableName||Ie.get("variable"),o=e.mapInteraction,c=z(t.datasets,r),s=c&&R(c,i)||null;return c?s||(i=c.variables.length?c.variables[0].name:null):(r=null,i=null,(c=t.datasets.length?t.datasets[0]:null)&&(r=c.id,c.variables.length>0&&(i=c.variables[0].name))),r||(o="Select"),Object(k.a)(Object(k.a)({},e),{},{selectedDatasetId:r,selectedVariableName:i,mapInteraction:o});case xn:var l=e.selectedVariableName,u=z(t.datasets,t.selectedDatasetId);!R(u,l)&&u.variables.length>0&&(l=u.variables[0].name);var d=t.selectedDatasetId,p=L(u),m=p?p[1]:null;return Object(k.a)(Object(k.a)({},e),{},{selectedDatasetId:d,selectedVariableName:l,selectedTimeRange:p,selectedTime:m});case kn:var f=Gt[t.mapId],b=t.location;if(f instanceof dt.a&&null!==b){var j,g=f,v=g.getView().getProjection();Array.isArray(b)?(j=Object(Ho.n)(b,mt,v),g.getView().fit(j,{size:g.getSize()})):"Point"===(j=b.transform(mt,v)).getType()?g.getView().setCenter(j.getFirstCoordinate()):g.getView().fit(j,{size:g.getSize()})}return e.flyTo!==t.location?Object(k.a)(Object(k.a)({},e),{},{flyTo:t.location}):e;case Tn:var O=t.selectedPlaceGroupIds;return Object(k.a)(Object(k.a)({},e),{},{selectedPlaceGroupIds:O,selectedPlaceId:null});case Nn:var x=t.selectedPlaceId;return Object(k.a)(Object(k.a)({},e),{},{selectedPlaceId:x});case An:return Object(k.a)(Object(k.a)({},e),{},{selectedVariableName:t.selectedVariableName});case Mn:return Object(k.a)(Object(k.a)({},e),{},{showRgbLayer:t.showRgbLayer});case zn:var y=t.selectedTime;if(null!==y&&a){var S=Oa(a),w=S?kt(S,y):-1;w>=0&&(y=S[w])}return e.selectedTime!==y?Object(k.a)(Object(k.a)({},e),{},{selectedTime:y}):e;case Dn:if(a){var P=xa(a);if(P>=0){var C=Oa(a);(P+=t.increment)<0&&(P=C.length-1),P>C.length-1&&(P=0);var T=C[P],I=e.selectedTimeRange;if(null!==I&&(T<I[0]&&(T=I[0]),T>I[1]&&(T=I[1])),e.selectedTime!==T)return Object(k.a)(Object(k.a)({},e),{},{selectedTime:T})}}return e;case Ln:return Object(k.a)(Object(k.a)({},e),{},{selectedTimeRange:t.selectedTimeRange});case Gn:return Object(k.a)(Object(k.a)({},e),{},{timeSeriesUpdateMode:t.timeSeriesUpdateMode});case _n:return Object(k.a)(Object(k.a)({},e),{},{timeAnimationActive:t.timeAnimationActive,timeAnimationInterval:t.timeAnimationInterval});case an:return t.selectPlace?uu(e,t.id):e;case nn:return t.selectPlace&&t.places.length?uu(e,t.places[0].id):e;case on:var N=t.id,E=t.places;if(N===e.selectedPlaceId){var M=null,A=E.findIndex((function(e){return e.id===N}));return A>=0&&(A<E.length-1?M=E[A+1].id:A>0&&(M=E[A-1].id)),Object(k.a)(Object(k.a)({},e),{},{selectedPlaceId:M})}return e;case Fn:var D=Object(k.a)(Object(k.a)({},e),{},{mapInteraction:t.mapInteraction,lastMapInteraction:e.mapInteraction});return"Geometry"===t.mapInteraction&&(D=Object(k.a)(Object(k.a)({},D),{},{dialogOpen:Object(k.a)(Object(k.a)({},e.dialogOpen),{},{addUserPlacesFromText:!0})})),D;case Un:return Dt(e=Object(k.a)(Object(k.a)({},e),{},{infoCardOpen:t.infoCardOpen})),e;case Zn:var B=Object(k.a)({},e.infoCardElementStates);return Object.getOwnPropertyNames(B).forEach((function(e){B[e]=Object(k.a)(Object(k.a)({},B[e]),{},{visible:t.visibleElements.includes(e)})})),Dt(e=Object(k.a)(Object(k.a)({},e),{},{infoCardElementStates:B})),e;case Kn:return Dt(e=Object(k.a)(Object(k.a)({},e),{},{infoCardElementStates:Object(k.a)(Object(k.a)({},e.infoCardElementStates),{},Object(La.a)({},t.elementType,Object(k.a)(Object(k.a)({},e.infoCardElementStates[t.elementType]),{},{viewMode:t.viewMode})))})),e;case Hn:return Object(k.a)(Object(k.a)({},e),{},{activities:Object(k.a)(Object(k.a)({},e.activities),{},Object(La.a)({},t.id,t.message))});case Jn:var G=Object(k.a)({},e.activities);return delete G[t.id],Object(k.a)(Object(k.a)({},e),{},{activities:G});case Qn:var _=t.locale;return h.locale=_,_!==e.locale&&Dt(e=Object(k.a)(Object(k.a)({},e),{},{locale:_})),e;case $n:var F=t.dialogId;return Object(k.a)(Object(k.a)({},e),{},{dialogOpen:Object(k.a)(Object(k.a)({},e.dialogOpen),{},Object(La.a)({},F,!0))});case tr:var V=t.dialogId;return Object(k.a)(Object(k.a)({},e),{},{dialogOpen:Object(k.a)(Object(k.a)({},e.dialogOpen),{},Object(La.a)({},V,!1))});case mn:if(e.selectedServerId!==t.selectedServerId)return Object(k.a)(Object(k.a)({},e),{},{selectedServerId:t.selectedServerId})}return e}function uu(e,t){var a;return a=e.selectedPlaceGroupIds&&0!==e.selectedPlaceGroupIds.length?e.selectedPlaceGroupIds.find((function(e){return"user"===e}))?e.selectedPlaceGroupIds:[].concat(Object(C.a)(e.selectedPlaceGroupIds),["user"]):["user"],Object(k.a)(Object(k.a)({},e),{},{selectedPlaceGroupIds:a,selectedPlaceId:t})}var du=0;function pu(e,t){void 0===e&&(e={newEntries:[],oldEntries:[]});var a=e.newEntries;switch(t.type){case Ua:var n=t.messageType,r=t.messageText,i=a.length?a[0]:null;return i&&n===i.type&&r===i.text?e:(i={id:++du,type:n,text:r},Object(k.a)(Object(k.a)({},e),{},{newEntries:[i].concat(Object(C.a)(a))}));case Za:var o=a.findIndex((function(e){return e.id===t.messageId}));if(o>=0){var c=a[o],s=Object(C.a)(a);s.splice(o,1);var l=[c].concat(Object(C.a)(e.oldEntries));return Object(k.a)(Object(k.a)({},e),{},{newEntries:s,oldEntries:l})}}return e}function mu(e,t){switch(void 0===e&&(e={accessToken:null}),t.type){case Hr:return Object(k.a)(Object(k.a)({},e),{},{accessToken:t.accessToken})}return e}function fu(e,t){return{dataState:iu(e&&e.dataState,t),controlState:lu(e&&e.controlState,t,e),messageLogState:pu(e&&e.messageLogState,t),userAuthState:mu(e&&e.userAuthState,t)}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Ne.load().then((function(){var e=s.createLogger({collapsed:!0,diff:!1}),t=c.b(fu,c.a(l.a,e));t.dispatch(Xn(t.getState().controlState.locale)),t.getState().controlState.privacyNoticeAccepted&&t.dispatch(bn()),i.render(Object(ot.jsx)(o.a,{store:t,children:Object(ot.jsx)(nu,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}))}},[[878,1,2]]]);
//# sourceMappingURL=main.e0d7476d.chunk.js.map