(this["webpackJsonpxcube-viewer"]=this["webpackJsonpxcube-viewer"]||[]).push([[0],{400:function(e){e.exports=JSON.parse('{"name":"default","server":{"id":"local","name":"Local Server","url":"http://localhost:8080"},"branding":{"appBarTitle":"xcube Viewer","windowTitle":"xcube Viewer","windowIcon":null,"compact":false,"themeName":"light","primaryColor":"blue","secondaryColor":"pink","organisationUrl":"https://xcube.readthedocs.io/","logoImage":"images/logo.png","logoWidth":32,"baseMapUrl":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}","defaultAgg":"mean","polygonFillOpacity":0.2,"mapProjection":"EPSG:3857","allowDownloads":true,"allowRefresh":true,"allowViewModePython":true}}')},511:function(e){e.exports=JSON.parse('{"languages":{"en":"English","de":"Deutsch","se":"Svenska"},"dictionary":[{"en":"OK","de":"OK","se":"OK"},{"en":"Cancel","de":"Abbrechen","se":"Avbryt"},{"en":"Save","de":"Speichern","se":"Spara"},{"en":"Select","de":"Ausw\xe4hlen","se":"V\xe4lj"},{"en":"Add","de":"Hinzuf\xfcgen","se":"L\xe4gg till"},{"en":"Edit","de":"Bearbeiten","se":"Redigera"},{"en":"Remove","de":"Entfernen","se":"Ta bort"},{"en":"Dataset","de":"Datensatz","se":"Dataset"},{"en":"Variable","de":"Variable","se":"Variabel"},{"en":"My places","de":"Meine Orte","se":"Mina platser"},{"en":"Loading places","de":"Lade Orte","se":"Laddar platser"},{"en":"Places","de":"Orte","se":"Platser"},{"en":"Place","de":"Ort","se":"Plats"},{"en":"Time","de":"Zeit","se":"Tid"},{"en":"Missing time axis","de":"Fehlende Zeitachse","se":"Saknar tidsaxel"},{"en":"Geometry type","de":"Geometry-Typ","se":"Geometri typ"},{"en":"Point","de":"Punkt","se":"Punkt"},{"en":"Polygon","de":"Polygon","se":"Polygon"},{"en":"Circle","de":"Kreis","se":"Cirkel"},{"en":"Multi","de":"Multi","se":"Multi"},{"en":"Something went wrong.","de":"Irgendetwas lief schief.","se":"N\xe5got gick fel."},{"en":"Time-Series","de":"Zeitserie","se":"Tidsserier"},{"en":"unknown units","de":"unbekannte Einheiten","se":"ok\xe4nda enheter"},{"en":"Values","de":"Werte","se":"V\xe4rden"},{"en":"Start","de":"Start","se":"Start"},{"en":"Stop","de":"Stopp","se":"Stopp"},{"en":"Please wait...","de":"Bitte warten...","se":"V\xe4nta ..."},{"en":"Loading data","de":"Lade Daten","se":"Laddar data"},{"en":"Connecting to server","de":"Verbindung zum Server wird hergestellt","se":"Ansluta till servern"},{"en":"Cannot reach server","de":"Kann Server nicht erreichen","se":"Kan inte n\xe5 servern"},{"en":"Language","de":"Sprache","se":"Spr\xe5k"},{"en":"Settings","de":"Einstellungen","se":"Inst\xe4llningar"},{"en":"General","de":"Allgemein","se":"Allm\xe4nhet"},{"en":"System Information","de":"Systeminformation","se":"Systeminformation"},{"en":"version","de":"Version","se":"Version"},{"en":"Server","de":"Server","se":"Server"},{"en":"Add Server","de":"Server hinzuf\xfcgen","se":"L\xe4gg till server"},{"en":"Edit Server","de":"Server bearbeiten","se":"Redigera server"},{"en":"Select Server","de":"Server ausw\xe4hlen","se":"V\xe4lj server"},{"en":"On","de":"An","se":"P\xe5"},{"en":"Off","de":"Aus","se":"Av"},{"en":"Time interval of the player","de":"Zeitintervall des Abspielers","se":"Spelarens tidsintervall"},{"en":"Show graph after adding a place","de":"Graph anzeigen, nachdem ein Ort hinzugef\xfcgt wurde","se":"Visa diagram efter att du har lagt till en plats"},{"en":"Show dots only, hide lines","de":"Nur Punkte anzeigen, Linien ausblenden","se":"Visa bara punkter, d\xf6lj linjer"},{"en":"Show error bars","de":"Fehlerbalken anzeigen","se":"Visa felstaplar"},{"en":"Show median instead of mean (disables error bars)","de":"Median statt Mittelwert anzeigen (deaktiviert Fehlerbalken)","se":"Visa median i st\xe4llet f\xf6r medelv\xe4rde (inaktiverar felf\xe4lt)"},{"en":"Minimal number of data points in a time series update","de":"Minimale Anzahl Datenpunkte in einer Zeitreihen-Aktualisierung","se":"Minimalt antal datapunkter i en tidsserieuppdatering"},{"en":"Map","de":"Karte","se":"Karta"},{"en":"Projection","de":"Projektion","se":"Projektion"},{"en":"Geographic","de":"Geografisch","se":"Geografiskt"},{"en":"Mercator","de":"Mercator","se":"Mercator"},{"en":"Image smoothing","de":"Bildgl\xe4ttung","se":"Bildutj\xe4mning"},{"en":"Show dataset boundaries","de":"Datensatzgrenzen anzeigen","se":"Visa dataupps\xe4ttningsgr\xe4nser"},{"en":"Base map","de":"Basiskarte","se":"Grundkarta"},{"en":"Hide small values","de":"Kleine Werte ausblenden","se":"D\xf6lja sm\xe5 v\xe4rden"},{"en":"Reverse","de":"Umkehren","se":"Omv\xe4nt"},{"en":"Opacity","de":"Opazit\xe4t","se":"Opacitet"},{"en":"Dataset information","de":"Informationen zum Datensatz","se":"Information om dataset"},{"en":"Variable information","de":"Informationen zur Variablen","se":"Information om variabeln"},{"en":"Place information","de":"Informationen zum Ort","se":"Platsinformation"},{"en":"Dimension names","de":"Namen der Dimensionen","se":"Dimensioner namn"},{"en":"Dimension data types","de":"Datentypen der Dimensionen","se":"Dimensionsdatatyper"},{"en":"Dimension lengths","de":"L\xe4nge der Dimensionen","se":"M\xe5ttl\xe4ngder"},{"en":"Time chunk size","de":"Zeitblockgr\xf6\xdfe","se":"Tidsblockstorlek"},{"en":"Geographical extent","de":"Geografische Ausdehnung","se":"Geografisk omfattning"},{"en":"Spatial reference system","de":"R\xe4umliches Bezugssystem","se":"Rumsligt referenssystem"},{"en":"Name","de":"Name","se":"Namn"},{"en":"Title","de":"Titel","se":"Titel"},{"en":"Units","de":"Einheiten","se":"Enheter"},{"en":"Data type","de":"Datentyp","se":"Datatyp"},{"en":"There is no information available for this location.","de":"Zu diesem Ort sind keine keine Informationen vorhanden.","se":"Det finns ingen information tillg\xe4nglig f\xf6r den h\xe4r platsen."},{"en":"Log out","de":"Abmelden","se":"Logga ut"},{"en":"Profile","de":"Profil","se":"Profil"},{"en":"User Profile","de":"Nutzerprofil","se":"Anv\xe4ndarprofil"},{"en":"User name","de":"Nutzername","se":"Anv\xe4ndarnamn"},{"en":"E-mail","de":"E-mail","se":"E-post"},{"en":"Nickname","de":"Spitzname","se":"Smeknamn"},{"en":"verified","de":"verifiziert","se":"verified"},{"en":"not verified","de":"nicht verifiziert","se":"inte verifierad"},{"en":"RGB","de":"RGB","se":"RGB"},{"en":"Imprint","de":"Impressum","se":"Avtryck"},{"en":"User Manual","de":"Benutzerhandbuch","se":"Anv\xe4ndarmanual"},{"en":"Show time-series diagram","de":"Zeitserien-Diagramm anzeigen","se":"Visa tidsseriediagram"},{"en":"Help","de":"Hilfe","se":"Hj\xe4lp"},{"en":"Export data","de":"Daten exportieren","se":"Exportera data"},{"en":"Export Settings","de":"Export-Einstellungen","se":"Exportera Inst\xe4llningar"},{"en":"Include time-series data","de":"Zeitseriendaten einschlie\xdfen","se":"Inkludera tidsseriedata"},{"en":"Include places data","de":"Ortsdaten einschlie\xdfen","se":"Inkludera platsdata"},{"en":"File name","de":"Dateiname","se":"Filnamn"},{"en":"Separator for time-series data","de":"Trennzeichen f\xfcr Zeitreihendaten","se":"Separator f\xf6r tidsseriedata"},{"en":"Combine place data in one file","de":"Ortsdaten in einer Datei zusammenfassen","se":"Kombinera platsdata i en fil"},{"en":"As ZIP archive","de":"Als ZIP-Archiv","se":"Som ett ZIP-arkiv"},{"en":"Download","de":"Herunterladen","se":"Ladda ner"},{"en":"Show selected place in map","de":"Ausgew\xe4hlten Ort in der Karte anzeigen","se":"Visa vald plats p\xe5 kartan"},{"en":"Open information panel","de":"Informationsfeld \xf6ffnen","se":"\xd6ppet informationsf\xe4lt"},{"en":"Select a place in map","de":"Ort in der Karte ausw\xe4hlen","se":"V\xe4lj plats p\xe5 kartan"},{"en":"Add a point location in map","de":"Punkt zur Karte hinzuf\xfcgen","se":"L\xe4gg till punkt p\xe5 kartan"},{"en":"Draw a polygon area in map","de":"Polygonale Fl\xe4che in der Karte zeichnen","se":"Rita en polygonal yta p\xe5 kartan"},{"en":"Draw a circular area in map","de":"Kreisf\xf6rmige Fl\xe4che in der Karte zeichnen","se":"Rita ett cirkul\xe4rt omr\xe5de p\xe5 kartan"},{"en":"Remove place","de":"Ort entfernen","se":"Ta bort plats"},{"en":"Remove places","de":"Orte entfernen","se":"Ta bort platser"},{"en":"Show RGB layer instead","de":"Stattdessen RGB-Layer anzeigen","se":"Visa RGB-lager ist\xe4llet"},{"en":"Auto-step through times in the dataset","de":"Zeiten im Datensatz automatisch durchlaufen","se":"K\xf6r automatiskt genom tider i dataposten"},{"en":"Select time in dataset","de":"Datensatz-Zeit ausw\xe4hlen","se":"V\xe4lj tid i dataset"},{"en":"Refresh","de":"Aktualisieren","se":"Att uppdatera"},{"en":"Accept and continue","de":"Akzeptieren und weiter","se":"Acceptera och forts\xe4tt"},{"en":"Leave","de":"Verlassen","se":"L\xe4mna"},{"en":"Import geometry","de":"Import geometry","se":"Importera geometri"},{"en":"Add Places","de":"Orte hinzuf\xfcgen","se":"L\xe4gg till Platser"},{"en":"Text/CSV","de":"Text/CSV","se":"Text/CSV"},{"en":"GeoJSON","de":"GeoJSON","se":"GeoJSON"},{"en":"WKT","de":"WKT","se":"WKT"},{"en":"Enter text or drag & drop a text file.","de":"Text eingeben oder Textdatei per Drag & Drop einf\xfcgen.","se":"Skriv in text eller dra och sl\xe4pp en textfil."},{"en":"From File","de":"Aus Datei","se":"Fr\xe5n fil"},{"en":"Clear","de":"L\xf6schen","se":"T\xf6mma"},{"en":"Options","de":"Optionen","se":"Alternativ"},{"en":"Label","de":"Label","se":"Etikett"},{"en":"Label property names","de":"Eigenschaftsnamen f\xfcr Label","se":"Etikett egendomsnamn"},{"en":"Label prefix (used as fallback)","de":"Label-Pr\xe4fix (als Fallback verwendet)","se":"Etikettprefix (anv\xe4nds som reserv)"},{"en":"X/longitude column name","de":"Spaltenname f\xfcr y/L\xe4ngengrad","se":"X/longitud kolumnnamn"},{"en":"Y/latitude column name","de":"Spaltenname f\xfcr y/Breitengrad","se":"Y/latitud kolumnnamn"},{"en":"Geometry column name","de":"Spaltenname f\xfcr Geometrie","se":"Geometrikolumnnamn"},{"en":"Label column name","de":"Spaltenname f\xfcr Label","se":"Etikettkolumnnamn"},{"en":"Separator character","de":"Trennzeichen","se":"Skiljetecken"},{"en":"Comment character","de":"Kommentar-Zeichen","se":"Kommentar karakt\xe4r"},{"en":"Quote character","de":"Zitierzeichen","se":"Citat karakt\xe4r"},{"en":"Escape character","de":"Escape character","se":"Escape karakt\xe4r"},{"en":"Not-a-number token","de":"Token f\xfcr \'keine Zahl\'","se":"Not-a-number token"},{"en":"True token","de":"Token f\xfcr \'wahr\'","se":"Sann token"},{"en":"False token","de":"Token f\xfcr \'falsch\'","se":"Falsk token"},{"en":"Revoke consent","de":"Zustimmung widerrufen","se":"\xc5terkalla samtycke "},{"en":"Legal Agreement","de":"Rechtliches \xdcbereinkommen","se":"Laglig \xd6verenskommelse"},{"en":"Privacy Notice","de":"Datenschutzhinweis","se":"Sekretessmeddelande"},{"en":"legal/privacy-note.en.md","de":"legal/privacy-note.de.md","se":"legal/privacy-note.se.md"}]}')},516:function(e){e.exports=JSON.parse('[{"name":"OpenStreetMap","link":"https://openstreetmap.org","datasets":[{"name":"OSM Mapnik","endpoint":"https://a.tile.osm.org/{z}/{x}/{y}.png"},{"name":"OSM Humanitarian","endpoint":"https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}],"overlays":[]},{"name":"ESRI","link":"https://services.arcgisonline.com/arcgis/rest/services","datasets":[{"name":"Dark Gray Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"Light Gray Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"World Hillshade","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}"},{"name":"World Ocean Base","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"DeLorme World Base Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Specialty/DeLorme_World_Base_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Street Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Navigation Charts","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Specialty/World_Navigation_Charts/MapServer/tile/{z}/{y}/{x}"},{"name":"National Geographic","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Imagery","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"},{"name":"World Physical Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}"},{"name":"World Shaded Relief","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}"},{"name":"World Terrain","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}"},{"name":"World Topo Map","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}],"overlays":[{"name":"Dark Gray Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"Light Gray Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"World Ocean Reference","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}"},{"name":"World Boundaries & Places","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}"},{"name":"World Reference Overlay","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}"},{"name":"World Transportation","endpoint":"https://services.arcgisonline.com/arcgis/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}"}]},{"name":"CartoDB","link":"https://cartodb.com/basemaps/","datasets":[{"name":"Positron","endpoint":"https://a.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"},{"name":"Dark Matter","endpoint":"https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png"},{"name":"Positron (No Labels)","endpoint":"https://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png"},{"name":"Dark Matter (No Labels)","endpoint":"https://a.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png"}],"overlays":[{"name":"Positron Labels","endpoint":"https://a.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png"},{"name":"Dark Matter Labels","endpoint":"https://a.basemaps.cartocdn.com/dark_only_labels/{z}/{x}/{y}.png"}]}]')},674:function(e,t,n){},678:function(e,t,n){},705:function(e,t){},745:function(e,t,n){},878:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(109),o=n(45),c=n(450),s=n(509),l=n(510),u=(n(674),n(5)),d=n(147),p=n(6),f=n(9),m=function(){function e(t){Object(p.a)(this,e),this._languages=void 0,this._content=void 0,this._locale=void 0;var n=Object.getOwnPropertyNames(t.languages);if(n.findIndex((function(e){return"en"===e}))<0)throw new Error('Internal error: locale "en" must be included in supported languages');var a={};t.dictionary.forEach((function(e,t){n.forEach((function(n){if(!e[n])throw new Error("Internal error: invalid entry at index ".concat(t,' in "./resources/lang.json":')+' missing translation for locale: "'.concat(n,'": ').concat(e))}));var r=b(e.en);a[r]&&console.warn('Translation already defined for "'.concat(e.en,'".')),a[r]=e})),this._languages=t.languages,this._content=a,this._locale="en"}return Object(f.a)(e,[{key:"languages",get:function(){return this._languages}},{key:"locale",get:function(){return this._locale},set:function(e){var t=Object.getOwnPropertyNames(this._languages);if(t.findIndex((function(t){return t===e}))<0){var n=e.split("-")[0];if(t.findIndex((function(e){return e===n}))<0)return void console.error('No translation found for locale "'.concat(e,'", staying with "').concat(this._locale,'".'));console.warn('No translation found for locale "'.concat(e,'", falling back to "').concat(n,'".')),e=n}this._locale=e}},{key:"get",value:function(e,t){var n,a=b(e),r=this._content[a];return r?(n=r[this._locale])||(console.warn('missing translation of phrase "'.concat(e,'" for locale "').concat(this._locale,'"')),n=e):(console.warn('missing translation for phrase "'.concat(e,'"')),n=e),t&&Object.keys(t).forEach((function(e){n=n.replace("${"+e+"}","".concat(t[e]))})),n}}]),e}(),b=function(e){return e.toLowerCase()},j=new m(n(511));j.locale=(navigator.languages&&navigator.languages.length>0?navigator.languages[0]:navigator.language||navigator.userLanguage||navigator.browserLanguage||"en").split("-")[0];var h=j,g=n(26),v=n(27),O=n(219),x=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e,a){var r;return Object(p.a)(this,n),(r=t.call(this,a)).statusCode=void 0,r.statusCode=e,r}return n}(Object(O.a)(Error));function y(e){return e?{headers:[["Authorization","Bearer ".concat(e)]]}:{}}function S(e,t){if(t.length>0){var n=t.map((function(e){return e.map(encodeURIComponent).join("=")})).join("&");return e.includes("?")?e.endsWith("&")?e+n:e+"&"+n:e+"?"+n}return e}function w(e,t){return function(e,t){return fetch(e,t).then((function(e){if(!e.ok)throw new x(e.status,e.statusText);return e})).catch((function(t){throw t instanceof TypeError?(console.error("Server did not respond for ".concat(e,". ")+"May be caused by timeout, refused connection, network error, etc.",t),new Error(h.get("Cannot reach server"))):(console.error(t),t)}))}(e,t).then((function(e){return e.json()}))}function k(e){var t=[],n={};return e.forEach((function(e){var a=e[0],r=e[1],i=[];e[2].forEach((function(e){var t=e[0],a=e[1];i.push(t),n[t]=a})),t.push({title:a,description:r,names:i})})),{groups:t,images:n}}var P=n(7),T=n(23);function C(e){return e.map(I)}function I(e){if(e.dimensions&&e.dimensions.length){var t=e.dimensions,n=t.findIndex((function(e){return"time"===e.name}));if(n>-1){var a=t[n],r=a.coordinates;if(r&&r.length&&"string"===typeof r[0]){var i=r,o=i.map((function(e){return new Date(e).getTime()}));return(t=Object(T.a)(t))[n]=Object(P.a)(Object(P.a)({},a),{},{coordinates:o,labels:i}),Object(P.a)(Object(P.a)({},e),{},{dimensions:t})}}}return e}function E(e,t,n,a){var r=y(a),i=encodeURIComponent(t),o=encodeURIComponent(n);return w("".concat(e,"/datasets/").concat(i,"/places/").concat(o),r)}var N=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(Object(O.a)(Error));function M(e,t){!function(e,t){if(null===e)throw new N("assertion failed: ".concat(t," must not be null"))}(e,t),function(e,t){if("undefined"===typeof e)throw new N("assertion failed: ".concat(t," must not be undefined"))}(e,t)}function A(e,t){if(function(e,t){if(!Array.isArray(e))throw new N("assertion failed: ".concat(t," must be an array"))}(e,t),0===e.length)throw new N("assertion failed: ".concat(t," must be a non-empty array"))}function R(e,t){return t&&e.find((function(e){return e.id===t}))||null}function L(e,t){return t&&e.variables.find((function(e){return e.name===t}))||null}function z(e){M(e,"dataset"),A(e.dimensions,"dataset.dimensions");var t=e.dimensions.find((function(e){return"time"===e.name}));return t?(A(t.coordinates,"timeDimension.coordinates"),A(t.labels,"timeDimension.labels"),t):null}function D(e){var t=z(e);if(!t)return null;var n=t.coordinates;return[n[0],n[n.length-1]]}var B=n(55),G=n(451),_=n(94),F=n(140),V=n(8),U=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(Object(O.a)(Error)),W={separator:",",comment:"#",quote:'"',escape:"\\",trim:!0,nanToken:"NaN",trueToken:"true",falseToken:"false"};function K(e,t){return new Z(t).parse(e)}var Z=function(){function e(t){Object(p.a)(this,e),this.options=void 0,this.options=Object(P.a)(Object(P.a)({},W),t),this.parseLine=this.parseLine.bind(this)}return Object(f.a)(e,[{key:"parse",value:function(e){return this.parseText(e).map(this.parseLine)}},{key:"parseText",value:function(e){var t=this.options,n=t.comment,a=t.trim;return e.split("\n").map((function(e,t){return a&&(e=e.trim()),[e,t]})).filter((function(e){var t=Object(V.a)(e,2),a=t[0];t[1];return""!==a.trim()&&!a.startsWith(n)}))}},{key:"parseLine",value:function(e){for(var t,n,a=Object(V.a)(e,2),r=a[0],i=a[1],o=this.options,c=o.separator,s=o.quote,l=o.escape,u=!1,d=[],p=0,f=0;f<r.length;f++){var m=r[f];m===l?f++:u?m===s&&(u=!1):m===s?u=!0:m===c&&(this.collectValue(r,p,f,d),p=f+1)}if(u)throw t="missing quote character [".concat(this.options.quote,"]"),n=p,new U("line ".concat(i+1,", column ").concat(n+1,": ").concat(t));return this.collectValue(r,p,f,d),d}},{key:"collectValue",value:function(e,t,n,a){var r=e.slice(t,n);a.push(this.parseToken(r))}},{key:"parseToken",value:function(e){var t=this.options;if(t.trim&&(e=e.trim()),""===e)return null;if(e.startsWith(t.quote))e=e.substring(1,e.length-1);else{if(e===t.trueToken)return!0;if(e===t.falseToken)return!1;if(e===t.nanToken)return Number.NaN;var n=parseFloat(e);if(!Number.isNaN(n))return n}return function(e,t){var n=e.indexOf(t);if(n<0)return e;for(var a=0,r="";n<e.length;n++)e[n]===t&&(r+=e.substring(a,n)+e.substring(n+1,n+2),a=n+=2);return r+=e.substring(a,e.length)}(e,t.escape)}}]),e}();var H={name:"Text/CSV",fileExt:".txt,.csv",checkError:function(e){if(""!==e.trim())try{K(e)}catch(t){return console.error(t),"".concat(t)}return null}},J=Object(P.a)(Object(P.a)({},W),{},{xName:"longitude",yName:"latitude",forceGeometry:!1,geometryName:"geometry",labelName:"name",labelPrefix:"CSV-"}),q={name:"GeoJSON",fileExt:".json,.geojson",checkError:function(e){if(""!==e.trim())try{JSON.parse(e)}catch(t){return console.error(t),"".concat(t)}return null}},Y={labelNames:"label, name, title, id",labelPrefix:"GeoJSON-"},Q={name:"WKT",fileExt:".txt,.wkt",checkError:function(e){return null}},X={label:"",labelPrefix:"WKT-"};function $(){return(Math.random().toString(16).substr(2)+"-"+Date.now().toString(16)).toUpperCase()}var ee=n(209),te=n.n(ee),ne=n(512),ae=n(967),re=n(251),ie=n(965),oe=n(249),ce=n(248),se=n(287),le=n(964),ue=n(250),de=n(962),pe=n(959),fe=n(961),me=n(400),be=n(956),je=n(247),he=n(957),ge=n(958),ve=n(960),Oe=n(513),xe=n(963),ye=n(966);var Se=function(){var e=new URL(window.location.href),t=e.pathname.split("/"),n=t.length;return n>0?"index.html"===t[n-1]?new URL(t.slice(0,n-1).join("/"),window.location.origin):new URL(e.pathname,window.location.origin):new URL(window.location.origin)}(),we=Se;function ke(e){for(var t=e,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];for(var i=0,o=a;i<o.length;i++){var c=o[i];""!==c&&(t.endsWith("/")?c.startsWith("/")?t+=c.substr(1):t+=c:c.startsWith("/")?t+=c:t+="/"+c)}return t}console.log("baseUrl = ",Se.href);var Pe={amber:be.a,blue:je.a,blueGrey:he.a,brown:ge.a,cyan:pe.a,deepOrange:ve.a,deepPurple:fe.a,green:ce.a,grey:Oe.a,indigo:de.a,lightBlue:oe.a,lightGreen:xe.a,lime:le.a,orange:se.a,pink:ie.a,purple:ue.a,red:re.a,teal:ye.a,yellow:ae.a};function Te(e,t){var n=e[t];if("string"===typeof n){var a=Pe[n];if(!a)throw new Error("branding.".concat(t,' "').concat(n,'" is invalid'));e[t]=a}}function Ce(e,t){return Te(e=Object(P.a)({},e),"primaryColor"),Te(e,"secondaryColor"),function(e,t,n){var a=e[t];"string"===typeof a&&(e[t]=ke(we.href,n,a))}(e,"logoImage",t),e}var Ie=new URLSearchParams(window.location.search),Ee=function(){function e(t,n,a,r){Object(p.a)(this,e),this.name=void 0,this.server=void 0,this.branding=void 0,this.authClient=void 0,this.name=t,this.server=n,this.branding=a,this.authClient=r}return Object(f.a)(e,null,[{key:"load",value:function(){var t=Object(ne.a)(te.a.mark((function t(){var n,a,r,i,o,c,s,l;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Ie.get("configPath")||"config",r=ke(we.href,n,"config.json"),t.prev=2,t.next=5,fetch(r);case 5:return a=t.sent,t.next=8,a.json();case 8:a=t.sent,t.next=17;break;case 12:t.prev=12,t.t0=t.catch(2),n="",a=me;case 17:return i=a.name||"default",o=a.authClient&&Object(P.a)({},a.authClient),(c=Object(P.a)(Object(P.a)({},me.server),a.server)).id=Ie.get("serverId")||c.id,c.name=Ie.get("serverName")||c.name,c.url=Ie.get("serverUrl")||c.url,s=0!=parseInt(Ie.get("compact")||"0"),l=Ce(Object(P.a)(Object(P.a)(Object(P.a)({},me.branding),a.branding),{},{compact:s||!!a.branding.compact}),n),e._instance=new e(i,c,l,o),l.windowTitle&&this.changeWindowTitle(l.windowTitle),l.windowIcon&&this.changeWindowIcon(l.windowIcon),t.abrupt("return",e._instance);case 30:case"end":return t.stop()}}),t,this,[[2,12]])})));return function(){return t.apply(this,arguments)}}()},{key:"instance",get:function(){return e.assertConfigLoaded(),e._instance}},{key:"assertConfigLoaded",value:function(){if(!e._instance)throw new Error("internal error: configuration not available yet")}},{key:"changeWindowTitle",value:function(e){document.title=e}},{key:"changeWindowIcon",value:function(e){var t=document.querySelector('link[rel="icon"]');null!==t?t.href=e:((t=document.createElement("link")).rel="icon",t.href=e,document.head.appendChild(t))}}]),e}();Ee._instance=void 0;var Ne=[["yellow",ae.a],["red",re.a],["pink",ie.a],["lightBlue",oe.a],["green",ce.a],["orange",se.a],["lime",le.a],["purple",ue.a],["indigo",de.a],["cyan",pe.a],["deepPurple",fe.a]],Me=function(){var e={};return Ne.forEach((function(t){var n=Object(V.a)(t,2),a=n[0],r=n[1];e[a]=r})),e}(),Ae=Ne.map((function(e){var t=Object(V.a)(e,2),n=t[0];t[1];return n}));function Re(e){return Ae[e%Ae.length]}function Le(e,t){var n=function(e){return"light"===e?800:400}(t);return Me[e][n]}var ze={Mapbox:{param:"access_token",token:"pk.eyJ1IjoiZm9ybWFuIiwiYSI6ImNrM2JranV0bDBtenczb2szZG84djh6bWUifQ.q0UKwf4CWt5fcQwIDwF8Bg"}};var De=We(["label","title","name","id"]),Be=We(["description","desc","abstract","comment"]),Ge=We(["color"]),_e=We(["image","img","picture","pic"]);var Fe=Object(B.b)((function(e,t){var n={};return Ve(n,e,t,"label",t.id+"",De),Ve(n,e,t,"color",Re(function(e){var t,n=e.id+"",a=0;if(0===n.length)return a;for(t=0;t<n.length;t++)a=(a<<5)-a+n.charCodeAt(t),a|=0;return a}(t)),Ge),Ve(n,e,t,"image",null,_e),Ve(n,e,t,"description",null,Be),Object(P.a)({placeGroup:e,place:t},n)}));function Ve(e,t,n,a,r,i){var o,c=t.propertyMapping&&t.propertyMapping[a];if(c){if(c.includes("${"))return void(e[a]=function(e,t){var n=t;if(e.properties){var a,r=Object(u.a)(Object.getOwnPropertyNames(e.properties));try{for(r.s();!(a=r.n()).done;){var i=a.value;if(!n.includes("${"))break;var o="${"+i+"}";n.includes(o)&&(n=n.replace(o,"".concat(e.properties[i])))}}catch(c){r.e(c)}finally{r.f()}}return n}(n,c));i.length>0&&i[0]!==c&&(i=[c].concat(Object(T.a)(i)))}n.properties&&(o=Ue(n.properties,i)),void 0===o&&(o=Ue(n,i)),e[a]=o||r}function Ue(e,t){var n,a=Object(u.a)(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r in e)return e[r]}}catch(i){a.e(i)}finally{a.f()}}function We(e){var t,n=[],a=Object(u.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n=n.concat(r.toLowerCase(),r.toUpperCase(),r[0].toUpperCase()+r.substr(1).toLowerCase())}}catch(i){a.e(i)}finally{a.f()}return n}function Ke(e,t){e.forEach((function(e){Ze(e)&&e.features.forEach((function(n){t(e,n)}))}))}function Ze(e){return!!e.features}function He(e,t){if(!t||!Ze(e))return null;var n=e.features.find((function(e){return e.id===t}));if(n)return n;var a=e.placeGroups;if(a)for(var r in a){var i=He(a[r],t);if(i)return i}return null}function Je(e,t){if(t){var n,a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var r=He(n.value,t);if(null!==r)return r}}catch(i){a.e(i)}finally{a.f()}}return null}var qe=0,Ye=0,Qe=0;function Xe(e,t){return{type:"Feature",id:$(),geometry:(new d.a).writeGeometryObject(e),properties:t}}var $e=n(223),et=n(174),tt=n(191),nt=n(159),at=n(141),rt=n(138),it=n(314),ot=n(1);function ct(e){return Object(ot.jsx)(a.Fragment,{children:e.children})}var st=n(395),lt=n(325),ut=n(514),dt=n(322),pt=n(276),ft=(n(677),n(678),"EPSG:4326"),mt="EPSG:3857",bt=mt,jt=a.createContext({mapObjects:{}}),ht={width:"100%",height:"100%"},gt=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e){var a;Object(p.a)(this,n),(a=t.call(this,e)).contextValue=void 0,a.clickEventsKey=null,a.handleClick=function(e){var t=a.props.onClick;t&&t(e)},a.handleDrop=function(e){if(a.props.onDropFiles){e.preventDefault();var t=[];if(e.dataTransfer.items)for(var n=0;n<e.dataTransfer.items.length;n++){var r=e.dataTransfer.items[n];if("file"===r.kind){var i=r.getAsFile();null!==i&&t.push(i)}}else if(e.dataTransfer.files)for(var o=0;o<e.dataTransfer.files.length;o++){var c=e.dataTransfer.files[o];null!==c&&t.push(c)}t.length&&a.props.onDropFiles(t)}},a.handleDragOver=function(e){a.props.onDropFiles&&e.preventDefault()},a.handleRef=function(e){a.contextValue.mapDiv=e},a.handleResize=function(){var e=a.contextValue.mapDiv,t=a.contextValue.map;if(e&&t){t.updateSize();var n=t.getView(),r=a.getMinZoom(e);r!==n.getMinZoom()&&n.setMinZoom(r)}},a.getMinZoom=function(e){var t=e.clientWidth,n=Math.LOG2E*Math.log(t/256);return n>=0?n:0};var r=e.id,i=e.mapObjects;return a.contextValue=i?{map:i[r]||void 0,mapObjects:i}:{mapObjects:{}},a}return Object(f.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.id,t=this.contextValue.mapDiv,n=null;if(this.props.isStale){var a=this.contextValue.mapObjects[e];a instanceof dt.a&&((n=a).setTarget(t),this.clickEventsKey&&n.un("click",this.clickEventsKey.listener))}if(!n){var r=this.getMinZoom(t),i=new pt.a({projection:bt,center:[0,0],minZoom:r,zoom:r});n=new dt.a(Object(P.a)(Object(P.a)({view:i},this.getMapOptions()),{},{target:t}))}this.contextValue.map=n,this.contextValue.mapObjects[e]=n,this.clickEventsKey=n.on("click",this.handleClick),n.updateSize(),this.forceUpdate(),window.addEventListener("resize",this.handleResize);var o=this.props.onMapRef;o&&o(n)}},{key:"componentDidUpdate",value:function(e){var t=this.contextValue.map,n=this.contextValue.mapDiv,a=this.getMapOptions();t.setProperties(Object(P.a)({},a)),t.setTarget(n),t.updateSize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize);var e=this.props.onMapRef;e&&e(null)}},{key:"render",value:function(){var e;return this.contextValue.map&&(e=Object(ot.jsx)(jt.Provider,{value:this.contextValue,children:this.props.children})),Object(ot.jsx)("div",{ref:this.handleRef,style:ht,onDragOver:this.handleDragOver,onDrop:this.handleDrop,children:e})}},{key:"getMapOptions",value:function(){var e=Object(P.a)({},this.props);return delete e.children,delete e.onClick,delete e.onDropFiles,e}}]),n}(a.Component),vt=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).context={},e.object=null,e}return Object(f.a)(n,[{key:"getMapObject",value:function(e){return this.context.mapObjects&&this.context.mapObjects[e]||null}},{key:"getOptions",value:function(){var e=Object(P.a)({},this.props);return delete e.id,e}},{key:"componentDidMount",value:function(){this._updateMapObject(this.addMapObject(this.context.map))}},{key:"componentDidUpdate",value:function(e){this._updateMapObject(this.updateMapObject(this.context.map,this.object,e))}},{key:"componentWillUnmount",value:function(){var e=this.context.map;this.removeMapObject(e,this.object),this.props.id&&delete this.context.mapObjects[this.props.id],this.object=null}},{key:"_updateMapObject",value:function(e){null!=e&&this.props.id&&(e.set("objectId",this.props.id),this.context.mapObjects[this.props.id]=e),this.object=e}},{key:"render",value:function(){return null}}]),n}(a.PureComponent);vt.contextType=jt;var Ot;Ot=function(){};var xt=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"addMapObject",value:function(e){var t=new st.a(this.props);return e.getLayers().push(t),t}},{key:"updateMapObject",value:function(e,t,n){var a=t.getSource(),r=this.props.source;if(r&&a!==r){var i=!0;if(a instanceof lt.a&&r instanceof lt.a){var o=a,c=r;if(function(e,t){if(Ot("tile grid:",e,t),Ot("min zoom:",e.getMinZoom(),t.getMinZoom()),Ot("max zoom:",e.getMaxZoom(),t.getMaxZoom()),e.getMinZoom()!==t.getMinZoom()||e.getMaxZoom()!==t.getMaxZoom())return!1;var n=e.getExtent(),a=t.getExtent();Ot("extent:",n,a);for(var r=0;r<n.length;r++)if(n[r]!==a[r])return!1;var i=e.getResolutions(),o=t.getResolutions();Ot("resolutions:",i,o);var c=i.length;if(c!==o.length)return!1;for(var s=0;s<c;s++){var l=e.getResolution(s),u=t.getResolution(s);if(Ot("resolution ".concat(s,":"),l,u),l!==u)return!1;var d=e.getOrigin(s),p=t.getOrigin(s);Ot("origin ".concat(s,":"),d,p);for(var f=0;f<d.length;f++)if(d[f]!==p[f])return!1;var m=e.getTileSize(s),b=t.getTileSize(s);Ot("tile size ".concat(s,":"),m,b);for(var j=0;j<d.length;j++)if("number"===typeof m&&(m=[m,m]),"number"===typeof b&&(b=[b,b]),m[0]!==b[0]||m[1]!==b[1])return!1;var h=e.getFullTileRange(s),g=t.getFullTileRange(s);if(Ot("tile range ".concat(s,":"),h,g),h&&g){if(h.getWidth()!==g.getWidth()||h.getHeight()!==g.getHeight())return!1}else if(h||g)return!1}return!0}(o.getTileGrid(),c.getTileGrid())){Ot("--\x3e Equal tile grids!");var s=o.getUrls(),l=c.getUrls();s===l||!l||null!==s&&s[0]===l[0]||(o.setUrls(l),i=!1);var u=o.getTileLoadFunction(),d=c.getTileLoadFunction();u!==d&&(o.setTileLoadFunction(d),i=!1);var p=o.getTileUrlFunction(),f=c.getTileUrlFunction();p!==f&&(o.setTileUrlFunction(f),i=!1)}else Ot("--\x3e Tile grids are not equal!")}var m=a.getContextOptions(),b=r.getContextOptions();("object"!==typeof m||m.imageSmoothing)!==("object"!==typeof b||b.imageSmoothing)&&(i=!0),i?(t.setSource(r),Ot("--\x3e Replaced source (expect flickering!)")):Ot("--\x3e Updated source (check, is it still flickering?)")}return this.props.visible&&this.props.visible!==n.visible&&t.setVisible(this.props.visible),this.props.opacity&&this.props.opacity!==n.opacity&&t.setOpacity(this.props.opacity),this.props.zIndex&&this.props.zIndex!==n.zIndex&&t.setZIndex(this.props.zIndex),this.props.minResolution&&this.props.minResolution!==n.minResolution&&t.setMinResolution(this.props.minResolution),this.props.maxResolution&&this.props.maxResolution!==n.maxResolution&&t.setMaxResolution(this.props.maxResolution),t}},{key:"removeMapObject",value:function(e,t){e.getLayers().remove(t)}}]),n}(vt);new et.a({url:"https://a.tiles.mapbox.com/v3/mapbox.natural-earth-2/{z}/{x}/{y}.png",attributions:["&copy; <a href=&quot;https://www.naturalearthdata.com/&quot;>MapBox</a>","&copy; <a href=&quot;https://www.mapbox.com/&quot;>MapBox</a> and contributors"]}),new et.a({url:"https://gis.ngdc.noaa.gov/arcgis/rest/services/web_mercator/gebco_2014_contours/MapServer/tile/{z}/{y}/{x}",attributions:["&copy; <a href=&quot;https://www.gebco.net/data_and_products/gridded_bathymetry_data/&quot;>GEBCO</a>","&copy; <a href=&quot;https://maps.ngdc.noaa.gov/&quot;>NOAHH</a> and contributors"]}),new ut.a,new et.a({url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",attributions:["&copy; <a href=&quot;https://www.openstreetmap.org/copyright&quot;>OpenStreetMap</a> contributors"]});var yt=n(218),St=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"addMapObject",value:function(e){var t=new yt.a(this.props);return e.getLayers().push(t),t}},{key:"updateMapObject",value:function(e,t,n){return this.props.source!==n.source&&this.props.source&&t.setSource(this.props.source),this.props.visible&&this.props.visible!==n.visible&&t.setVisible(this.props.visible),this.props.opacity&&this.props.opacity!==n.opacity&&t.setOpacity(this.props.opacity),this.props.zIndex&&this.props.zIndex!==n.zIndex&&t.setZIndex(this.props.zIndex),this.props.minResolution&&this.props.minResolution!==n.minResolution&&t.setMinResolution(this.props.minResolution),this.props.maxResolution&&this.props.maxResolution!==n.maxResolution&&t.setMaxResolution(this.props.maxResolution),t}},{key:"removeMapObject",value:function(e,t){e.getLayers().remove(t)}}]),n}(vt),wt=n(515),kt=n.n(wt);function Pt(e,t){var n=e.length;if(0===n)return-1;if(1===n)return 0;var a=0,r=n-1;if(t<=e[a])return a;if(t>=e[r])return r;for(var i,o=Math.floor(n/2),c=0;c<n;c++){if(t<(i=e[o])){var s=[Math.floor((a+o)/2),o];o=s[0],r=s[1]}else{if(!(t>i))return o;var l=[o,Math.floor((o+r)/2)];a=l[0],o=l[1]}if(a===o||o===r)return Math.abs(e[a]-t)<=Math.abs(e[r]-t)?a:r}return-1}var Tt=n(516),Ct=function(e){return e.dataState.datasets||[]},It=function(e){return e.dataState.timeSeriesGroups},Et=function(e){return e.dataState.userPlaceGroup},Nt=function(e){return e.dataState.userServers||[]},Mt=Object(B.a)(Ct,Et,(function(e,t){var n={},a=[t];return e.forEach((function(e){e.placeGroups&&e.placeGroups.forEach((function(e){n[e.id]||(n[e.id]=e,a.push(e))}))})),a}));function At(e){return Rt("localStorage",e)}function Rt(e,t){try{var n=window[e],a="__storage_test__";return n.setItem(a,a),n.removeItem(a),new Lt(n,t)}catch(r){return null}}var Lt=function(){function e(t,n){Object(p.a)(this,e),this.nativeStorage=void 0,this.brandingName=void 0,this.nativeStorage=t,this.brandingName=n}return Object(f.a)(e,[{key:"getItem",value:function(e,t,n){var a=this.nativeStorage.getItem(this.makeKey(e));return null!==a?n?n(a):a:t}},{key:"getObjectItem",value:function(e,t){return this.getItem(e,t,(function(e){return JSON.parse(e)}))}},{key:"getBooleanProperty",value:function(e,t,n){this.getProperty(e,t,n,(function(e){return"true"===e}))}},{key:"getIntProperty",value:function(e,t,n){this.getProperty(e,t,n,parseInt)}},{key:"getStringProperty",value:function(e,t,n){this.getProperty(e,t,n,(function(e){return e}))}},{key:"getObjectProperty",value:function(e,t,n){this.getProperty(e,t,n,(function(e){return JSON.parse(e)}))}},{key:"getProperty",value:function(e,t,n,a){t[e]=this.getItem(e,n[e],a)}},{key:"setItem",value:function(e,t,n){if("undefined"===typeof t||null===t)this.nativeStorage.removeItem(this.makeKey(e));else{var a=n?n(t):t+"";this.nativeStorage.setItem(this.makeKey(e),a)}}},{key:"setObjectItem",value:function(e,t){this.setItem(e,t,(function(e){return JSON.stringify(e)}))}},{key:"setPrimitiveProperty",value:function(e,t){this.setItem(e,t[e])}},{key:"setObjectProperty",value:function(e,t){this.setObjectItem(e,t[e])}},{key:"makeKey",value:function(e){return"xcube.".concat(this.brandingName,".").concat(e)}}]),e}();function zt(e){var t=At(Ee.instance.name);if(t)try{t.setPrimitiveProperty("locale",e),t.setPrimitiveProperty("privacyNoticeAccepted",e),t.setPrimitiveProperty("autoShowTimeSeries",e),t.setPrimitiveProperty("showTimeSeriesErrorBars",e),t.setPrimitiveProperty("showTimeSeriesPointsOnly",e),t.setPrimitiveProperty("showTimeSeriesMedian",e),t.setPrimitiveProperty("timeAnimationInterval",e),t.setPrimitiveProperty("timeChunkSize",e),t.setPrimitiveProperty("infoCardOpen",e),t.setObjectProperty("infoCardElementStates",e),t.setPrimitiveProperty("imageSmoothingEnabled",e),t.setPrimitiveProperty("mapProjection",e),t.setPrimitiveProperty("baseMapUrl",e),t.setPrimitiveProperty("exportTimeSeries",e),t.setPrimitiveProperty("exportTimeSeriesSeparator",e),t.setPrimitiveProperty("exportPlaces",e),t.setPrimitiveProperty("exportPlacesAsCollection",e),t.setPrimitiveProperty("exportZipArchive",e),t.setPrimitiveProperty("exportFileName",e),t.setPrimitiveProperty("userPlacesFormatName",e),t.setObjectProperty("userPlacesFormatOptions",e)}catch(n){console.warn("failed to store user settings: ".concat(n))}}var Dt=[250,500,1e3,2500];function Bt(){var e=Ee.instance.branding;return function(e){var t=At(Ee.instance.name);if(t){var n=Object(P.a)({},e);try{t.getStringProperty("locale",n,e),t.getBooleanProperty("privacyNoticeAccepted",n,e),t.getBooleanProperty("autoShowTimeSeries",n,e),t.getBooleanProperty("showTimeSeriesErrorBars",n,e),t.getBooleanProperty("showTimeSeriesPointsOnly",n,e),t.getBooleanProperty("showTimeSeriesMedian",n,e),t.getIntProperty("timeAnimationInterval",n,e),t.getIntProperty("timeChunkSize",n,e),t.getBooleanProperty("infoCardOpen",n,e),t.getObjectProperty("infoCardElementStates",n,e),t.getBooleanProperty("imageSmoothingEnabled",n,e),t.getStringProperty("mapProjection",n,e),t.getStringProperty("baseMapUrl",n,e),t.getBooleanProperty("exportTimeSeries",n,e),t.getStringProperty("exportTimeSeriesSeparator",n,e),t.getBooleanProperty("exportPlaces",n,e),t.getBooleanProperty("exportPlacesAsCollection",n,e),t.getBooleanProperty("exportZipArchive",n,e),t.getStringProperty("exportFileName",n,e),t.getStringProperty("userPlacesFormatName",n,e),t.getObjectProperty("userPlacesFormatOptions",n,e)}catch(a){console.warn("Failed to load user settings: ".concat(a))}return n}return console.warn("User settings not found or access denied"),e}({selectedDatasetId:null,selectedVariableName:null,selectedPlaceGroupIds:["user"],selectedPlaceId:null,selectedUserPlaceId:null,selectedServerId:Ee.instance.server.id,selectedTime:null,selectedTimeRange:null,timeSeriesUpdateMode:"add",timeAnimationActive:!1,timeAnimationInterval:1e3,timeChunkSize:20,autoShowTimeSeries:!0,showTimeSeriesPointsOnly:!1,showTimeSeriesErrorBars:!0,showTimeSeriesMedian:"median"===e.defaultAgg,userPlacesFormatName:"csv",userPlacesFormatOptions:{geojson:Object(P.a)({},Y),csv:Object(P.a)({},J),wkt:Object(P.a)({},X)},flyTo:null,activities:{},locale:"en",dialogOpen:{},privacyNoticeAccepted:!1,mapInteraction:"Point",lastMapInteraction:"Point",showRgbLayer:!1,infoCardOpen:!1,infoCardElementStates:{dataset:{visible:!0,viewMode:"text"},variable:{visible:!0,viewMode:"text"},place:{visible:!0,viewMode:"text"}},mapProjection:e.mapProjection||bt,imageSmoothingEnabled:!1,showDatasetBoundaries:!1,baseMapUrl:e.baseMapUrl||"http://a.tile.osm.org/{z}/{x}/{y}.png",exportTimeSeries:!0,exportTimeSeriesSeparator:"TAB",exportPlaces:!0,exportPlacesAsCollection:!0,exportZipArchive:!0,exportFileName:"export"})}var Gt={},_t=function(e){return e.controlState.selectedDatasetId},Ft=function(e){return e.controlState.selectedVariableName},Vt=function(e){return e.controlState.selectedPlaceGroupIds},Ut=function(e){return e.controlState.selectedPlaceId},Wt=function(e){return e.controlState.selectedTime},Kt=function(e){return e.controlState.timeAnimationActive},Zt=function(e){return e.controlState.imageSmoothingEnabled},Ht=function(e){return e.controlState.infoCardElementStates},Jt=function(e){return e.controlState.mapProjection},qt=Object(B.a)(Ct,_t,R),Yt=Object(B.a)(qt,(function(e){return e&&e.variables||[]})),Qt=Object(B.a)(qt,Ft,(function(e,t){return e&&t&&e.variables.find((function(e){return e.name===t}))||null})),Xt=Object(B.a)(Qt,(function(e){return e&&e.units||"-"})),$t=Object(B.a)(Qt,(function(e){return e?[e.colorBarMin,e.colorBarMax]:[0,1]})),en=Object(B.a)(Qt,(function(e){return e&&e.colorBarName||"viridis"})),tn=Object(B.a)(Qt,(function(e){return e&&"number"==typeof e.opacity?e.opacity:1})),nn=Object(B.a)(qt,(function(e){return null!==e?D(e):null})),an=Object(B.a)(qt,(function(e){return null!==e&&e.rgbSchema||null})),rn=Object(B.a)(qt,(function(e){return e&&e.placeGroups||[]})),on=Object(B.a)(rn,Et,(function(e,t){return t.features&&0!==t.features.length?e.concat([t]):e}));function cn(e,t){var n=[];return null!==t&&t.length>0&&e.forEach((function(e){t.indexOf(e.id)>-1&&n.push(e)})),n}var sn=Object(B.a)(rn,Vt,cn),ln=Object(B.a)(on,Vt,cn),un=Object(B.a)(ln,(function(e){return e.map((function(e){return e.title||e.id})).join(", ")})),dn=Object(B.a)(ln,(function(e){var t,n=e.map((function(e){return Ze(e)?e.features:[]}));return(t=[]).concat.apply(t,Object(T.a)(n))})),pn=Object(B.a)(dn,Ut,(function(e,t){return e.find((function(e){return e.id===t}))||null})),fn=Object(B.a)(ln,Ut,(function(e,t){return 0===e.length||null===t?null:function(e,t){var n,a=Object(u.a)(e);try{var r=function(){var e=n.value;if(Ze(e)){var a=e.features.find((function(n){return t(e,n)}));if(a)return{v:Fe(e,a)}}};for(a.s();!(n=a.n()).done;){var i=r();if("object"===typeof i)return i.v}}catch(o){a.e(o)}finally{a.f()}return null}(e,(function(e,n){return n.id===t}))})),mn=Object(B.a)(It,_t,Ft,Ut,(function(e,t,n,a){if(!t||!n||!a)return!1;var r,i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){var o,c=r.value,s=Object(u.a)(c.timeSeriesArray);try{for(s.s();!(o=s.n()).done;){var l=o.value.source;if(l.datasetId===t&&l.variableName===n&&l.placeId===a)return!1}}catch(d){s.e(d)}finally{s.f()}}}catch(d){i.e(d)}finally{i.f()}return!0})),bn=Object(B.a)(It,on,(function(e,t){var n={};return Ke(t,(function(t,a){var r,i=Object(u.a)(e);try{for(i.s();!(r=i.n()).done;){if(r.value.timeSeriesArray.find((function(e){return e.source.placeId===a.id}))){n[a.id]=Fe(t,a);break}}}catch(o){i.e(o)}finally{i.f()}})),n})),jn=Object(B.a)(ln,(function(e){var t=[];return Ke(e,(function(e,n){t.push(Fe(e,n).label)})),t})),hn=Object(B.a)(qt,Ft,(function(e,t){return e&&L(e,t)||null})),gn=Object(B.a)(hn,(function(e){return e.controlState.timeChunkSize}),(function(e,t){if(e&&e.timeChunkSize){var n=e.timeChunkSize;return n*Math.ceil(t/n)}return t})),vn=Object(B.a)(qt,(function(e){return e&&z(e)||null})),On=Object(B.a)(qt,(function(e){return e&&e.attributions||null})),xn=Object(B.a)(vn,(function(e){return null===e||0===e.coordinates.length?null:e.coordinates})),yn=Object(B.a)(Wt,xn,(function(e,t){return null===e||null===t?-1:Pt(t,e)}));var Sn=kt()((function(e){if(e)return function(t,n){e.getView().getInteracting()?e.once("moveend",(function(){t.getImage().src=n})):t.getImage().src=n}}),{serializer:function(e){var t=e[0];if(t){var n=t.getTarget();return"string"===typeof n?n:n&&n.id||"map"}return""}});function wn(e,t,n,a,r,i,o,c,s,l,u,d){if(null!==c){var p;if(o){var f=Pt(o.coordinates,c);f>-1&&(p=o.labels[f])}p||(p=new Date(c).toISOString()),r=[].concat(Object(T.a)(r),[["time",p]])}"number"===typeof a&&(a+=3);var m=function(e,t,n,a,r,i,o,c,s){return new et.a({url:e,projection:t,tileGrid:n,attributions:a||void 0,transition:r?0:250,imageSmoothing:i,tileLoadFunction:o,maxZoom:s})}(S(t,r),l,function(e,t){if(e!==mt){var n="number"===typeof t?t+1:20;return new it.a({tileSize:[256,256],origin:[-180,90],extent:[-180,-90,180,90],resolutions:Array.from({length:n},(function(e,t){return 180/256/Math.pow(2,t)}))})}}(l,a),u,s,d,Sn(Gt.map),0,a);return Object(ot.jsx)(xt,{id:e,source:m,zIndex:10,opacity:i})}var kn=Object(B.a)(qt,Jt,(function(e){return e.controlState.showDatasetBoundaries}),(function(e,t,n){if(!e||!n)return null;var a=e.geometry;if(!a){if(!e.bbox)return console.warn("Dataset ".concat(e.id," has no bbox!")),null;var r=Object(V.a)(e.bbox,4),i=r[0],o=r[1],c=r[2],s=r[3];a={type:"Polygon",coordinates:[[[i,o],[c,o],[c,s],[i,s],[i,o]]]}}var l=new $e.a({features:new d.a({dataProjection:ft,featureProjection:t}).readFeatures({type:"Feature",geometry:a})}),u=new rt.c({stroke:new at.a({color:"orange",width:3,lineDash:[2,4]})});return Object(ot.jsx)(St,{id:"".concat(e.id,".bbox"),source:l,style:u,zIndex:11,opacity:.5})})),Pn=Object(B.a)(hn,vn,Wt,Kt,Jt,$t,en,tn,On,Zt,(function(e,t,n,a,r,i,o,c,s,l){if(!e)return null;if(!e.tileUrl)return console.warn("Variable ".concat(e.name," has no tileUrl!")),null;var u=[["crs",r],["vmin","".concat(i[0])],["vmax","".concat(i[1])],["cbar",o]];return wn("variable",e.tileUrl,e.tileLevelMin,e.tileLevelMax,u,c,t,n,a,r,s,l)})),Tn=Object(B.a)((function(e){return e.controlState.showRgbLayer}),an,tn,vn,Wt,Kt,Jt,On,Zt,(function(e,t,n,a,r,i,o,c,s){if(!e||!t)return null;var l=[["crs",o]];return wn("rgb",t.tileUrl,t.tileLevelMin,t.tileLevelMax,l,n,a,r,i,o,c,s)}));function Cn(){return new at.a({color:[200,0,0,.75],width:1.25})}function In(){return new nt.a({color:[255,0,0,Ee.instance.branding.polygonFillOpacity||.25]})}var En=Object(B.a)(sn,Jt,(function(e,t){if(0===e.length)return null;var n=[];return e.forEach((function(e,a){Ze(e)&&n.push(Object(ot.jsx)(St,{id:"placeGroup.".concat(e.id),style:new rt.c({image:new tt.a({fill:In(),stroke:Cn(),radius:6}),stroke:Cn(),fill:In()}),zIndex:100,source:new $e.a({features:new d.a({dataProjection:ft,featureProjection:t}).readFeatures(e)})},a))})),Object(ot.jsx)(ct,{children:n})})),Nn=Object(B.a)(Ht,(function(e){var t=[];return Object.getOwnPropertyNames(e).forEach((function(n){e[n].visible&&t.push(n)})),t})),Mn=Object(B.a)(Ht,(function(e){var t={};return Object.getOwnPropertyNames(e).forEach((function(n){t[n]=e[n].viewMode||"text"})),t})),An=Object(B.a)((function(e){return e.controlState.activities}),(function(e){return Object.keys(e).map((function(t){return e[t]}))})),Rn=Object(B.a)(Nt,(function(e){return e.controlState.selectedServerId}),(function(e,t){if(0===e.length)throw new Error("internal error: no servers configured");var n=e.find((function(e){return e.id===t}));if(!n)throw new Error('internal error: server with ID "'.concat(t,'" not found'));return n})),Ln=Object(B.a)((function(e){return e.controlState.baseMapUrl}),(function(e){var t,n=function(e){var t,n=Object(u.a)(Tt);try{for(n.s();!(t=n.n()).done;){var a=t.value,r=a.datasets.find((function(t){return t.endpoint===e}));if(r)return{group:a,dataset:r}}}catch(i){n.e(i)}finally{n.f()}return null}(e);if(n){var a=(t=n.group.name,ze[t]),r=new et.a({url:n.dataset.endpoint+(a?"?".concat(a.param,"=").concat(a.token):""),attributions:["&copy; <a href=&quot;".concat(n.group.link,"&quot;>").concat(n.group.name,"</a>")]});return Object(ot.jsx)(xt,{id:n.group.name+"-"+n.dataset.name,source:r,zIndex:0})}if(e){var i=new et.a({url:e});return Object(ot.jsx)(xt,{id:e,source:i,zIndex:0})}return null}));var zn=n(517),Dn=n.n(zn),Bn=n(4),Gn=-new Date("1970-01-01T00:00:00").getTime();function _n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Date(e+(t?Gn:0))}function Fn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _n(e,t).toISOString().substr(0,10)}function Vn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _n(e,t).toISOString().substr(0,n?16:19).replace("T"," ")}var Un=31536e6;var Wn="POST_MESSAGE";function Kn(e,t){return{type:Wn,messageType:e,messageText:t.message||t+""}}var Zn="HIDE_MESSAGE";var Hn=n(684),Jn="UPDATE_SERVER_INFO";function qn(){return function(e,t){var n,a=Rn(t());e(Ja(Jn,h.get("Connecting to server"))),(n=a.url,w("".concat(n,"/"))).then((function(t){e(function(e){return{type:Jn,serverInfo:e}}(t))})).catch((function(t){e(Kn("error",t))})).then((function(){e(Ya(Jn))}))}}var Yn="UPDATE_RESOURCES";function Qn(){return function(e,t){var n=Rn(t());e(Ja(Yn,h.get("Updating resources"))),function(e,t){var n=S("".concat(e,"/maintenance/update"),[]),a=y(t);try{return w(n,a).then((function(){return!0})).catch((function(e){return console.error(e),!1}))}catch(r){return console.error(r),Promise.resolve(!1)}}(n.url,t().userAuthState.accessToken).then((function(e){e&&window.location.reload()})).finally((function(){return e(Ya(Yn))}))}}var Xn="UPDATE_DATASETS";function $n(){return function(e,t){var n,a,r=Rn(t());e(Ja(Xn,h.get("Loading data"))),(n=r.url,a=t().userAuthState.accessToken,w(S("".concat(n,"/datasets"),[["details","1"]]),y(a)).then((function(e){return e.datasets})).then(C)).then((function(n){if(e(ea(n)),n.length>0){var a=t().controlState.selectedDatasetId||n[0].id;e(ya(a,n,!0))}})).catch((function(t){e(Kn("error",t)),e(ea([]))})).then((function(){e(Ya(Xn))}))}}function ea(e){return{type:Xn,datasets:e}}var ta="UPDATE_DATASET_PLACE_GROUP";function na(e,t){return{type:ta,datasetId:e,placeGroup:t}}var aa="ADD_USER_PLACE";var ra="ADD_USER_PLACES";function ia(e){return function(t,n){var a,r=n().controlState.userPlacesFormatName;try{if("csv"===r){var i=function(e){return e.controlState.userPlacesFormatOptions.csv}(n());a=function(e,t){var n=K(e,t);if(n.length<2)throw new Error(h.get("Missing header line in CSV"));var a,r=Object(u.a)(n[0]);try{for(r.s();!(a=r.n()).done;){var i=a.value;if("string"!==typeof i||""===i)throw new Error(h.get("Invalid header line in CSV"))}}catch(T){r.e(T)}finally{r.f()}var o,c=n[0].map((function(e){return e})),s=c.map((function(e){return e.toLowerCase()})),l=c.length,d=Object(u.a)(n);try{for(d.s();!(o=d.n()).done;)if(o.value.length!==l)throw new Error(h.get("All rows must have same length"))}catch(T){d.e(T)}finally{d.f()}var p=t.labelName.toLowerCase(),f=t.xName.toLowerCase(),m=t.yName.toLowerCase(),b=t.geometryName.toLowerCase(),j=t.forceGeometry,g=s.findIndex((function(e){return e===p})),v=s.findIndex((function(e){return e===f})),O=s.findIndex((function(e){return e===m})),x=s.findIndex((function(e){return e===b}));if(j||v<0||O<0||v===O){if(x<0)throw new Error(h.get("No geometry column(s) found"))}else x=-1;var y=t.labelPrefix.trim();""===y&&(y=J.labelPrefix);for(var S=new G.a,w=[],k=1,P=function(){var t=n[k],a=null;if(x>=0){if("string"===typeof t[x])try{a=S.readGeometry(e)}catch(u){}}else{var r=t[v],i=t[O];"number"===typeof r&&Number.isFinite(r)&&"number"===typeof i&&Number.isFinite(i)&&(a=new _.a([r,i]))}if(null===a)throw new Error(h.get("Invalid geometry in data row ".concat(k)));var o={color:"red"};t.forEach((function(e,t){if(t!==v&&t!==O&&t!==x){var n=c[t];o[n]=e}}));var s=void 0;if(g>=0)s="".concat(t[g]);else{var l=++qe;s="".concat(y).concat(l)}o.label=s,w.push(Xe(a,o))};k<n.length;k++)P();return w}(e,i)}else if("geojson"===r){var o=function(e){return e.controlState.userPlacesFormatOptions.geojson}(n());a=function(e,t){var n=t.labelNames,a=new Set(n.split(",").map((function(e){return e.trim().toLowerCase()})).filter((function(e){return""!==e}))),r=t.labelPrefix.trim();""===r&&(r=Y.labelPrefix);var i,o=new d.a;try{i=o.readFeatures(e)}catch(l){try{var c=o.readGeometry(e);i=[new F.a(c)]}catch(l){throw new Error(h.get("Invalid GeoJSON"))}}var s=[];return i.forEach((function(e){var t=e.getProperties(),n=e.getGeometry();if(n){var i="",o={color:"red"};if(t)for(var c in t){var l=t[c];null!==l&&"number"!==typeof l&&"string"!==typeof l&&"boolean"!==typeof l||(o[c]=l),""===i&&"string"===typeof l&&a.has(c.toLowerCase())&&(i=l)}if(""===i){var u=++Ye;i="".concat(r,"-").concat(u)}o.label=i,s.push(Xe(n,o))}})),s}(e,o)}else if("wkt"===r){var c=function(e){return e.controlState.userPlacesFormatOptions.wkt}(n());a=function(e,t){var n=t.labelPrefix.trim();""===n&&(n=X.labelPrefix);var a=t.label.trim();if(""===a){var r=++Qe;a="".concat(n).concat(r)}try{return[Xe((new G.a).readGeometry(e),{label:a})]}catch(i){throw new Error(h.get("Invalid Geometry WKT"))}}(e,c)}else a=[]}catch(s){t(Kn("error",s)),t(er("addUserPlacesFromText")),a=[]}a.length?(t(function(e,t,n){return{type:ra,places:e,mapProjection:t,selectPlace:n}}(a,Jt(n()),!0)),t(Ia(["user"])),1===a.length&&(t(Na(a[0].id,dn(n()),!0)),n().controlState.autoShowTimeSeries&&t(sa())),t(Kn("info",h.get("Imported ".concat(a.length," place(s)"))))):t(Kn("warning",h.get("No places imported")))}}var oa="REMOVE_USER_PLACE";var ca="REMOVE_ALL_USER_PLACES";function sa(){return function(e,t){var n=Rn(t()),a=_t(t()),r=vn(t()),i=hn(t()),o=Ut(t()),c=pn(t()),s=t().controlState.timeSeriesUpdateMode,l=t().controlState.showTimeSeriesMedian,u=t().controlState.showTimeSeriesErrorBars,d=gn(t()),p=Mt(t());if(a&&i&&o&&r){var f=r.labels,m=f.length,b=m-1,j=b-(d=d>0?d:m)+1,h=function(){var e=j>=0?f[j]:null,r=f[b];return function(e,t,n,a,r,i,o,c,s,l){var u,d=null,p=[];c?(p.push(["aggMethods","median"]),u="median"):s?(p.push(["aggMethods","mean,std"]),u="mean",d="std"):(p.push(["aggMethods","mean"]),u="mean"),i&&p.push(["startDate",i]),o&&p.push(["endDate",o]);var f=encodeURIComponent(t),m=encodeURIComponent(n.name);return w(S("".concat(e,"/timeseries/").concat(f,"/").concat(m),p),Object(P.a)(Object(P.a)({},y(l)),{},{method:"post",body:JSON.stringify(r)})).then((function(e){if(!(e=e.result)||0===e.length)return null;var i=e.map((function(e){return Object(P.a)(Object(P.a)({},e),{},{time:new Date(e.time).getTime()})}));return{source:{datasetId:t,variableName:n.name,variableUnits:n.units||void 0,placeId:a,geometry:r,valueDataKey:u,errorDataKey:d},data:i,color:"green"}}))}(n.url,a,i,c.id,c.geometry,e,r,l,u,t().userAuthState.accessToken)};h().then((function t(n){if(null!==n&&la(p,c.id)){var a=j>0,r=a?(m-j)/m:1;e(function(e,t,n){return{type:ua,timeSeries:e,updateMode:t,dataMode:n}}(Object(P.a)(Object(P.a)({},n),{},{dataProgress:r}),s,b===m-1?"new":"append")),a&&la(p,c.id)&&(j-=d,b-=d,h().then(t))}else e(Kn("info","No data found here"))})).catch((function(t){e(Kn("error",t))}))}}}function la(e,t){return null!==Je(e,t)}var ua="UPDATE_TIME_SERIES";var da="REMOVE_TIME_SERIES_GROUP";var pa="REMOVE_ALL_TIME_SERIES";var fa="CONFIGURE_SERVERS";function ma(e,t){return{type:fa,servers:e,selectedServerId:t}}function ba(){return function(e){e(qn()),e($n()),e((function(e,t){var n,a=Rn(t());(n=a.url,w("".concat(n,"/colorbars")).then(k)).then((function(t){e(function(e){return{type:ja,colorBars:e}}(t))})).catch((function(t){e(Kn("error",t))}))}))}}var ja="UPDATE_COLOR_BARS";var ha="UPDATE_VARIABLE_COLOR_BAR";var ga=function e(){Object(p.a)(this,e)},va=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this)).fileName=void 0,a.zipArchive=void 0,a.fileName=e,a.zipArchive=new Dn.a,a}return Object(f.a)(n,[{key:"write",value:function(e,t){this.zipArchive.file(e,t)}},{key:"close",value:function(){var e=this;this.zipArchive.generateAsync({type:"blob"}).then((function(t){return Hn(t,e.fileName)}))}}]),n}(ga),Oa=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"write",value:function(e,t){var n=new Blob([t],{type:"text/plain;charset=utf-8"});Hn(n,e)}},{key:"close",value:function(){}}]),n}(ga);var xa="SELECT_DATASET";function ya(e,t,n){return function(a){a(function(e,t){return{type:xa,selectedDatasetId:e,datasets:t}}(e,t)),e&&n&&a(Sa(e))}}function Sa(e){return function(t,n){var a=R(Ct(n()),e);a&&a.bbox&&t(Ta(a.bbox))}}var wa=["Point","LineString","LinearRing","Polygon","MultiPoint","MultiLineString","MultiPolygon","Circle"];function ka(e){return function(t,n){var a=Je(ln(n()),e);a&&(a.bbox?t(Ta(a.bbox)):a.geometry&&wa.includes(a.geometry.type)&&t(Ta((new d.a).readGeometry(a.geometry))))}}var Pa="FLY_TO";function Ta(e){return{type:Pa,mapId:"map",location:e}}var Ca="SELECT_PLACE_GROUPS";function Ia(e){return function(t,n){var a=Rn(n());t(function(e){return{type:Ca,selectedPlaceGroupIds:e}}(e));var r=qt(n()),i=sn(n());if(null!==r&&i.length>0){var o,c=Object(u.a)(i);try{for(c.s();!(o=c.n()).done;){var s=o.value;Ze(s)||function(){var e=r.id,i=s.id,o="".concat(ta,"-").concat(e,"-").concat(i);t(Ja(o,h.get("Loading places"))),E(a.url,e,i,n().userAuthState.accessToken).then((function(e){t(na(r.id,e))})).catch((function(e){t(Kn("error",e))})).finally((function(){t(Ya(o))}))}()}}catch(l){c.e(l)}finally{c.f()}}}}var Ea="SELECT_PLACE";function Na(e,t,n){return function(a){a(function(e,t){return{type:Ea,selectedPlaceId:e,places:t}}(e,t)),n&&e&&a(ka(e))}}var Ma="SET_RGB_LAYER_VISIBILITY";var Aa="SELECT_VARIABLE";var Ra="SELECT_TIME";function La(e){return{type:Ra,selectedTime:e}}var za="INC_SELECTED_TIME";var Da="SELECT_TIME_RANGE";function Ba(e){return{type:Da,selectedTimeRange:e}}var Ga="SELECT_TIME_SERIES_UPDATE_MODE";var _a="UPDATE_TIME_ANIMATION";var Fa="SET_MAP_INTERACTION";function Va(e){return{type:Fa,mapInteraction:e}}var Ua="SHOW_INFO_CARD";function Wa(e){return{type:Ua,infoCardOpen:e}}var Ka="SET_VISIBLE_INFO_CARD_ELEMENTS";var Za="UPDATE_INFO_CARD_ELEMENT_VIEW_MODE";var Ha="ADD_ACTIVITY";function Ja(e,t){return{type:Ha,id:e,message:t}}var qa="REMOVE_ACTIVITY";function Ya(e){return{type:qa,id:e}}var Qa="CHANGE_LOCALE";function Xa(e){return{type:Qa,locale:e}}var $a="OPEN_DIALOG";function er(e){return{type:$a,dialogId:e}}var tr="CLOSE_DIALOG";function nr(e){return{type:tr,dialogId:e}}var ar="UPDATE_SETTINGS";function rr(e){return{type:ar,settings:e}}var ir=n(449),or=n(985),cr=n(978),sr=n(1004),lr=n(986),ur=n(1013),dr=n(1014),pr=n(331),fr=n(1007),mr=n(579),br=n(998),jr=n(970),hr=n(1012),gr=n(1015),vr=n(525),Or=n.n(vr),xr=n(384),yr=n.n(xr),Sr=n(383),wr=n.n(Sr),kr=n(46),Pr=n.n(kr),Tr=n(246),Cr=n(372),Ir=n(997),Er=n(999),Nr=n(1011),Mr=n(972),Ar=n(1010),Rr=n(1009),Lr=n(973),zr=n(444),Dr=n.n(zr),Br=n(969),Gr=n(995),_r=n(1005),Fr=n(996),Vr=n(968),Ur=n(586),Wr=function(e){var t=e.userInfo;return Object(ot.jsxs)(Gr.a,{container:!0,justifyContent:"center",spacing:1,children:[Object(ot.jsx)(Gr.a,{item:!0,children:Object(ot.jsx)("img",{src:t.picture,width:84,alt:h.get("User Profile")})}),Object(ot.jsx)(Gr.a,{item:!0,children:Object(ot.jsx)(Ur.a,{elevation:3,children:Object(ot.jsxs)(_r.a,{children:[Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:t.name,secondary:h.get("User name")})}),Object(ot.jsx)(Br.a,{light:!0}),Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:"".concat(t.email," (").concat(t.email_verified?h.get("verified"):h.get("not verified"),")"),secondary:h.get("E-mail")})}),Object(ot.jsx)(Br.a,{light:!0}),Object(ot.jsx)(Fr.a,{children:Object(ot.jsx)(Vr.a,{primary:t.nickname,secondary:h.get("Nickname")})})]})})})]})},Kr=function(e){var t=e.classes,n=e.updateAccessToken,r=Object(Cr.useAuth)(),i=a.useState(null),o=Object(V.a)(i,2),c=o[0],s=o[1],l=a.useState(!1),u=Object(V.a)(l,2),d=u[0],p=u[1];a.useEffect((function(){console.log("User changed:",r.user),r.user&&r.user.access_token?n(r.user.access_token):n(null)}),[r.user,n]);var f=function(){p(!1)},m=function(){s(null)};if(r.user){var b,j=r.user.profile,g=Object(ot.jsx)(Dr.a,{});if(j)if(j.picture)b=Object(ot.jsx)(Ir.a,{className:t.imageAvatar,src:j.picture,alt:j.name});else{var v=j.given_name||j.name||j.nickname,O=j.family_name,x=null;v&&O?x=v[0]+O[0]:v?x=v[0]:O&&(x=O[0]),null!==x&&(g=x.toUpperCase()),b=Object(ot.jsx)(Ir.a,{className:t.letterAvatar,children:g})}else b=Object(ot.jsx)(Ir.a,{className:t.letterAvatar,children:"?"});return Object(ot.jsxs)(a.Fragment,{children:[Object(ot.jsx)(fr.a,{onClick:function(e){s(e.currentTarget)},"aria-controls":"user-menu","aria-haspopup":"true",size:"small",className:t.iconButton,children:b}),Object(ot.jsxs)(mr.a,{id:"user-menu",anchorEl:c,keepMounted:!0,open:Boolean(c),onClose:m,children:[Object(ot.jsx)(br.a,{onClick:function(){m(),p(!0)},children:h.get("Profile")}),Object(ot.jsx)(br.a,{onClick:function(){m(),r.signoutRedirect().then((function(){})).catch((function(e){console.error(e)}))},children:h.get("Log out")})]}),Object(ot.jsxs)(Mr.a,{open:d,TransitionComponent:Tr.a,keepMounted:!0,onClose:f,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(ot.jsx)(Lr.a,{id:"alert-dialog-slide-title",children:h.get("User Profile")}),Object(ot.jsx)(Rr.a,{children:Object(ot.jsx)(Wr,{userInfo:r.user.profile})}),Object(ot.jsx)(Ar.a,{children:Object(ot.jsx)(Er.a,{onClick:f,color:"primary",children:"OK"})})]})]})}var y=Object(ot.jsx)(fr.a,{onClick:r.isLoading?void 0:function(){r.signinRedirect().then((function(){})).catch((function(e){console.error(e)}))},size:"small",children:Object(ot.jsx)(Dr.a,{})});return r.isLoading&&(y=Object(ot.jsxs)("div",{className:t.signInWrapper,children:[y,Object(ot.jsx)(Nr.a,{size:24,className:t.signInProgress})]})),y},Zr=Object(hr.a)((function(e){return Object(jr.a)({imageAvatar:{width:32,height:32,color:"#fff",backgroundColor:ve.a[300]},letterAvatar:{width:32,height:32,color:"#fff",backgroundColor:ve.a[300]},signInWrapper:{margin:e.spacing(1),position:"relative"},signInProgress:{color:ve.a[300],position:"absolute",top:"50%",left:"50%",zIndex:1,marginTop:-12,marginLeft:-12},iconButton:{padding:0}})}))((function(e){return Ee.instance.authClient?Object(ot.jsx)(Kr,Object(P.a)({},e)):null})),Hr="UPDATE_ACCESS_TOKEN";var Jr={updateAccessToken:function(e){return function(t,n){var a=n().userAuthState.accessToken;a!==e&&(t(function(e){return{type:Hr,accessToken:e}}(e)),null!==e&&null!==a||t($n()))}}},qr=Object(o.b)((function(e){return{}}),Jr)(Zr),Yr=n(987),Qr=n(989),Xr=n(216),$r=n.n(Xr),ei=n(974),ti=Object(Qr.a)((function(e){return Object(jr.a)({dialog:{backgroundColor:e.palette.grey[600]},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},text:{marginTop:e.spacing(4),marginLeft:e.spacing(40),marginRight:e.spacing(40)}})})),ni=r.a.forwardRef((function(e,t){return Object(ot.jsx)(ei.a,Object(P.a)({direction:"up",ref:t},e))})),ai=function(e){var t=e.title,n=e.href,r=e.open,i=e.onClose,o=Object(a.useState)(""),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(a.useEffect)((function(){fetch(n).then((function(e){return e.text()})).then((function(e){return l(e)}))}));var u=ti();return Object(ot.jsxs)(Mr.a,{fullScreen:!0,open:r,onClose:i,TransitionComponent:ni,children:[Object(ot.jsx)(ur.a,{className:u.appBar,children:Object(ot.jsxs)(dr.a,{children:[Object(ot.jsx)(fr.a,{edge:"start",color:"inherit",onClick:i,"aria-label":"close",size:"large",children:Object(ot.jsx)($r.a,{})}),Object(ot.jsx)(pr.a,{variant:"h6",className:u.title,children:t})]})}),Object(ot.jsx)(Rr.a,{className:u.dialog,children:Object(ot.jsx)("div",{className:u.text,children:Object(ot.jsx)(Yr.a,{children:s,linkTarget:"_blank"})})})]})},ri={openDialog:er,updateResources:Qn},ii=Object(o.b)((function(e){return{locale:e.controlState.locale,appName:Ee.instance.branding.appBarTitle,allowRefresh:Ee.instance.branding.allowRefresh}}),ri)(Object(hr.a)((function(e){return Object(jr.a)({toolbar:{backgroundColor:Ee.instance.branding.headerBackgroundColor,paddingRight:e.spacing(1)},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},logoAnchor:{display:"flex",alignItems:"center"},logo:{marginLeft:e.spacing(1)},title:Object(P.a)({flexGrow:1,marginLeft:e.spacing(1)},Ee.instance.branding.headerTitleStyle),imageAvatar:{width:24,height:24,color:"#fff",backgroundColor:ve.a[300]},letterAvatar:{width:24,height:24,color:"#fff",backgroundColor:ve.a[300]},signInWrapper:{margin:e.spacing(1),position:"relative"},signInProgress:{color:ve.a[300],position:"absolute",top:"50%",left:"50%",zIndex:1,marginTop:-12,marginLeft:-12},iconButton:Object(P.a)({marginLeft:e.spacing(2)},Ee.instance.branding.headerIconStyle)})}))((function(e){var t=e.classes,n=e.appName,r=e.openDialog,i=e.allowRefresh,o=e.updateResources,c=a.useState(null),s=Object(V.a)(c,2),l=s[0],u=s[1],d=a.useState(!1),p=Object(V.a)(d,2),f=p[0],m=p[1],b=a.useState(!1),j=Object(V.a)(b,2),g=j[0],v=j[1],O=function(){u(null)};return Object(ot.jsxs)(ur.a,{position:"absolute",className:Pr()(t.appBar),children:[Object(ot.jsxs)(dr.a,{disableGutters:!0,className:t.toolbar,variant:"dense",children:[Object(ot.jsx)("a",{href:Ee.instance.branding.organisationUrl||"",target:"_blank",rel:"noreferrer",className:t.logoAnchor,children:Object(ot.jsx)("img",{src:Ee.instance.branding.logoImage,width:Ee.instance.branding.logoWidth,alt:"xcube logo",className:t.logo})}),Object(ot.jsx)(pr.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title,children:n}),Object(ot.jsx)(qr,{}),i&&Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Refresh"),children:Object(ot.jsx)(fr.a,{onClick:o,size:"small",className:t.iconButton,children:Object(ot.jsx)(wr.a,{})})}),Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Help"),children:Object(ot.jsx)(fr.a,{onClick:function(e){u(e.currentTarget)},size:"small",className:t.iconButton,children:Object(ot.jsx)(Or.a,{})})}),Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Settings"),children:Object(ot.jsx)(fr.a,{onClick:function(){r("settings")},size:"small",className:t.iconButton,children:Object(ot.jsx)(yr.a,{})})})]}),Object(ot.jsxs)(mr.a,{id:"simple-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:O,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[Object(ot.jsx)(br.a,{onClick:function(){O(),v(!0)},children:h.get("User Manual")}),Object(ot.jsx)(br.a,{onClick:function(){O(),m(!0)},children:h.get("Imprint")})]}),Object(ot.jsx)(ai,{title:h.get("User Manual"),href:"manual.md",open:g,onClose:function(){v(!1)}}),Object(ot.jsx)(ai,{title:h.get("Imprint"),href:"imprint.md",open:f,onClose:function(){m(!1)}})]})}))),oi=Object(hr.a)((function(e){return Object(jr.a)({form:{display:"flex",flexWrap:"wrap",paddingTop:e.spacing(1),paddingLeft:e.spacing(1),paddingRight:e.spacing(1),flexGrow:0}})}))((function(e){var t=e.classes,n=e.children;return Object(ot.jsx)("form",{className:t.form,autoComplete:"off",children:n})})),ci=n(1018),si=n(1017),li=n(991),ui=n(1016),di=n(976),pi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(1)}})}))((function(e){var t=e.classes,n=e.label,a=e.control,r=e.actions;return Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[n,a,r]})})})),fi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(2),marginBottom:e.spacing(1),minWidth:120},selectEmpty:{}})}))((function(e){var t=e.classes,n=e.selectedDatasetId,a=e.datasets,r=e.selectDataset;n=n||"",a=a||[];var i=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"dataset-select",children:h.get("Dataset")}),o=Object(ot.jsx)(li.a,{variant:"standard",value:n,onChange:function(e){var t=e.target.value||null;r(t,a,!0)},input:Object(ot.jsx)(ci.a,{name:"dataset",id:"dataset-select"}),displayEmpty:!0,name:"dataset",className:t.selectEmpty,children:a.map((function(e){return Object(ot.jsx)(br.a,{value:e.id,selected:e.id===n,children:e.title},e.id)}))});return Object(ot.jsx)(pi,{label:i,control:o})})),mi={selectDataset:ya},bi=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedDatasetId:e.controlState.selectedDatasetId,datasets:e.dataState.datasets}}),mi)(fi),ji=n(526),hi=n.n(ji),gi=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginRight:e.spacing(2),marginBottom:e.spacing(1),minWidth:120},selectEmpty:{},button:{margin:e.spacing(.1)}})}))((function(e){var t=e.classes,n=e.canAddTimeSeries,a=e.selectedVariableName,r=e.variables,i=e.selectVariable,o=e.addTimeSeries;a=a||"",r=r||[];var c=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"variable-select",children:h.get("Variable")}),s=Object(ot.jsx)(li.a,{variant:"standard",className:t.selectEmpty,value:a,onChange:function(e){i(e.target.value||null)},input:Object(ot.jsx)(ci.a,{name:"variable",id:"variable-select"}),displayEmpty:!0,name:"variable",children:r.map((function(e){return Object(ot.jsx)(br.a,{value:e.name,selected:e.name===a,children:e.title||e.name},e.name)}))}),l=Object(ot.jsx)(fr.a,{className:t.button,disabled:!n,onClick:function(){o()},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show time-series diagram"),children:Object(ot.jsx)(hi.a,{})})});return Object(ot.jsx)(pi,{label:c,control:s,actions:l})})),vi={selectVariable:function(e){return{type:Aa,selectedVariableName:e}},addTimeSeries:sa},Oi=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedVariableName:e.controlState.selectedVariableName,canAddTimeSeries:mn(e),variables:Yt(e)}}),vi)(gi),xi=n(1020),yi=n(1021),Si=Object(hr.a)((function(e){return Object(jr.a)({})}))((function(e){var t=e.showRgbLayer,n=e.rgbSchema,a=e.setRgbLayerVisibility;return Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show RGB layer instead"),children:Object(ot.jsx)(xi.a,{label:h.get("RGB"),control:Object(ot.jsx)(yi.a,{color:"primary",checked:null!==n&&t,disabled:null===n,onChange:function(e){a(e.target.checked)}})})})})),wi={setRgbLayerVisibility:function(e){return{type:Ma,showRgbLayer:e}}},ki=Object(o.b)((function(e){return{locale:e.controlState.locale,rgbSchema:an(e),showRgbLayer:e.controlState.showRgbLayer}}),wi)(Si),Pi=n(994),Ti=n(385),Ci=n.n(Ti),Ii=Object(hr.a)((function(e){return Object(jr.a)({select:{minWidth:"5em"}})}))((function(e){var t=e.classes,n=e.placeGroups,a=e.selectPlaceGroups,r=e.selectedPlaceGroupIds,i=e.selectedPlaceGroupsTitle,o=e.removeAllUserPlaces;if(r=r||[],0===(n=n||[]).length||1===n.length&&"user"===n[0].id)return null;var c=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"place-groups-select",children:h.get("Places")}),s=Object(ot.jsx)(li.a,{variant:"standard",multiple:!0,displayEmpty:!0,onChange:function(e){a(e.target.value||null)},input:Object(ot.jsx)(ci.a,{name:"place-groups",id:"place-groups-select"}),value:r,renderValue:function(){return i},name:"place-groups",className:t.select,children:n.map((function(e){return Object(ot.jsxs)(br.a,{value:e.id,children:[Object(ot.jsx)(Pi.a,{checked:r.indexOf(e.id)>-1}),Object(ot.jsx)(Vr.a,{primary:e.title})]},e.id)}))}),l=1===r.length&&"user"===r[0],u=Object(ot.jsx)(fr.a,{disabled:!l,onClick:function(){o()},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Remove places"),children:Object(ot.jsx)(Ci.a,{})})});return Object(ot.jsx)(pi,{label:c,control:s,actions:u})})),Ei={selectPlaceGroups:Ia,removeAllUserPlaces:function(){return{type:ca}}},Ni=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedPlaceGroupIds:e.controlState.selectedPlaceGroupIds,placeGroups:on(e),selectedPlaceGroupsTitle:un(e)}}),Ei)(Ii),Mi=Object(hr.a)((function(e){return Object(jr.a)({select:{minWidth:"5em"},button:{}})}))((function(e){var t=e.classes,n=e.selectPlace,a=e.placeLabels,r=e.selectedPlaceId,i=e.selectedPlaceGroupIds,o=e.removeUserPlace,c=e.places;c=c||[],a=a||[],r=r||"",i=i||[];var s=Object(ot.jsx)(si.a,{shrink:!0,htmlFor:"place-select",children:h.get("Place")}),l=Object(ot.jsx)(li.a,{variant:"standard",value:r,onChange:function(e){n(e.target.value||null,c,!0)},input:Object(ot.jsx)(ci.a,{name:"place",id:"place-select"}),displayEmpty:!0,name:"place",className:t.select,disabled:0===c.length,children:c.map((function(e,t){return Object(ot.jsx)(br.a,{value:e.id,selected:e.id===r,children:a[t]},e.id)}))}),u=c.length>0&&1===i.length&&"user"===i[0]&&""!==r,d=Object(ot.jsx)(fr.a,{className:t.button,disabled:!u,onClick:function(){null!==r&&o(r,c)},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Remove place"),children:Object(ot.jsx)(Ci.a,{})})});return Object(ot.jsx)(pi,{label:s,control:l,actions:d})})),Ai={selectPlace:Na,removeUserPlace:function(e,t){return{type:oa,id:e,places:t}},openDialog:er},Ri=Object(o.b)((function(e){return{locale:e.controlState.locale,datasets:e.dataState.datasets,userPlaceGroup:e.dataState.userPlaceGroup,selectedPlaceGroupIds:e.controlState.selectedPlaceGroupIds,selectedPlaceId:e.controlState.selectedPlaceId,places:dn(e),placeLabels:jn(e)}}),Ai)(Mi),Li=n(528),zi=n.n(Li),Di=n(529),Bi=n.n(Di),Gi=n(527),_i=n.n(Gi),Fi=n(530),Vi=n.n(Fi),Ui=n(531),Wi=n.n(Ui),Ki=n(1022),Zi=n(1001),Hi=Object(Qr.a)((function(e){return{formControl:{marginTop:e.spacing(1.5),marginRight:e.spacing(2)}}}));var Ji={setMapInteraction:Va},qi=Object(o.b)((function(e){return{mapInteraction:e.controlState.mapInteraction}}),Ji)((function(e){var t=e.mapInteraction,n=e.setMapInteraction,a=Hi();return Object(ot.jsx)(ui.a,{variant:"standard",className:a.formControl,children:Object(ot.jsxs)(Zi.a,{size:"small",value:t,exclusive:!0,onChange:function(e,t){n(null!==t?t:"Select")},children:[Object(ot.jsx)(Ki.a,{value:"Select",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Select a place in map"),children:Object(ot.jsx)(_i.a,{})})},0),Object(ot.jsx)(Ki.a,{value:"Point",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Add a point location in map"),children:Object(ot.jsx)(zi.a,{})})},1),Object(ot.jsx)(Ki.a,{value:"Polygon",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Draw a polygon area in map"),children:Object(ot.jsx)(Bi.a,{})})},2),Object(ot.jsx)(Ki.a,{value:"Circle",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Draw a circular area in map"),children:Object(ot.jsx)(Vi.a,{})})},3),Object(ot.jsx)(Ki.a,{value:"Geometry",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Import geometry"),children:Object(ot.jsx)(Wi.a,{})})},4)]})})})),Yi=n(1023),Qi=n(386),Xi=n.n(Qi),$i=n(580),eo=n(577),to=n(988),no=Object(hr.a)((function(e){return Object(jr.a)({})}))((function(e){var t,n,a=e.hasTimeDimension,r=e.selectedTime,i=e.selectedTimeRange,o=e.selectTime,c=Object(ot.jsx)(Xi.a,{shrink:!0,htmlFor:"time-select",children:"".concat(h.get("Time")," (UTC)")}),s="number"===typeof r?_n(r):null;Array.isArray(i)&&(t=_n(i[0]),n=_n(i[1]));var l=Object(ot.jsx)($i.a,{dateAdapter:eo.a,children:Object(ot.jsx)(to.a,{disabled:!a,variant:"inline",emptyLabel:a?void 0:h.get("Missing time axis"),inputFormat:"yyyy-MM-dd hh:mm:ss",id:"time-select",value:s,minDateTime:t,maxDateTime:n,onChange:function(e){o(null!==e?e.getTime():null)},ampm:!1,renderInput:function(e){return Object(ot.jsx)(Yi.a,Object(P.a)(Object(P.a)({},e),{},{variant:"standard",size:"small"}))}})});return Object(ot.jsx)(pi,{label:c,control:l})})),ao={selectTime:La},ro=Object(o.b)((function(e){return{locale:e.controlState.locale,hasTimeDimension:!!vn(e),selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange}}),ao)(no),io=n(1025),oo=Object(hr.a)((function(e){return Object(jr.a)({box:{marginTop:e.spacing(2),marginLeft:e.spacing(5),marginRight:e.spacing(5),minWidth:200},label:{color:"grey",fontSize:"1em"}})}))((function(e){var t=e.classes,n=e.hasTimeDimension,r=e.selectedTime,i=e.selectTime,o=e.selectedTimeRange,c=Object(a.useState)(r),s=Object(V.a)(c,2),l=s[0],u=s[1];if(Object(a.useEffect)((function(){u(r||(o?o[0]:0))}),[r,o]),!n)return null;var d=Array.isArray(o);d||(o=[Date.now()-2*Un,Date.now()]);var p=[{value:o[0],label:Fn(o[0])},{value:o[1],label:Fn(o[1])}];return Object(ot.jsx)(di.a,{className:t.box,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Select time in dataset"),children:Object(ot.jsx)(io.a,{disabled:!d,min:o[0],max:o[1],value:l||0,valueLabelDisplay:"off",valueLabelFormat:function(e){return Vn(e)},marks:p,onChange:function(e,t){"number"===typeof t&&u(t)},onChangeCommitted:function(e,t){i&&"number"===typeof t&&i(t)},size:"small"})})})})),co={selectTime:La,selectTimeRange:Ba},so=Object(o.b)((function(e){return{locale:e.controlState.locale,hasTimeDimension:!!vn(e),selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange}}),co)(oo),lo=n(535),uo=n.n(lo),po=n(536),fo=n.n(po),mo=n(534),bo=n.n(mo),jo=n(537),ho=n.n(jo),go=n(532),vo=n.n(go),Oo=n(533),xo=n.n(Oo),yo=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginTop:e.spacing(1),marginRight:e.spacing(1)}})}))((function(e){var t=e.classes,n=e.timeAnimationActive,r=e.timeAnimationInterval,i=e.updateTimeAnimation,o=e.selectedTime,c=e.selectedTimeRange,s=e.selectTime,l=e.incSelectedTime,u=Object(a.useRef)(null);Object(a.useEffect)((function(){return p(),m}));var d=function(){l(1)},p=function(){n?f():m()},f=function(){m(),u.current=window.setInterval(d,r)},m=function(){null!==u.current&&(window.clearInterval(u.current),u.current=null)},b="number"===typeof o,j=h.get(n?"Stop":"Start"),g=n?Object(ot.jsx)(vo.a,{}):Object(ot.jsx)(xo.a,{}),v=Object(ot.jsx)(fr.a,{disabled:!b,"aria-label":j,onClick:function(){i(!n,r)},size:"large",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Auto-step through times in the dataset"),children:g})}),O=Object(ot.jsx)(fr.a,{disabled:!b||n,onClick:function(){s(c?c[0]:null)},size:"large",children:Object(ot.jsx)(bo.a,{})}),x=Object(ot.jsx)(fr.a,{disabled:!b||n,onClick:function(){l(-1)},size:"large",children:Object(ot.jsx)(uo.a,{})}),y=Object(ot.jsx)(fr.a,{disabled:!b||n,onClick:function(){l(1)},size:"large",children:Object(ot.jsx)(fo.a,{})}),S=Object(ot.jsx)(fr.a,{disabled:!b||n,onClick:function(){s(c?c[1]:null)},size:"large",children:Object(ot.jsx)(ho.a,{})});return Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[O,x,v,y,S]})})})),So={selectTime:La,incSelectedTime:function(e){return{type:za,increment:e}},updateTimeAnimation:function(e,t){return{type:_a,timeAnimationActive:e,timeAnimationInterval:t}}},wo=Object(o.b)((function(e){return{locale:e.controlState.locale,selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange,timeAnimationActive:e.controlState.timeAnimationActive,timeAnimationInterval:e.controlState.timeAnimationInterval}}),So)(yo),ko=n(538),Po=n.n(ko),To=n(270),Co=n.n(To),Io=n(539),Eo=n.n(Io),No=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginTop:e.spacing(1),marginRight:e.spacing(1),marginLeft:"auto"}})}))((function(e){var t=e.classes,n=e.visible,a=e.flyToSelectedObject,r=e.infoCardOpen,i=e.showInfoCard,o=e.timeSeriesGroups,c=e.openDialog,s=e.allowRefresh,l=e.updateResources,u=e.compact;if(!n)return null;var d,p=o.length>0;Ee.instance.branding.allowDownloads&&(d=Object(ot.jsx)(fr.a,{disabled:!p,onClick:function(){return c("export")},size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Export data"),children:Object(ot.jsx)(Po.a,{})})}));var f,m,b=Object(ot.jsx)(fr.a,{onClick:a,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Show selected place in map"),children:Object(ot.jsx)(Eo.a,{})})}),j=Object(ot.jsx)(fr.a,{onClick:function(){return i(!0)},disabled:r,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Open information panel"),children:Object(ot.jsx)(Co.a,{})})});return u&&(s&&(f=Object(ot.jsx)(fr.a,{onClick:l,size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Refresh"),children:Object(ot.jsx)(wr.a,{})})})),m=Object(ot.jsx)(fr.a,{onClick:function(){return c("settings")},size:"small",children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Settings"),children:Object(ot.jsx)(yr.a,{})})})),Object(ot.jsx)(ui.a,{variant:"standard",className:t.formControl,children:Object(ot.jsxs)(di.a,{children:[f,d,b,j,m]})})})),Mo={showInfoCard:Wa,flyToSelectedObject:function(){return function(e,t){var n=Ut(t()),a=_t(t());n?e(ka(n)):a&&e(Sa(a))}},openDialog:er,updateResources:Qn},Ao=Object(o.b)((function(e){return{locale:e.controlState.locale,visible:!(!e.controlState.selectedDatasetId&&!e.controlState.selectedPlaceId),infoCardOpen:e.controlState.infoCardOpen,timeSeriesGroups:e.dataState.timeSeriesGroups,compact:Ee.instance.branding.compact,allowRefresh:Ee.instance.branding.allowRefresh}}),Mo)(No),Ro=Object(o.b)((function(e){return{locale:e.controlState.locale,show:e.dataState.datasets.length>0}}),{})((function(e){return e.show?Object(ot.jsxs)(oi,{children:[Object(ot.jsx)(bi,{}),Object(ot.jsx)(Oi,{}),Object(ot.jsx)(ki,{}),Object(ot.jsx)(Ni,{}),Object(ot.jsx)(Ri,{}),Object(ot.jsx)(qi,{}),Object(ot.jsx)(ro,{}),Object(ot.jsx)(wo,{}),Object(ot.jsx)(so,{}),Object(ot.jsx)(Ao,{})]}):null})),Lo=n(317),zo=n(18),Do=n(95),Bo=(n(745),function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={error:null},a}return Object(f.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error(e),t.componentStack&&console.error(t.componentStack)}},{key:"render",value:function(){if(!this.props.children)throw new Error("An ErrorBoundary requires at least one child");return this.state.error?Object(ot.jsxs)("div",{children:[Object(ot.jsx)("h2",{className:"errorBoundary-header",children:h.get("Something went wrong.")}),Object(ot.jsxs)("details",{className:"errorBoundary-details",style:{whiteSpace:"pre-wrap"},children:[this.state.error.toString(),Object(ot.jsx)("br",{})]})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(a.Component)),Go=n(162),_o=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).divRef=null,e.handleDivRef=function(t){e.divRef=t},e}return Object(f.a)(n,[{key:"addMapObject",value:function(e){var t=new Go.a({element:this.divRef});return e.addControl(t),t}},{key:"updateMapObject",value:function(e,t,n){return t}},{key:"removeMapObject",value:function(e,t){var n,a=Object(u.a)(e.getControls().getArray());try{for(a.s();!(n=a.n()).done;){if(n.value===t){e.removeControl(t);break}}}catch(r){a.e(r)}finally{a.f()}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,a=e.className,r=(a?a+" ":"")+"ol-unselectable ol-control";return Object(ot.jsx)("div",{style:n,className:r,ref:this.handleDivRef,children:t})}}]),n}(vt),Fo=n(354),Vo=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"addMapObject",value:function(e){var t=new Fo.a(this.getOptions());return e.addControl(t),t}},{key:"updateMapObject",value:function(e,t,n){return t.setProperties(this.getOptions()),t}},{key:"removeMapObject",value:function(e,t){e.removeControl(t)}}]),n}(vt),Uo=n(131),Wo=n(86),Ko=n(355),Zo=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"addMapObject",value:function(e){var t=new Ko.a(this.getOptions()),n=!!this.props.active;return t.setActive(n),e.addInteraction(t),n&&this.listen(t,this.props),t}},{key:"updateMapObject",value:function(e,t,n){t.setProperties(this.getOptions());var a=!!this.props.active;return t.setActive(a),this.unlisten(t,n),a&&this.listen(t,this.props),t}},{key:"removeMapObject",value:function(e,t){this.unlisten(t,this.props),e.removeInteraction(t)}},{key:"getOptions",value:function(){var e=Object(Uo.a)(Object(Wo.a)(n.prototype),"getOptions",this).call(this);delete e.layerId,delete e.active,delete e.onDrawStart,delete e.onDrawEnd;var t=this.props.layerId;if(t&&!e.source){var a=this.getMapObject(t);a&&(e.source=a.getSource())}return e}},{key:"listen",value:function(e,t){var n=t.onDrawStart,a=t.onDrawEnd;n&&e.on("drawstart",n),a&&e.on("drawend",a)}},{key:"unlisten",value:function(e,t){var n=t.onDrawStart,a=t.onDrawEnd;n&&e.un("drawstart",n),a&&e.un("drawend",a)}}]),n}(vt),Ho=n(25),Jo=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"addMapObject",value:function(e){return this.updateView(e)}},{key:"removeMapObject",value:function(e,t){}},{key:"updateMapObject",value:function(e,t){return this.updateView(e)}},{key:"updateView",value:function(e){var t=this.props.projection,n=e.getView().getProjection();if("string"===typeof t&&n&&(n=n.getCode()),t&&t!==n){var a=e.getView(),r=new pt.a(Object(P.a)(Object(P.a)({},this.props),{},{center:Object(Ho.m)(a.getCenter()||[0,0],n,t),minZoom:a.getMinZoom(),zoom:a.getZoom()}));e.getLayers().forEach((function(e){e instanceof yt.a&&e.getSource().forEachFeature((function(e){var a;null===(a=e.getGeometry())||void 0===a||a.transform(n,t)}))})),e.setView(r)}else e.getView().setProperties(this.props);return e.getView()}}]),n}(vt),qo=n(540),Yo=n.n(qo);function Qo(e,t,n){if(e.getGeometry()instanceof _.a)e.setStyle(function(e,t,n,a){var r=new nt.a({color:t}),i=new at.a({color:n,width:a});return new rt.c({image:new tt.a({radius:e,fill:r,stroke:i})})}(7,t,"white",1));else{n="number"===typeof n?n:.25;var a=Yo()(t);a=Array.isArray(a)?[a[0],a[1],a[2],n]:[255,255,255,n],e.setStyle(function(e,t,n){var a=new nt.a({color:e}),r=new at.a({color:t,width:n});return new rt.c({fill:a,stroke:r})}(a,t,2))}}var Xo=new $e.a,$o=new $e.a,ec={zIndex:1e3,right:272,top:10},tc=new at.a({color:[255,200,0,1],width:3}),nc=new nt.a({color:[255,200,0,.05]}),ac=new rt.c({stroke:tc,fill:nc,image:new tt.a({radius:10,stroke:tc,fill:nc})}),rc=Object(hr.a)((function(e){return Object(jr.a)({})}),{withTheme:!0})((function(e){var t=e.theme,n=e.mapId,r=e.mapInteraction,i=e.mapProjection,o=e.baseMapLayer,c=e.rgbLayer,s=e.variableLayer,l=e.datasetBoundaryLayer,p=e.placeGroupLayers,f=e.colorBarLegend,m=e.addUserPlace,b=e.addUserPlacesFromText,j=e.userPlaceGroup,g=e.selectPlace,v=e.selectedPlaceId,O=e.places,x=e.imageSmoothing,y=e.onMapRef,S=Object(a.useState)(null),w=Object(V.a)(S,2),k=w[0],P=w[1],T=Object(a.useState)(v||null),C=Object(V.a)(T,2),I=C[0],E=C[1];Object(a.useEffect)((function(){if(k){var e=v||null;if(e!==I){if($o.clear(),e){var t=function(e,t){var n,a=Object(u.a)(e.getLayers().getArray());try{for(a.s();!(n=a.n()).done;){var r=n.value;if(r instanceof yt.a){var i=r.getSource().getFeatureById(t);if(i)return i}}}catch(o){a.e(o)}finally{a.f()}return null}(k,e);if(t){var n=t.clone();n.setId("Select-"+t.getId()),n.setStyle(void 0),$o.addFeature(n)}}E(e)}}}),[k,v,I]),Object(a.useEffect)((function(){k&&k.getLayers().forEach((function(e){e instanceof st.a?e.getSource().changed():e.changed()}))}),[k,x]);var N=function(e){if(null!==k&&m&&"Select"!==r){var n=function(){var n=e.feature,a=n.getGeometry();if(!a)return{v:void 0};var i="User-".concat(r,"-").concat($()),o=k.getView().getProjection();if(a instanceof Lo.a){var c=Object(Do.b)(a);n.setGeometry(c)}a=n.clone().getGeometry().transform(o,ft);var s=(new d.a).writeGeometryObject(a);n.setId(i);var l=0;Gt.userLayer&&(l=Xo.getFeatures().length);var u=Re(l);Qo(n,Le(u,t.palette.mode),Ee.instance.branding.polygonFillOpacity);for(var p=h.get(r),f="",b=1;f="".concat(p," ").concat(b),j.features.find((function(e){return(e.properties||{}).label===f}));b++);m(i,f,u,s,!0)}();if("object"===typeof n)return n.v}return!0};var M=null;f&&(M=Object(ot.jsx)(_o,{id:"legend",style:ec,children:f})),null!==c&&(s=c);return Object(ot.jsx)(Bo,{children:Object(ot.jsxs)(gt,{id:n,onClick:function(e){return function(e){if("Select"===r){var t=null,n=e.map.getFeaturesAtPixel(e.pixel);if(n){var a,i=Object(u.a)(n);try{for(i.s();!(a=i.n()).done;){var o=a.value;if("function"===typeof o.getId){t=o.getId()+"";break}}}catch(c){i.e(c)}finally{i.f()}}g&&g(t,O,!1)}}(e)},onMapRef:function(e){y&&y(e),P(e)},mapObjects:Gt,isStale:!0,onDropFiles:function(e){b&&e.forEach((function(e){var t=new FileReader;t.onloadend=function(){"string"===typeof t.result&&b(t.result)},t.readAsText(e,"UTF-8")}))},children:[Object(ot.jsx)(Jo,{id:"view",projection:i}),Object(ot.jsxs)(ct,{children:[o,s,l,Object(ot.jsx)(St,{id:"userLayer",opacity:1,zIndex:500,source:Xo}),Object(ot.jsx)(St,{id:"selectionLayer",opacity:.7,zIndex:510,style:ac,source:$o})]}),p,Object(ot.jsx)(Zo,{id:"drawPoint",layerId:"userLayer",active:"Point"===r,type:zo.a.POINT,wrapX:!0,stopClick:!0,onDrawEnd:N}),Object(ot.jsx)(Zo,{id:"drawPolygon",layerId:"userLayer",active:"Polygon"===r,type:zo.a.POLYGON,wrapX:!0,stopClick:!0,onDrawEnd:N}),Object(ot.jsx)(Zo,{id:"drawCircle",layerId:"userLayer",active:"Circle"===r,type:zo.a.CIRCLE,wrapX:!0,stopClick:!0,onDrawEnd:N}),M,Object(ot.jsx)(Vo,{bar:!1})]})})}));var ic=n(1008),oc="_alpha",cc="_r";function sc(e){var t=e.baseName;return e.isReversed&&(t+=cc),e.isAlpha&&(t+=oc),t}function lc(e){var t=e[0],n=e[e.length-1],a=Math.min(10,Math.max(2,Math.round(-Math.log10(n-t))));return e.map((function(e){return function(e,t){var n=Math.round(e);return Math.abs(n-e)<1e-8?n+"":e.toFixed(t)}(e,a)}))}function uc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return lc(dc(e,t,n))}function dc(e,t,n){for(var a=(t-e)/(n-1),r=new Array(n),i=0;i<n;i++)r[i]=e+i*a;return r}var pc=new Image;pc.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURcDAwP///ytph7QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAUSURBVBjTYwABQSCglEENMxgYGAAynwRB8BEAgQAAAABJRU5ErkJggg==";var fc=function(e){var t=e.colorBar,n=e.imageData,r=e.opacity,i=e.width,o=e.height,c=e.onOpenEditor,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=s.current;if(null!==e){var a=new Image;a.onload=function(){!function(e,t,n,a){var r=document.createElement("canvas");r.width=a.width,r.height=a.height;var i=r.getContext("2d");if(null===i)return;i.drawImage(a,0,0);var o=i.getImageData(0,0,r.width,r.height).data;if(o=o.slice(0,o.length/2),e.isReversed){for(var c=new Uint8ClampedArray(o.length),s=0;s<o.length;s+=4){var l=o.length-s-4;c[l]=o[s],c[l+1]=o[s+1],c[l+2]=o[s+2],c[l+3]=o[s+3]}o=c}if(e.isAlpha)for(var u=512/o.length,d=0;d<o.length/2;d+=4)o[d+3]=u*d;if(t<1)for(var p=0;p<o.length;p+=4)o[p+3]*=t;Promise.resolve(createImageBitmap(new ImageData(o,o.length/4,1))).then((function(e){var t=n.getContext("2d");if(null!==t){var a=t.createPattern(pc,"repeat");t.fillStyle=null!==a?a:"#ffffff",t.fillRect(0,0,n.width,n.height),t.drawImage(e,0,0,n.width,n.height)}}))}(t,r,e,a)},a.src="data:image/png;base64,".concat(n)}}),[t,n,r]),Object(ot.jsx)(ot.Fragment,{children:Boolean(n)?Object(ot.jsx)("canvas",{ref:s,width:i||240,height:o||24,onClick:c}):Object(ot.jsx)("div",{children:h.get("Unknown color bar")+": ".concat(t.baseName)})})};var mc=Object(Qr.a)((function(e){return{title:{fontSize:"x-small",fontWeight:"bold",width:"100%",display:"flex",flexWrap:"nowrap",justifyContent:"center",paddingBottom:e.spacing(.5)},label:{fontSize:"x-small",fontWeight:"bold",width:"100%",display:"flex",flexWrap:"nowrap",justifyContent:"space-between"},container:{paddingLeft:e.spacing(1.5),paddingRight:e.spacing(1.5),paddingBottom:e.spacing(.5),paddingTop:e.spacing(.5),color:"black"},sliderBox:{marginTop:e.spacing(1),marginLeft:e.spacing(5),marginRight:e.spacing(5),minWidth:320,width:"calc(100% - ".concat(e.spacing(12),"px)")},colorBarBox:{marginTop:e.spacing(.6),marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},colorBarGroupTitle:{marginTop:e.spacing(.4),color:e.palette.grey[400]},colorBarGroupItemBox:{marginTop:e.spacing(.2)},colorBarMinMaxEditor:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},minMaxBox:{display:"flex",justifyContent:"center"},minTextField:{maxWidth:"8em",paddingRight:2},maxTextField:{maxWidth:"8em",paddingLeft:2}}}));function bc(e){var t=e.minValue,n=e.maxValue,r=e.count;return Object(ot.jsx)(a.Fragment,{children:uc(t,n,r).map((function(e,t){return Object(ot.jsx)("span",{children:e},t)}))})}function jc(e){return[e[0]+"",e[1]+""]}var hc={updateVariableColorBar:function(e,t,n){return function(a,r){var i=r().controlState.selectedDatasetId,o=r().controlState.selectedVariableName;i&&o&&a(function(e,t,n,a,r){return{type:ha,datasetId:e,variableName:t,colorBarMinMax:n,colorBarName:a,opacity:r}}(i,o,e,t,n))}}},gc=Object(o.b)((function(e){return{variableName:Ft(e),variableUnits:Xt(e),variableColorBarMinMax:$t(e),variableColorBarName:en(e),variableOpacity:tn(e),colorBars:e.dataState.colorBars}}),hc)((function(e){var t=e.variableName,n=e.variableUnits,r=e.variableColorBarMinMax,i=e.variableColorBarName,o=e.variableOpacity,c=e.updateVariableColorBar,s=e.colorBars,l=e.width,d=e.height,p=e.numTicks,f=mc(),m=a.useState(null),b=Object(V.a)(m,2),j=b[0],g=b[1],v=a.useState(null),O=Object(V.a)(v,2),x=O[0],y=O[1],S=a.useState(r),w=Object(V.a)(S,2),k=w[0],T=w[1],C=a.useState(r),I=Object(V.a)(C,2),E=I[0],N=I[1],M=a.useState(jc(r)),A=Object(V.a)(M,2),R=A[0],L=A[1],z=a.useState([!1,!1]),D=Object(V.a)(z,2),B=D[0],G=D[1];a.useEffect((function(){L(jc(r))}),[r]);var _=Boolean(j),F=Boolean(x);if(!t||!s)return null;var U,W,K=function(e){var t=e,n=t.endsWith(oc);n&&(t=t.slice(0,t.length-oc.length));var a=t.endsWith(cc);return a&&(t=t.slice(0,t.length-cc.length)),{baseName:t,isAlpha:n,isReversed:a}}(i),Z=s.images[K.baseName],H="".concat(t," (").concat(n||"-",")");if(_){for(var J,q=Object(V.a)(E,2),Y=q[0],Q=q[1],X=Y<Q?Q-Y:1,$=Math.floor(Math.log10(X)),ee=X*Math.pow(10,-$),te=null,ne=0,ae=[.25,.2,.15,.125,.1];ne<ae.length;ne++){var re=ee/ae[ne],ie=Math.floor(re);if(Math.abs(ie-re)<1e-10){te=ie;break}}null!==te&&te>=2?J=Math.max(2,Math.round(te/2)):(J=4,te=8);var oe=Y<Q?X/te:.5,ce=Y-J*oe,se=Q+J*oe,le=(se-ce)/(te+2*J),ue=[ce,Y,Q,se],de=lc(ue).map((function(e,t){return{value:ue[t],label:e}}));U=Object(ot.jsxs)("div",{className:f.colorBarMinMaxEditor,children:[Object(ot.jsx)("span",{style:{paddingLeft:14},children:H}),Object(ot.jsx)(di.a,{className:f.sliderBox,children:Object(ot.jsx)(io.a,{min:ce,max:se,value:k,marks:de,step:le,onChange:function(e,t){Array.isArray(t)&&T([t[0],t[1]])},onChangeCommitted:function(e,t){Array.isArray(t)&&c([t[0],t[1]],i,o)},valueLabelDisplay:"auto",size:"small"})}),Object(ot.jsxs)(di.a,{component:"form",className:f.minMaxBox,children:[Object(ot.jsx)(Yi.a,{className:f.minTextField,label:"Minimum",variant:"filled",size:"small",value:R[0],error:B[0],onChange:function(e){return function(e){var t=e.target.value;L([t,R[1]]);var n=Number.parseFloat(t),a=!1;if(!Number.isNaN(n)&&n<k[1]){if(n!==k[0]){var r=[n,k[1]];T(r),N(r),c(r,i,o)}}else a=!0;G([a,B[1]])}(e)}}),Object(ot.jsx)(Yi.a,{className:f.maxTextField,label:"Maximum",variant:"filled",size:"small",value:R[1],error:B[1],onChange:function(e){return function(e){var t=e.target.value;L([R[0],t]);var n=Number.parseFloat(t),a=!1;if(!Number.isNaN(n)&&n>k[0]){if(n!==k[1]){var r=[k[0],n];T(r),N(r),c(r,i,o)}}else a=!0;G([B[0],a])}(e)}})]})]})}if(F){var pe,fe=0,me=[],be=Object(u.a)(s.groups);try{for(be.s();!(pe=be.n()).done;){var je=pe.value;if(je.names&&0!==je.names.length){me.push(Object(ot.jsx)(gr.a,{arrow:!0,title:je.description,placement:"left",children:Object(ot.jsx)(di.a,{className:f.colorBarGroupTitle,children:je.title})},fe++));var he,ge=Object(u.a)(je.names);try{var ve=function(){var e=he.value;me.push(Object(ot.jsx)(di.a,{className:f.colorBarGroupItemBox,border:1,borderColor:e===K.baseName?"orange":"black",width:240,height:20,children:Object(ot.jsx)(gr.a,{arrow:!0,title:e,placement:"left",children:Object(ot.jsx)("img",{src:"data:image/png;base64,".concat(s.images[e]),alt:"Color Bar",width:"100%",height:"100%",onClick:function(){var t;t=e,i=sc(Object(P.a)(Object(P.a)({},K),{},{baseName:t})),c(r,i,o)}})})},fe++))};for(ge.s();!(he=ge.n()).done;)ve()}catch(Oe){ge.e(Oe)}finally{ge.f()}}}}catch(Oe){be.e(Oe)}finally{be.f()}W=Object(ot.jsxs)(di.a,{className:f.colorBarBox,children:[Object(ot.jsxs)(di.a,{component:"span",children:[Object(ot.jsx)(Pi.a,{color:"primary",checked:K.isAlpha,onChange:function(e){var t=e.currentTarget.checked;i=sc(Object(P.a)(Object(P.a)({},K),{},{isAlpha:t})),c(r,i,o)},size:"small",style:{paddingLeft:0,paddingRight:2,paddingTop:4,paddingBottom:4}}),Object(ot.jsx)(di.a,{component:"span",children:h.get("Hide small values")}),Object(ot.jsx)(Pi.a,{color:"primary",checked:K.isReversed,onChange:function(e){var t=e.currentTarget.checked;i=sc(Object(P.a)(Object(P.a)({},K),{},{isReversed:t})),c(r,i,o)},size:"small",style:{paddingLeft:10,paddingRight:2,paddingTop:4,paddingBottom:4}}),Object(ot.jsx)(di.a,{component:"span",children:h.get("Reverse")})]}),Object(ot.jsxs)(di.a,{component:"div",style:{display:"flex",alignItems:"center"},children:[Object(ot.jsx)("span",{children:h.get("Opacity")}),Object(ot.jsx)(io.a,{min:0,max:1,value:o,step:.01,style:{flexGrow:1,marginLeft:10,marginRight:10},onChange:function(e,t){c(r,i,t)},size:"small"})]}),me]})}return Object(ot.jsxs)("div",{className:"ol-control "+f.container,children:[Object(ot.jsx)("div",{className:f.title,children:Object(ot.jsx)("span",{children:H})}),Object(ot.jsx)(fc,{colorBar:K,imageData:Z,opacity:o,width:l,height:d,onOpenEditor:function(e){y(e.currentTarget)}}),Object(ot.jsx)("div",{className:f.label,onClick:function(e){g(e.currentTarget),T(r),N(r)},children:Object(ot.jsx)(bc,{minValue:r[0],maxValue:r[1],count:p||5})}),Object(ot.jsx)(ic.a,{anchorEl:j,open:_,onClose:function(){g(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:U}),Object(ot.jsx)(ic.a,{anchorEl:x,open:F,onClose:function(){y(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:W})]})})),vc={addUserPlace:function(e,t,n,a,r){return function(i,o){i(function(e,t,n,a,r){return{type:aa,id:e,label:t,color:n,geometry:a,selectPlace:r}}(e,t,n,a,r)),o().controlState.autoShowTimeSeries&&i(sa())}},addUserPlacesFromText:ia,selectPlace:Na},Oc=Object(o.b)((function(e,t){return{locale:e.controlState.locale,variableLayer:Pn(e),rgbLayer:Tn(e),datasetBoundaryLayer:kn(e),placeGroupLayers:En(e),colorBarLegend:Object(ot.jsx)(gc,{}),userPlaceGroup:Et(e),mapId:"map",mapInteraction:e.controlState.mapInteraction,mapProjection:Jt(e),selectedPlaceId:e.controlState.selectedPlaceId,places:dn(e),baseMapLayer:Ln(e),imageSmoothing:Zt(e),onMapRef:t.onMapRef}}),vc)(rc),xc=n(549),yc=n.n(xc),Sc=n(541),wc=n(582),kc=n(545),Pc=n(548),Tc=n(982),Cc=n(983),Ic=n(558),Ec=n(559),Nc=n(984),Mc=n(330),Ac=n(324),Rc=function(e){return Object(jr.a)({chartContainer:{userSelect:"none",marginTop:e.spacing(1),width:"99%",height:"32vh",display:"flex",flexDirection:"column",alignItems:"flex-stretch"},responsiveContainer:{flexGrow:1},actionButton:{zIndex:1e3,opacity:.8},toolTipContainer:{backgroundColor:"black",opacity:.8,color:"white",border:"2px solid black",borderRadius:e.spacing(2),padding:e.spacing(1.5)},toolTipValue:{fontWeight:"bold"},toolTipLabel:{fontWeight:"bold",paddingBottom:e.spacing(1)},chartTitle:{}})},Lc=["dataMin","dataMax"],zc=["auto","auto"],Dc=Object(hr.a)(Rc,{withTheme:!0})((function(e){var t,n,r=e.classes,i=e.timeSeriesGroup,o=e.selectTimeSeries,c=e.selectedTime,s=e.selectTime,l=e.selectedTimeRange,u=e.selectTimeRange,d=e.places,p=e.selectPlace,f=e.placeInfos,m=e.dataTimeRange,b=e.theme,j=e.showErrorBars,g=e.showPointsOnly,v=e.removeTimeSeriesGroup,O=e.completed,x=Object(a.useState)({}),y=Object(V.a)(x,2),S=y[0],w=y[1],k=function(){w({})},T=b.palette.mode,C=b.palette.primary.light,I=b.palette.primary.main,E=b.palette.primary.contrastText,N=!1,M=null,A=null;if(l){N=!((t=l)===(n=m||null)||null!==t&&null!=n&&t[0]===n[0]&&t[1]===n[1]);var R=Object(V.a)(l,2);M=R[0],A=R[1]}var L=function(){var e=S.firstTime,t=S.secondTime;if(console.log("zoomIn:",e,t),e!==t&&void 0!==e&&void 0!==t){var n=e,a=t;if(n>a){var r=[a,n];n=r[0],a=r[1]}k(),u&&u([n,a])}else k()},z=function(){k(),u&&u(m||null)},D=null,B=i.timeSeriesArray.map((function(e,t){var n=e.source,a=n.valueDataKey,r=n.variableName,c="yellow";if(f){var s=f[n.placeId];if(s){var l=s.place,u=s.label,m=s.color;if("Point"===l.geometry.type){var b=l.geometry.coordinates[0],h=l.geometry.coordinates[1];r+=" (".concat(u,": ").concat(h.toFixed(5),",").concat(b.toFixed(5),")")}else r+=" (".concat(u,")");c=m}}var v=[];e.data.forEach((function(e){if(null!==e[a]){var t=!0,n=!0;null!==M&&(t=e.time>=M),null!==A&&(n=e.time<=A),t&&n&&v.push(e)}})),null===D&&(D=a);var O,x=Le(c,T);return a&&j&&n.errorDataKey&&(O=Object(ot.jsx)(Sc.a,{dataKey:n.errorDataKey,width:4,strokeWidth:1,stroke:x})),Object(ot.jsx)(wc.a,{type:"monotone",name:r,unit:n.variableUnits,data:v,dataKey:a,dot:Object(ot.jsx)(Gc,{radius:3,stroke:x,fill:"white",strokeWidth:2}),activeDot:Object(ot.jsx)(Gc,{radius:3,stroke:"white",fill:x,strokeWidth:2}),stroke:x,strokeOpacity:g?0:e.dataProgress,isAnimationActive:!1,onClick:function(){return n=i.id,a=t,r=e,o&&o(n,a,r),void p(r.source.placeId,d,!0);var n,a,r},children:O},t)})),G=null;null!==c&&(G=Object(ot.jsx)(kc.a,{isFront:!0,x:c,stroke:I,strokeWidth:3,strokeOpacity:.5}));var _=S.firstTime,F=S.secondTime,U=null;void 0!==_&&void 0!==F&&(U=Object(ot.jsx)(Pc.a,{x1:_,x2:F,strokeOpacity:.3,fill:C,fillOpacity:.3}));var W=[];if(N){var K=Object(ot.jsx)(fr.a,{className:r.actionButton,"aria-label":"Zoom Out",onClick:function(){z()},size:"large",children:Object(ot.jsx)(yc.a,{})},"zoomOutButton");W.push(K)}var Z,H=O.reduce((function(e,t){return e+t}),0)/O.length;Z=H>0&&H<100?Object(ot.jsx)(Nr.a,{size:24,className:r.actionButton,color:"secondary"},"loadingTimeSeriesGroup"):Object(ot.jsx)(fr.a,{className:r.actionButton,"aria-label":"Close",onClick:function(){v&&v(i.id)},size:"large",children:Object(ot.jsx)($r.a,{})},"removeTimeSeriesGroup"),W.push(Z);var J=h.get("Time-Series"),q=i.variableUnits||h.get("unknown units"),Y="".concat(J," (").concat(q,")");return Object(ot.jsxs)("div",{className:r.chartContainer,children:[Object(ot.jsxs)(di.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[Object(ot.jsx)(pr.a,{className:r.chartTitle,children:Y}),Object(ot.jsx)(di.a,{display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center",children:W})]}),Object(ot.jsx)(Tc.a,{width:"99%",className:r.responsiveContainer,children:Object(ot.jsxs)(Cc.a,{onMouseDown:function(e){var t=e&&e.activeLabel;w({firstTime:t})},onMouseMove:function(e){if(void 0!==S.firstTime){var t=e&&e.activeLabel;w(Object(P.a)(Object(P.a)({},S),{},{secondTime:t}))}},onMouseUp:function(e){L()},onMouseEnter:function(){k()},onMouseLeave:function(){k()},onClick:function(e){e&&s&&null!==e.activeLabel&&Number.isFinite(e.activeLabel)&&s(e.activeLabel),k()},syncId:"anyId",style:{color:E},children:[Object(ot.jsx)(Ic.a,{dataKey:"time",type:"number",tickCount:6,domain:l||Lc,tickFormatter:function(e){return"number"===typeof e&&Number.isFinite(e)?Fn(e):null},stroke:E,allowDuplicatedCategory:!1}),Object(ot.jsx)(Ec.a,{dataKey:D||"mean",type:"number",domain:zc,stroke:E}),Object(ot.jsx)(Nc.a,{strokeDasharray:"3 3"}),Object(ot.jsx)(Mc.a,{content:Object(ot.jsx)(Bc,{})}),Object(ot.jsx)(Ac.a,{}),B,U,G]})})]})})),Bc=Object(hr.a)(Rc)((function(e){var t=e.classes,n=e.active,a=e.label,r=e.payload;if(!n)return null;if("number"!==typeof a)return null;if(!r||0===r.length)return null;var i=r.map((function(e,n){var a=e.name,r=e.value,i=e.color,o=e.unit,c=e.dataKey;if("number"!==typeof r)return null;var s=r.toFixed(3);"#00000000"===i&&(i="#FAFFDD");var l=-1!==a.indexOf(":")?"":" (".concat(c,")");return Object(ot.jsxs)("div",{children:[Object(ot.jsxs)("span",{children:[a,":\xa0"]}),Object(ot.jsx)("span",{className:t.toolTipValue,style:{color:i},children:s}),Object(ot.jsxs)("span",{children:["\xa0","".concat(o," ").concat(l)]})]},n)}));return i?Object(ot.jsxs)("div",{className:t.toolTipContainer,children:[Object(ot.jsx)("span",{className:t.toolTipLabel,children:"".concat(Vn(a)," UTC")}),i]}):null})),Gc=function(e){var t=e.cx,n=e.cy,a=e.radius,r=e.stroke,i=e.fill,o=e.strokeWidth,c=a+.5*o,s=2*c,l=Math.floor(100*a/s+.5)+"%",u=Math.floor(100*o/s+.5)+"%";return"number"===typeof t&&"number"===typeof n?Object(ot.jsx)("svg",{x:t-c,y:n-c,width:s,height:s,viewBox:"0 0 ".concat(1024," ").concat(1024),children:Object(ot.jsx)("circle",{cx:"50%",cy:"50%",r:l,strokeWidth:u,stroke:r,fill:i})}):null},_c=Object(hr.a)((function(e){return Object(jr.a)({box:{marginTop:e.spacing(1),marginLeft:e.spacing(5),marginRight:e.spacing(5),width:"calc(100% - ".concat(e.spacing(18),")"),height:"5em",display:"flex",alignItems:"flex-end"}})}))((function(e){var t=e.classes,n=e.dataTimeRange,r=e.selectedTimeRange,i=e.selectTimeRange,o=Object(a.useState)(r),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(a.useEffect)((function(){l(r)}),[r]);var u=Array.isArray(n);u||(n=[Date.now()-2*Un,Date.now()]);var d=[{value:n[0],label:Fn(n[0])},{value:n[1],label:Fn(n[1])}];return Object(ot.jsx)(di.a,{className:t.box,children:Object(ot.jsx)(io.a,{disabled:!u,min:n[0],max:n[1],value:s,marks:d,onChange:function(e,t){Array.isArray(t)&&l([t[0],t[1]])},onChangeCommitted:function(e,t){i&&Array.isArray(t)&&i([t[0],t[1]])},size:"small",valueLabelDisplay:"on",valueLabelFormat:function(e){return Vn(e)}})})})),Fc=Object(hr.a)((function(e){return Object(jr.a)({chartContainer:{display:"flex",flexDirection:"column",flexWrap:"wrap",flexFlow:"flex-start",alignItems:"center"},noChartsCard:{width:"20em"},noChartsTitle:{fontSize:14}})}),{withTheme:!0})((function(e){var t=e.classes,n=e.locale,a=e.timeSeriesGroups,r=e.selectedTime,i=e.selectedTimeRange,o=e.dataTimeRange,c=e.selectTime,s=e.selectTimeRange,l=e.removeTimeSeriesGroup,u=e.showPointsOnly,d=e.showErrorBars,p=e.placeInfos,f=e.places,m=e.selectPlace,b=a.map((function(e){var t=e.timeSeriesArray.map((function(e){return e.dataProgress?100*e.dataProgress:0}));return Object(ot.jsx)(Dc,{locale:n,timeSeriesGroup:e,selectedTime:r,selectedTimeRange:i,dataTimeRange:o,selectTime:c,selectTimeRange:s,removeTimeSeriesGroup:l,completed:t,showPointsOnly:u,showErrorBars:d,placeInfos:p,places:f,selectPlace:m},e.id)}));return 0===b.length?null:Object(ot.jsxs)("div",{className:t.chartContainer,children:[Object(ot.jsx)(_c,{selectedTimeRange:i,dataTimeRange:o,selectTimeRange:s}),b]})})),Vc={selectTime:La,selectTimeRange:Ba,removeTimeSeriesGroup:function(e){return{type:da,id:e}},selectPlace:Na},Uc=Object(o.b)((function(e){return{locale:e.controlState.locale,timeSeriesGroups:e.dataState.timeSeriesGroups,selectedTime:e.controlState.selectedTime,selectedTimeRange:e.controlState.selectedTimeRange,dataTimeRange:nn(e),showPointsOnly:e.controlState.showTimeSeriesPointsOnly,showErrorBars:e.controlState.showTimeSeriesErrorBars,placeInfos:bn(e),places:dn(e)}}),Vc)(Fc),Wc=n(1026),Kc=n(1027),Zc=n(1036),Hc=n(1030),Jc=n(1028),qc=n(1029),Yc=n(1002),Qc=n(1032),Xc=n(1033),$c=n(1035),es=n(1031),ts=n(1034),ns=n(567),as=n.n(ns),rs=n(563),is=n.n(rs),os=n(566),cs=n.n(os),ss=n(564),ls=n.n(ss),us=n(565),ds=n.n(us),ps=n(562),fs=n.n(ps),ms=n(394),bs=n(396),js=n(581),hs=n.p+"static/media/python-bw.071ec04f.png",gs=Object(Qr.a)((function(e){return Object(jr.a)({card:{maxWidth:"100%",marginBottom:e.spacing(1),marginRight:e.spacing(1)},info:{marginRight:e.spacing(1)},close:{marginLeft:"auto"},table:{},keyValueTableContainer:{background:e.palette.divider},variableHtmlReprContainer:{background:e.palette.divider,padding:e.spacing(1),marginTop:e.spacing(1),marginBottom:e.spacing(1)},media:{height:200},cardContent:{padding:8},code:{fontFamily:"Monospace"}})})),vs=function(e){var t=e.infoCardOpen,n=e.showInfoCard,a=e.visibleInfoCardElements,r=e.setVisibleInfoCardElements,i=e.infoCardElementViewModes,o=e.updateInfoCardElementViewMode,c=e.selectedDataset,s=e.selectedVariable,l=e.selectedPlaceInfo,u=e.selectedTime,d=e.serverConfig,p=e.allowViewModePython,f=gs();if(!t)return null;var m,b,j;if(c){var g="dataset",v=i.dataset,O=a.includes(g);m=Object(ot.jsx)(Os,{isIn:O,viewMode:v,setViewMode:function(e){return o(g,e)},dataset:c,serverConfig:d,hasPython:p})}if(c&&s){var x="variable",y=i.variable,S=a.includes(x);b=Object(ot.jsx)(xs,{isIn:S,viewMode:y,setViewMode:function(e){return o(x,e)},variable:s,time:u,serverConfig:d,hasPython:p})}if(l){var w="place",k=i.place,P=a.includes(w);j=Object(ot.jsx)(ys,{isIn:P,viewMode:k,setViewMode:function(e){return o(w,e)},placeInfo:l})}return Object(ot.jsxs)(Wc.a,{className:f.card,children:[Object(ot.jsxs)(Kc.a,{disableSpacing:!0,children:[Object(ot.jsx)(Co.a,{fontSize:"large",className:f.info}),Object(ot.jsxs)(Zi.a,{size:"small",value:a,onChange:function(e,t){r(t)},children:[Object(ot.jsx)(Ki.a,{value:"dataset",disabled:null===c,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Dataset information"),children:Object(ot.jsx)(fs.a,{})})},0),Object(ot.jsx)(Ki.a,{value:"variable",disabled:null===s,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Variable information"),children:Object(ot.jsx)(is.a,{})})},1),Object(ot.jsx)(Ki.a,{value:"place",disabled:null===l,children:Object(ot.jsx)(gr.a,{arrow:!0,title:h.get("Place information"),children:Object(ot.jsx)(ls.a,{})})},2)]},0),Object(ot.jsx)(fr.a,{onClick:function(){n(!1)},className:f.close,size:"large",children:Object(ot.jsx)($r.a,{})},1)]}),m,b,j]})},Os=function(e){var t,n=e.isIn,a=e.viewMode,r=e.setViewMode,i=e.dataset,o=e.serverConfig,c=e.hasPython;if("code"===a){var s=Is(i.dimensions,["name","size","dtype"]),l=Is(i,["id","title","bbox","attrs"]);l.dimensions=s,t=Object(ot.jsx)(Ts,{code:JSON.stringify(l,null,2)})}else if("list"===a)t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(ws,{data:Object.getOwnPropertyNames(i.attrs||{}).map((function(e){return[e,i.attrs[e]]}))})});else if("text"===a){var u=[[h.get("Dimension names"),i.dimensions.map((function(e){return e.name})).join(", ")],[h.get("Dimension data types"),i.dimensions.map((function(e){return e.dtype})).join(", ")],[h.get("Dimension lengths"),i.dimensions.map((function(e){return e.size})).join(", ")],[h.get("Geographical extent")+" (x1, y1, x2, y2)",i.bbox.map((function(e){return e+""})).join(", ")],[h.get("Spatial reference system"),i.spatialRef]];t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(ws,{data:u})})}else"python"===a&&(t=Object(ot.jsx)(Cs,{code:Es(o,i)}));return Object(ot.jsx)(Ss,{title:i.title||"?",subheader:i.title&&"ID: ".concat(i.id),isIn:n,viewMode:a,setViewMode:r,hasPython:c,children:t})},xs=function(e){var t,n,a=e.isIn,r=e.viewMode,i=e.setViewMode,o=e.variable,c=e.time,s=e.serverConfig,l=e.hasPython,u=gs();if("code"===r){var d=Is(o,["id","name","title","units","shape","dtype","shape","timeChunkSize","colorBarMin","colorBarMax","colorBarName","attrs"]);t=Object(ot.jsx)(Ts,{code:JSON.stringify(d,null,2)})}else if("list"===r){if(t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(ws,{data:Object.getOwnPropertyNames(o.attrs||{}).map((function(e){return[e,o.attrs[e]]}))})}),o.htmlRepr){n=Object(ot.jsx)(ks,{children:Object(ot.jsx)(Ur.a,{ref:function(e){e&&o.htmlRepr&&(e.innerHTML=o.htmlRepr)},className:u.variableHtmlReprContainer})})}}else if("text"===r){var p=[[h.get("Title"),o.title],[h.get("Name"),o.name],[h.get("Units"),o.units],[h.get("Data type"),o.dtype],[h.get("Dimension names"),o.dims.join(", ")],[h.get("Dimension lengths"),o.shape.map((function(e){return e+""})).join(", ")],[h.get("Time chunk size"),o.timeChunkSize]];t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(ws,{data:p})})}else"python"===r&&(t=Object(ot.jsx)(Cs,{code:Ns(s,o,c)}));return Object(ot.jsxs)(Ss,{title:o.title||o.name,subheader:"".concat(h.get("Name"),": ").concat(o.name),isIn:a,viewMode:r,setViewMode:i,hasPython:l,children:[n,t]})},ys=function(e){var t,n,a,r=e.isIn,i=e.viewMode,o=e.setViewMode,c=e.placeInfo,s=gs(),l=c.place;if("code"===i)t=Object(ot.jsx)(Ts,{code:JSON.stringify(l,null,2)});else if("list"===i)if(l.properties){var u=Object.getOwnPropertyNames(l.properties).map((function(e){return[e,l.properties[e]]}));t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(ws,{data:u})})}else t=Object(ot.jsx)(ks,{children:Object(ot.jsx)(pr.a,{children:h.get("There is no information available for this location.")})});else c.image&&c.image.startsWith("http")&&(n=Object(ot.jsx)(Jc.a,{className:s.media,image:c.image,title:c.label})),c.description&&(a=Object(ot.jsx)(ks,{children:Object(ot.jsx)(pr.a,{children:c.description})}));return Object(ot.jsxs)(Ss,{title:c.label,subheader:"".concat(h.get("Geometry type"),": ").concat(h.get(l.geometry.type)),isIn:r,viewMode:i,setViewMode:o,children:[n,a,t]})},Ss=function(e){var t=e.isIn,n=e.title,a=e.subheader,r=e.viewMode,i=e.setViewMode,o=e.hasPython,c=e.children;return Object(ot.jsxs)(qc.a,{in:t,timeout:"auto",unmountOnExit:!0,children:[Object(ot.jsx)(Hc.a,{title:n,subheader:a,action:Object(ot.jsxs)(Zi.a,{size:"small",value:r,exclusive:!0,onChange:function(e,t){i(t)},children:[Object(ot.jsx)(Ki.a,{value:"text",children:Object(ot.jsx)(ds.a,{})},0),Object(ot.jsx)(Ki.a,{value:"list",children:Object(ot.jsx)(cs.a,{})},1),Object(ot.jsx)(Ki.a,{value:"code",children:Object(ot.jsx)(as.a,{})},2),o&&Object(ot.jsx)(Ki.a,{value:"python",children:Object(ot.jsx)("img",{src:hs,width:24,alt:"python logo"})},3)]},0)}),c]})},ws=function(e){var t=e.data,n=gs();return Object(ot.jsx)(es.a,{component:Ur.a,className:n.keyValueTableContainer,children:Object(ot.jsx)(Qc.a,{className:n.table,size:"small",children:Object(ot.jsx)(Xc.a,{children:t.map((function(e,t){var n=Object(V.a)(e,2),a=n[0],r=n[1],i=r;return"string"===typeof r&&(r.startsWith("http://")||r.startsWith("https://"))?i=Object(ot.jsx)(Yc.a,{href:r,target:"_blank",rel:"noreferrer",children:r}):Array.isArray(r)&&(i="["+r.map((function(e){return e+""})).join(", ")+"]"),Object(ot.jsxs)(ts.a,{children:[Object(ot.jsx)($c.a,{children:a}),Object(ot.jsx)($c.a,{align:"right",children:i})]},t)}))})})})},ks=function(e){var t=e.children,n=gs();return Object(ot.jsx)(Zc.a,{className:n.cardContent,children:t})},Ps=function(e){var t=e.code,n=e.extension;return Object(ot.jsx)(ks,{children:Object(ot.jsx)(ms.a,{theme:Ee.instance.branding.themeName||"light",height:"320px",extensions:[n],value:t,readOnly:!0})})},Ts=function(e){var t=e.code;return Object(ot.jsx)(Ps,{code:t,extension:Object(bs.a)()})},Cs=function(e){var t=e.code;return Object(ot.jsx)(Ps,{code:t,extension:Object(js.a)()})};function Is(e,t){var n,a={},r=Object(u.a)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;i in e&&(a[i]=e[i])}}catch(o){r.e(o)}finally{r.f()}return a}function Es(e,t){return["from xcube.core.store import new_data_store","","store = new_data_store(",'    "s3",','    root="datasets",  # can also use "pyramids" here',"    storage_options={",'        "anon": True,','        "client_kwargs": {','            "endpoint_url": "'.concat(e.url,'/s3"'),"        }","    }",")","# store.list_data_ids()",'dataset = store.open_data("'.concat(t.id,'.zarr")')].join("\n")}function Ns(e,t,n){var a=t.name,r=t.colorBarMin,i=t.colorBarMax,o=t.colorBarName,c="";return null!==n&&(c='.sel(time="'.concat(Vn(n),'", method="nearest")')),["var = dataset.".concat(a).concat(c),"var.plot.imshow(vmin=".concat(r,", vmax=").concat(i,', cmap="').concat(o,'")')].join("\n")}var Ms={showInfoCard:Wa,setVisibleInfoCardElements:function(e){return{type:Ka,visibleElements:e}},updateInfoCardElementViewMode:function(e,t){return{type:Za,elementType:e,viewMode:t}}},As=Object(o.b)((function(e){return{locale:e.controlState.locale,infoCardOpen:e.controlState.infoCardOpen,visibleInfoCardElements:Nn(e),infoCardElementViewModes:Mn(e),selectedDataset:qt(e),selectedVariable:Qt(e),selectedPlaceInfo:fn(e),selectedTime:Wt(e),serverConfig:Rn(e),allowViewModePython:Ee.instance.branding.allowViewModePython}}),Ms)(vs),Rs=n(106),Ls=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e){var a;if(Object(p.a)(this,n),(a=t.call(this,e)).lastPosition=null,a.bodyEventListeners=void 0,!e.onChange)throw Error("onChange property must be provided");return a.onMouseDown=a.onMouseDown.bind(Object(Rs.a)(a)),a.bodyEventListeners=[["mousemove",a.onBodyMouseMove.bind(Object(Rs.a)(a))],["mouseup",a.onBodyMouseUp.bind(Object(Rs.a)(a))],["onmouseenter",a.onBodyMouseEnter.bind(Object(Rs.a)(a))],["onmouseleave",a.onBodyMouseLeave.bind(Object(Rs.a)(a))]],a}return Object(f.a)(n,[{key:"componentWillUnmount",value:function(){this.removeBodyMouseListeners()}},{key:"render",value:function(){return Object(ot.jsx)("div",{className:"hor"===this.props.dir?this.props.classes.hor:this.props.classes.ver,onMouseDown:this.onMouseDown})}},{key:"onMouseDown",value:function(e){this.isButton1Pressed(e)?(this.lastPosition=this.getCurrentPosition(e),this.removeBodyMouseListeners(),this.addBodyMouseListeners()):this.lastPosition=null}},{key:"onBodyMouseMove",value:function(e){if(null!==this.lastPosition&&this.isButton1Pressed(e)){var t=this.getCurrentPosition(e),n=t-this.lastPosition;this.lastPosition=t,0!==n&&this.props.onChange(n)}}},{key:"onBodyMouseUp",value:function(e){this.endDragging()}},{key:"onBodyMouseEnter",value:function(e){this.endDragging()}},{key:"onBodyMouseLeave",value:function(e){this.endDragging()}},{key:"isButton1Pressed",value:function(e){return 0===e.button&&1===e.buttons}},{key:"getCurrentPosition",value:function(e){return"hor"===this.props.dir?e.screenX:e.screenY}},{key:"endDragging",value:function(){this.removeBodyMouseListeners(),this.lastPosition=null}},{key:"addBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.addEventListener(e[0],e[1])}))}},{key:"removeBodyMouseListeners",value:function(){this.bodyEventListeners.forEach((function(e){return document.body.removeEventListener(e[0],e[1])}))}}]),n}(a.PureComponent),zs=Object(hr.a)((function(e){return Object(jr.a)({hor:{flex:"none",border:"none",outline:"none",width:"8px",minHeight:"100%",maxHeight:"100%",cursor:"col-resize",backgroundColor:"dark"===e.palette.mode?"white":"black",opacity:0},ver:{flex:"none",border:"none",outline:"none",height:"8px",minWidth:"100%",maxWidth:"100%",cursor:"row-resize",backgroundColor:"dark"===e.palette.mode?"white":"black",opacity:0}})}))(Ls),Ds=function(e){Object(g.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleSplitDelta=a.handleSplitDelta.bind(Object(Rs.a)(a)),a.state={size:e.initialSize||50},a}return Object(f.a)(n,[{key:"handleSplitDelta",value:function(e){var t=this;this.setState((function(n){var a=n.size,r=a+e;return t.props.onChange&&t.props.onChange(r,a),{size:r}}))}},{key:"render",value:function(){var e,t,n,a,r=this.props.children;if(!r||!Array.isArray(r))return r;if(1===r.length)return r[0];if(r.length>2)throw new Error("SplitPane expects not more than two children");if("hor"===this.props.dir){var i=this.state.size;e=this.props.classes.hor,t=this.props.classes.childVer,n=Object(P.a)({width:i},this.props.child1Style),a=this.props.child2Style}else{var o=this.state.size;e=this.props.classes.ver,t=this.props.classes.childVer,n=Object(P.a)({height:o},this.props.child1Style),a=this.props.child2Style}return Object(ot.jsxs)("div",{id:"SplitPane",className:Pr()(e,this.props.className),style:this.props.style,children:[Object(ot.jsx)("div",{id:"SplitPane-Child-1",className:Pr()(t,this.props.child1ClassName),style:n,children:r[0]}),Object(ot.jsx)(zs,{dir:this.props.dir,onChange:this.handleSplitDelta}),Object(ot.jsx)("div",{id:"SplitPane-Child-2",className:Pr()(t,this.props.child2ClassName),style:a,children:r[1]})]})}}]),n}(a.PureComponent),Bs=Object(hr.a)((function(e){return Object(jr.a)({hor:{display:"flex",flexFlow:"row nowrap",flex:"auto"},ver:{height:"100%",display:"flex",flexFlow:"column nowrap",flex:"auto"},childHor:{flex:"none"},childVer:{flex:"none"}})}))(Ds),Gs={padding:0},_s=function(){return window.innerWidth/window.innerHeight>=1?"hor":"ver"},Fs=Object(o.b)((function(e){return{hasInfoCard:e.controlState.infoCardOpen&&null!==e.controlState.selectedDatasetId&&e.dataState.datasets.length>0,hasTimeseries:e.dataState.timeSeriesGroups.length>0}}),{})(Object(hr.a)((function(e){return Object(jr.a)({splitPaneHor:{flexGrow:1,overflow:"hidden"},splitPaneVer:{flexGrow:1,overflowX:"hidden",overflowY:"auto"},mapPaneHor:Object(P.a)({height:"100%",overflow:"hidden"},Gs),mapPaneVer:Object(P.a)({width:"100%",overflow:"hidden"},Gs),detailsPaneHor:{flex:"auto",overflowX:"hidden",overflowY:"auto"},detailsPaneVer:{width:"100%",overflow:"hidden"},viewerContainer:{overflow:"hidden",width:"100%",height:"100%"}})}))((function(e){var t=e.classes,n=e.hasInfoCard,r=e.hasTimeseries,i=a.useState(null),o=Object(V.a)(i,2),c=o[0],s=o[1],l=a.useState(_s()),u=Object(V.a)(l,2),d=u[0],p=u[1];a.useEffect((function(){f(),window.onresize=f}),[]);var f=function(){p(_s())};if(n||r){var m="hor"===d?t.splitPaneHor:t.splitPaneVer,b="hor"===d?t.mapPaneHor:t.mapPaneVer,j="hor"===d?t.detailsPaneHor:t.detailsPaneVer;return Object(ot.jsxs)(Bs,{dir:d,initialSize:Math.max(window.innerWidth,window.innerHeight)/2,onChange:function(e){c&&c.updateSize()},className:m,child1ClassName:b,child2ClassName:j,children:[Object(ot.jsx)(Oc,{onMapRef:s}),Object(ot.jsxs)("div",{children:[Object(ot.jsx)(As,{}),Object(ot.jsx)(Uc,{})]})]})}return Object(ot.jsx)("div",{className:t.viewerContainer,children:Object(ot.jsx)(Oc,{onMapRef:s})})}))),Vs=Object(o.b)((function(e){return{locale:e.controlState.locale,hasConsent:e.controlState.privacyNoticeAccepted,compact:Ee.instance.branding.compact}}),{})(Object(hr.a)((function(e){return Object(jr.a)({main:Object(Bn.a)({padding:0,width:"100vw",height:"100vh",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"stretch"},e.breakpoints.up("md"),{overflow:"hidden"})})}))((function(e){var t=e.classes,n=e.hasConsent,a=e.compact;return Object(ot.jsxs)("main",{className:t.main,children:[!a&&Object(ot.jsx)(dr.a,{variant:"dense"}),n&&Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(Ro,{}),Object(ot.jsx)(Fs,{})]})]})}))),Us=n(1037),Ws=n(568),Ks=n.n(Ws),Zs=Object(Qr.a)((function(e){return{icon:{marginRight:e.spacing(2)}}}));var Hs={updateSettings:rr,syncWithServer:ba},Js=Object(o.b)((function(e){return{open:!e.controlState.privacyNoticeAccepted,settings:e.controlState}}),Hs)((function(e){var t=e.open,n=e.settings,r=e.updateSettings,i=e.syncWithServer,o=Object(a.useState)(null),c=Object(V.a)(o,2),s=c[0],l=c[1];Object(a.useEffect)((function(){var e=h.get("legal/privacy-note.en.md");fetch(e).then((function(e){return e.text()})).then((function(e){return l(e)}))}));var u=Zs();return t?Object(ot.jsxs)(Mr.a,{open:t,disableEscapeKeyDown:!0,keepMounted:!0,scroll:"body",children:[Object(ot.jsx)(Lr.a,{children:h.get("Privacy Notice")}),Object(ot.jsx)(Rr.a,{children:Object(ot.jsx)(Us.a,{children:null===s?Object(ot.jsx)(Nr.a,{}):Object(ot.jsx)(Yr.a,{children:s,linkTarget:"_blank"})})}),Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsxs)(Er.a,{onClick:function(){r(Object(P.a)(Object(P.a)({},n),{},{privacyNoticeAccepted:!0})),i()},color:"primary",children:[Object(ot.jsx)(Ks.a,{className:u.icon}),h.get("Accept and continue")]}),Object(ot.jsx)(Er.a,{onClick:function(){try{window.history.length>0?window.history.back():"function"===typeof window.home?window.home():window.location.href="about:home"}catch(e){console.error(e)}},children:h.get("Leave")})]})]}):null})),qs=Object(hr.a)((function(e){return Object(jr.a)({progress:{margin:e.spacing(2)},message:{margin:e.spacing(1)},contentContainer:{margin:e.spacing(1),textAlign:"center",display:"flex",alignItems:"center",flexDirection:"column"}})}))((function(e){var t=e.classes,n=e.messages;return 0===n.length?null:Object(ot.jsxs)(Mr.a,{open:!0,"aria-labelledby":"loading",children:[Object(ot.jsx)(Lr.a,{id:"loading",children:h.get("Please wait...")}),Object(ot.jsxs)("div",{className:t.contentContainer,children:[Object(ot.jsx)(Nr.a,{className:t.progress}),n.map((function(e,n){return Object(ot.jsx)(pr.a,{component:"div",className:t.message,children:e},n)}))]})]})})),Ys=Object(o.b)((function(e){return{locale:e.controlState.locale,messages:An(e)}}),{})(qs),Qs=n(1038),Xs=n(1039),$s=n(571),el=n.n($s),tl=n(570),nl=n.n(tl),al=n(569),rl={success:n.n(al).a,warning:nl.a,error:el.a,info:Co.a},il={vertical:"bottom",horizontal:"center"},ol=Object(hr.a)((function(e){return Object(jr.a)({close:{padding:e.spacing(.5)},success:{color:e.palette.error.contrastText,backgroundColor:ce.a[600]},error:{color:e.palette.error.contrastText,backgroundColor:e.palette.error.dark},info:{color:e.palette.error.contrastText,backgroundColor:e.palette.primary.dark},warning:{color:e.palette.error.contrastText,backgroundColor:be.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}})}))((function(e){var t=e.classes,n=e.className,a=e.message,r=e.hideMessage,i=function(){r(a.id)};if(!a)return null;var o=rl[a.type];return Object(ot.jsx)(Qs.a,{open:!0,anchorOrigin:il,autoHideDuration:5e3,onClose:i,children:Object(ot.jsx)(Xs.a,{className:Pr()(t[a.type],n),"aria-describedby":"client-snackbar",message:Object(ot.jsxs)("span",{id:"client-snackbar",className:t.message,children:[Object(ot.jsx)(o,{className:Pr()(t.icon,t.iconVariant)}),a.text]}),action:[Object(ot.jsx)(fr.a,{"aria-label":"Close",color:"inherit",className:t.close,onClick:i,size:"large",children:Object(ot.jsx)($r.a,{className:t.icon})},"close")]})},a.type+":"+a.text)})),cl={hideMessage:function(e){return{type:Zn,messageId:e}}},sl=Object(o.b)((function(e){var t=e.messageLogState.newEntries;return{locale:e.controlState.locale,message:t.length>0?t[0]:null}}),cl)(ol),ll=function(e){var t=e.children,n=Ee.instance.authClient;if(!n)return Object(ot.jsx)(ot.Fragment,{children:t});var a=window.location.origin;return Object(ot.jsx)(Bo,{children:Object(ot.jsx)(Cr.AuthProvider,Object(P.a)(Object(P.a)({},n),{},{loadUserInfo:!0,scope:"openid email profile",automaticSilentRenew:!0,redirect_uri:a,post_logout_redirect_uri:a,popup_post_logout_redirect_uri:a,onSigninCallback:function(e){console.info("handleSigninCallback:",e),window.history.replaceState({},document.title,window.location.pathname)},onRemoveUser:function(){console.info("handleRemoveUser"),window.location.pathname="/"},children:t}))})},ul=n(1024),dl=n(572),pl=n.n(dl),fl=n(574),ml=n.n(fl),bl=n(573),jl=n.n(bl),hl=Object(hr.a)((function(e){return Object(jr.a)({formControl:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:200},textField2:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:400},button:{margin:.1*e.spacing(1)}})}))((function(e){var t=e.classes,n=e.open,r=e.servers,i=e.selectedServer,o=e.closeDialog,c=e.configureServers,s=Object(a.useRef)(!1),l=Object(a.useState)(r),u=Object(V.a)(l,2),d=u[0],p=u[1],f=Object(a.useState)(i),m=Object(V.a)(f,2),b=m[0],j=m[1],g=Object(a.useState)("select"),v=Object(V.a)(g,2),O=v[0],x=v[1];Object(a.useEffect)((function(){s.current&&(p(r),j(i)),s.current=!0}),[r,i]);var y,S,w,k=function(){o("server")},C=function(){var e=b.id;return d.findIndex((function(t){return t.id===e}))},I=function(e,t){var n=Object(T.a)(d);n[e]=t,p(n),j(t),x("select")},E=function(e,t){p(e),j(t),x("select")},N=function(){var e=Object(P.a)(Object(P.a)({},b),{},{id:$()}),t=[].concat(Object(T.a)(d),[e]);E(t,e)},M=function(){I(C(),Object(P.a)({},b))},A=function(){var e=C();I(C(),d[e])},R=function(){var e=Object(T.a)(d);if(e.length<2)throw new Error("internal error: server list cannot be emptied");var t=C(),n=e[t+(t>0?-1:1)];e.splice(t,1),E(e,n)},L=d.map((function(e,t){return Object(ot.jsx)(br.a,{value:e.id,children:e.name},t)}));return y="add"===O?h.get("Add"):"edit"===O?h.get("Save"):h.get("OK"),S="add"===O?h.get("Add Server"):"edit"===O?h.get("Edit Server"):h.get("Select Server"),w="add"===O||"edit"===O?Object(ot.jsxs)(Rr.a,{dividers:!0,children:[Object(ot.jsx)(Yi.a,{variant:"standard",required:!0,id:"server-name",label:"Name",className:t.textField,margin:"normal",value:b.name,onChange:function(e){var t=e.target.value,n=Object(P.a)(Object(P.a)({},b),{},{name:t});j(n)}}),Object(ot.jsx)("br",{}),Object(ot.jsx)(Yi.a,{variant:"standard",required:!0,id:"server-url",label:"URL",className:t.textField2,margin:"normal",value:b.url,onChange:function(e){var t=e.target.value,n=Object(P.a)(Object(P.a)({},b),{},{url:t});j(n)}})]}):Object(ot.jsx)(Rr.a,{dividers:!0,children:Object(ot.jsxs)("div",{children:[Object(ot.jsxs)(ui.a,{variant:"standard",className:t.formControl,children:[Object(ot.jsx)(Xi.a,{htmlFor:"server-name",children:"Name"}),Object(ot.jsx)(li.a,{variant:"standard",value:b.id,onChange:function(e){var t=e.target.value,n=d.find((function(e){return e.id===t}));j(n)},inputProps:{name:"server-name",id:"server-name"},children:L}),Object(ot.jsx)(ul.a,{children:b.url})]}),Object(ot.jsx)(fr.a,{className:t.button,"aria-label":"Add",color:"primary",onClick:function(){x("add")},size:"large",children:Object(ot.jsx)(pl.a,{fontSize:"small"})}),Object(ot.jsx)(fr.a,{className:t.button,"aria-label":"Edit",onClick:function(){x("edit")},size:"large",children:Object(ot.jsx)(jl.a,{fontSize:"small"})}),Object(ot.jsx)(fr.a,{className:t.button,"aria-label":"Delete",disabled:d.length<2,onClick:function(){R()},size:"large",children:Object(ot.jsx)(ml.a,{fontSize:"small"})})]})}),Object(ot.jsxs)(Mr.a,{open:n,onClose:function(){k()},"aria-labelledby":"server-dialog-title",children:[Object(ot.jsx)(Lr.a,{id:"server-dialog-title",children:S}),w,Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsx)(Er.a,{onClick:function(){"select"===O?k():A()},children:h.get("Cancel")}),Object(ot.jsx)(Er.a,{onClick:function(){"select"===O?(o("server"),c(d,b.id)):"add"===O?N():"edit"===O&&M()},autoFocus:!0,color:"primary",children:y})]})]})})),gl={closeDialog:nr,configureServers:function(e,t){return function(n,a){a().controlState.selectedServerId!==t?(n({type:pa}),n(ma(e,t)),n(ba())):a().dataState.userServers!==e&&n(ma(e,t))}}},vl=Object(o.b)((function(e){return{open:!!e.controlState.dialogOpen.server,servers:Nt(e),selectedServer:Rn(e)}}),gl)(hl),Ol=n(1040),xl=n(433),yl=Object(Qr.a)((function(e){return{settingsPanelTitle:{marginBottom:e.spacing(1)},settingsPanelPaper:{backgroundColor:("dark"===e.palette.mode?xl.j:xl.c)(e.palette.background.paper,.1),marginBottom:e.spacing(2)},settingsPanelList:{margin:0}}})),Sl=function(e){var t=e.title,n=e.children,a=yl(),i=r.a.Children.count(n),o=[];return r.a.Children.forEach(n,(function(e,t){o.push(e),t<i-1&&o.push(Object(ot.jsx)(Br.a,{variant:"fullWidth",component:"li"},i+t))})),Object(ot.jsxs)(di.a,{children:[t&&""!==t&&Object(ot.jsx)(pr.a,{variant:"body1",className:a.settingsPanelTitle,children:t}),Object(ot.jsx)(Ur.a,{elevation:4,className:a.settingsPanelPaper,children:Object(ot.jsx)(_r.a,{component:"nav",dense:!0,className:a.settingsPanelList,children:o})})]})},wl=n(1006),kl=function(e){var t,n=e.label,a=e.value,r=e.onClick,i=e.children;a||(t={marginBottom:10});var o,c=Object(ot.jsx)(Vr.a,{primary:n,secondary:a});return i&&(o=Object(ot.jsx)(wl.a,{children:i})),r?Object(ot.jsxs)(Fr.a,{style:t,button:!0,onClick:r,children:[c,o]}):Object(ot.jsxs)(Fr.a,{style:t,children:[c,o]})},Pl=function(e){var t=e.propertyName,n=e.settings,a=e.updateSettings,r=e.disabled;return Object(ot.jsx)(yi.a,{checked:!!n[t],onChange:function(){return a(Object(P.a)(Object(P.a)({},n),{},Object(Bn.a)({},t,!n[t])))},disabled:r})},Tl=n(992),Cl=n(1003),Il=function(e){var t=e.propertyName,n=e.settings,a=e.updateSettings,r=e.options,i=e.disabled;return Object(ot.jsx)(Cl.a,{row:!0,value:n[t],onChange:function(e,r){a(Object(P.a)(Object(P.a)({},n),{},Object(Bn.a)({},t,r)))},children:r.map((function(e){var t=Object(V.a)(e,2),n=t[0],a=t[1];return Object(ot.jsx)(xi.a,{control:Object(ot.jsx)(Tl.a,{}),value:a,label:n,disabled:i},n)}))})},El=Object(Qr.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2},intTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2,width:e.spacing(6)},localeAvatar:{margin:10}}})),Nl=function(e){var t=e.open,n=e.closeDialog,a=e.settings,i=e.selectedServer,o=e.updateSettings,c=e.changeLocale,s=e.openDialog,l=e.viewerVersion,u=e.serverInfo,d=r.a.useState(null),p=Object(V.a)(d,2),f=p[0],m=p[1],b=r.a.useState(null),j=Object(V.a)(b,2),g=j[0],v=j[1],O=r.a.useState(a.timeChunkSize+""),x=Object(V.a)(O,2),y=x[0],S=x[1],w=El();if(r.a.useEffect((function(){var e=parseInt(y);Number.isNaN(e)||e===a.timeChunkSize||o({timeChunkSize:e})}),[y,a,o]),!t)return null;var k=null;Boolean(f)&&(k=Object.getOwnPropertyNames(h.languages).map((function(e){var t=h.languages[e];return Object(ot.jsx)(br.a,{selected:e===a.locale,onClick:function(){return c(e)},children:Object(ot.jsx)(Vr.a,{primary:t})},e)})));var P=null;Boolean(g)&&(P=[],Tt.forEach((function(e,t){P.push(Object(ot.jsx)(Ol.a,{disableSticky:!0,children:e.name},t)),e.datasets.forEach((function(e,n){P.push(Object(ot.jsx)(br.a,{selected:a.baseMapUrl===e.endpoint,onClick:function(){return o({baseMapUrl:e.endpoint})},children:Object(ot.jsx)(Vr.a,{primary:e.name})},t+"."+n))}))})));var T=a.baseMapUrl;return Tt.forEach((function(e){e.datasets.forEach((function(t){t.endpoint===a.baseMapUrl&&(T="".concat(e.name," / ").concat(t.name))}))})),Object(ot.jsxs)("div",{children:[Object(ot.jsxs)(Mr.a,{open:t,fullWidth:!0,maxWidth:"sm",onClose:function(){n("settings")},scroll:"body",children:[Object(ot.jsx)(Lr.a,{children:h.get("Settings")}),Object(ot.jsxs)(Rr.a,{children:[Object(ot.jsxs)(Sl,{title:h.get("General"),children:[Object(ot.jsx)(kl,{label:h.get("Server"),value:i.name,onClick:function(){s("server")}}),Object(ot.jsx)(kl,{label:h.get("Language"),value:h.languages[a.locale],onClick:function(e){m(e.currentTarget)}}),Object(ot.jsx)(kl,{label:h.get("Time interval of the player"),children:Object(ot.jsx)(Yi.a,{variant:"standard",select:!0,className:w.textField,value:a.timeAnimationInterval,onChange:function(e){o({timeAnimationInterval:parseInt(e.target.value)})},margin:"normal",children:Dt.map((function(e,t){return Object(ot.jsx)(br.a,{value:e,children:e+" ms"},t)}))})})]}),Object(ot.jsxs)(Sl,{title:h.get("Time-Series"),children:[Object(ot.jsx)(kl,{label:h.get("Show graph after adding a place"),value:Ml(a.autoShowTimeSeries),children:Object(ot.jsx)(Pl,{propertyName:"autoShowTimeSeries",settings:a,updateSettings:o})}),Object(ot.jsx)(kl,{label:h.get("Show dots only, hide lines"),value:Ml(a.showTimeSeriesPointsOnly),children:Object(ot.jsx)(Pl,{propertyName:"showTimeSeriesPointsOnly",settings:a,updateSettings:o})}),Object(ot.jsx)(kl,{label:h.get("Show error bars"),value:Ml(a.showTimeSeriesErrorBars),children:Object(ot.jsx)(Pl,{propertyName:"showTimeSeriesErrorBars",settings:a,updateSettings:o})}),Object(ot.jsx)(kl,{label:h.get("Show median instead of mean (disables error bars)"),value:Ml(a.showTimeSeriesMedian),children:Object(ot.jsx)(Pl,{propertyName:"showTimeSeriesMedian",settings:a,updateSettings:o})}),Object(ot.jsx)(kl,{label:h.get("Minimal number of data points in a time series update"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:w.intTextField,value:y,onChange:function(e){S(e.target.value)},margin:"normal",size:"small"})})]}),Object(ot.jsxs)(Sl,{title:h.get("Map"),children:[Object(ot.jsx)(kl,{label:h.get("Base map"),value:T,onClick:function(e){v(e.currentTarget)}}),Object(ot.jsx)(kl,{label:h.get("Projection"),children:Object(ot.jsx)(Il,{propertyName:"mapProjection",settings:a,updateSettings:o,options:[[h.get("Geographic"),ft],[h.get("Mercator"),mt]]})}),Object(ot.jsx)(kl,{label:h.get("Image smoothing"),value:Ml(a.imageSmoothingEnabled),children:Object(ot.jsx)(Pl,{propertyName:"imageSmoothingEnabled",settings:a,updateSettings:o})}),Object(ot.jsx)(kl,{label:h.get("Show dataset boundaries"),value:Ml(a.showDatasetBoundaries),children:Object(ot.jsx)(Pl,{propertyName:"showDatasetBoundaries",settings:a,updateSettings:o})})]}),Object(ot.jsx)(Sl,{title:h.get("Legal Agreement"),children:Object(ot.jsx)(Er.a,{onClick:function(){o({privacyNoticeAccepted:!1}),window.location.reload()},children:h.get("Revoke consent")})}),Object(ot.jsxs)(Sl,{title:h.get("System Information"),children:[Object(ot.jsx)(kl,{label:"xcube Viewer ".concat(h.get("version")),value:l}),Object(ot.jsx)(kl,{label:"xcube Server ".concat(h.get("version")),value:u?u.version:h.get("Cannot reach server")})]})]})]}),Object(ot.jsx)(mr.a,{anchorEl:f,keepMounted:!0,open:Boolean(f),onClose:function(){m(null)},children:k}),Object(ot.jsx)(mr.a,{anchorEl:g,keepMounted:!0,open:Boolean(g),onClose:function(){v(null)},children:P})]})},Ml=function(e){return e?h.get("On"):h.get("Off")},Al={closeDialog:nr,updateSettings:rr,changeLocale:Xa,openDialog:er},Rl=Object(o.b)((function(e){return{locale:e.controlState.locale,open:e.controlState.dialogOpen.settings,settings:e.controlState,selectedServer:Rn(e),viewerVersion:"0.13.0-dev.2",serverInfo:e.dataState.serverInfo}}),Al)(Nl),Ll=Object(Qr.a)((function(e){return{separatorTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2,maxWidth:"6em"},fileNameTextField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),fontSize:e.typography.fontSize/2}}})),zl=function(e){var t=e.open,n=e.closeDialog,a=e.settings,r=e.updateSettings,i=e.downloadTimeSeries,o=Ll(),c=function(){n("export")};return Object(ot.jsx)("div",{children:Object(ot.jsxs)(Mr.a,{open:t,fullWidth:!0,maxWidth:"xs",onClose:c,scroll:"body",children:[Object(ot.jsx)(Rr.a,{children:Object(ot.jsxs)(Sl,{title:h.get("Export Settings"),children:[Object(ot.jsx)(kl,{label:h.get("Include time-series data")+" (*.txt)",value:Dl(a.exportTimeSeries),children:Object(ot.jsx)(Pl,{propertyName:"exportTimeSeries",settings:a,updateSettings:r})}),Object(ot.jsx)(kl,{label:h.get("Separator for time-series data"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:o.separatorTextField,value:a.exportTimeSeriesSeparator,onChange:function(e){r({exportTimeSeriesSeparator:e.target.value})},disabled:!a.exportTimeSeries,margin:"normal",size:"small"})}),Object(ot.jsx)(kl,{label:h.get("Include places data")+" (*.geojson)",value:Dl(a.exportPlaces),children:Object(ot.jsx)(Pl,{propertyName:"exportPlaces",settings:a,updateSettings:r})}),Object(ot.jsx)(kl,{label:h.get("Combine place data in one file"),value:Dl(a.exportPlacesAsCollection),children:Object(ot.jsx)(Pl,{propertyName:"exportPlacesAsCollection",settings:a,updateSettings:r,disabled:!a.exportPlaces})}),Object(ot.jsx)(kl,{label:h.get("As ZIP archive"),value:Dl(a.exportZipArchive),children:Object(ot.jsx)(Pl,{propertyName:"exportZipArchive",settings:a,updateSettings:r})}),Object(ot.jsx)(kl,{label:h.get("File name"),children:Object(ot.jsx)(Yi.a,{variant:"standard",className:o.fileNameTextField,value:a.exportFileName,onChange:function(e){r({exportFileName:e.target.value})},margin:"normal",size:"small"})})]})}),Object(ot.jsx)(Ar.a,{children:Object(ot.jsx)(Er.a,{onClick:function(){c(),i()},color:"primary",disabled:!Bl(a),children:h.get("Download")})})]})})},Dl=function(e){return e?h.get("On"):h.get("Off")},Bl=function(e){return(e.exportTimeSeries||e.exportPlaces)&&(n=e.exportFileName,/^[0-9a-zA-Z_-]+$/.test(n))&&(!e.exportTimeSeries||("TAB"===(t=e.exportTimeSeriesSeparator).toUpperCase()||1===t.length));var t,n},Gl={closeDialog:nr,updateSettings:rr,downloadTimeSeries:function(){return function(e,t){var n=t().controlState,a=n.exportTimeSeries,r=n.exportTimeSeriesSeparator,i=n.exportPlaces,o=n.exportPlacesAsCollection,c=n.exportZipArchive,s=n.exportFileName,l=[];a?(l=[],Ct(t()).forEach((function(e){e.placeGroups&&(l=l.concat(e.placeGroups))})),l.push(Et(t()))):i&&(l=ln(t()));!function(e,t,n){var a,r,i=n.includeTimeSeries,o=n.separator,c=n.includePlaces,s=n.fileName,l=n.placesAsCollection,d=n.zip;"TAB"===(o=o||"TAB").toUpperCase()&&(o="\t");if(s=s||"export",!i&&!c)return;a=d?new va("".concat(s,".zip")):new Oa;if(i){var p=function(e,t){var n,a=new Set,r=new Set,i={},o=Object(u.a)(e);try{for(o.s();!(n=o.n()).done;){var c,s=n.value,l=Object(u.a)(s.timeSeriesArray);try{var d=function(){var e=c.value,t=e.source,n=t.placeId,o=t.datasetId,s=t.variableName,l=t.valueDataKey,u=t.errorDataKey;r.add(n);var d="".concat(o,".").concat(s,".").concat(l);a.add(d);var p=null;Boolean(u)&&(p="".concat(o,".").concat(s,".").concat(u),a.add(p)),e.data.forEach((function(e){var t=Vn(e.time),a=n+"-"+t,r=i[a];i[a]=r?Object(P.a)(Object(P.a)({},r),{},Object(Bn.a)({},d,e[l])):Object(Bn.a)({placeId:n,time:t},d,e[l]),null!==p&&(i[a][p]=e[u])}))};for(l.s();!(c=l.n()).done;)d()}catch(b){l.e(b)}finally{l.f()}}}catch(b){o.e(b)}finally{o.f()}var p=["placeId","time"].concat(Array.from(a).sort()),f=[];Object.keys(i).forEach((function(e){var t=i[e],n=new Array(p.length);p.forEach((function(e,a){n[a]=t[e]})),f.push(n)})),f.sort((function(e,t){var n=e[1],a=t[1],r=n.localeCompare(a);if(0!==r)return r;var i=e[0],o=t[0];return i.localeCompare(o)}));var m={};return r.forEach((function(e){m[e]=Je(t,e)})),{colNames:p,dataRows:f,referencedPlaces:m}}(e,t),f=p.colNames,m=p.dataRows,b=p.referencedPlaces,j={number:!0,string:!0},h=f.join(o),g=m.map((function(e){return e.map((function(e){return j[typeof e]?e+"":""})).join(o)})),v=[h].concat(g).join("\n");a.write("".concat(s,".txt"),v),r=b}else r={},t.forEach((function(e){e.features&&e.features.forEach((function(e){r[e.id]=e}))}));if(c)if(l){var O={type:"FeatureCollection",features:Object.keys(r).map((function(e){return r[e]}))};a.write("".concat(s,".geojson"),JSON.stringify(O,null,2))}else Object.keys(r).forEach((function(e){a.write("".concat(e,".geojson"),JSON.stringify(r[e],null,2))}));a.close()}(t().dataState.timeSeriesGroups,l,{includeTimeSeries:a,includePlaces:i,separator:r,placesAsCollection:o,zip:c,fileName:s})}}},_l=Object(o.b)((function(e){return{locale:e.controlState.locale,open:Boolean(e.controlState.dialogOpen.export),settings:e.controlState}}),Gl)(zl),Fl=n(576),Vl=n.n(Fl),Ul=n(575),Wl=n.n(Ul),Kl=function(e){var t=e.title,n=e.accept,r=e.multiple,i=e.disabled,o=e.onSelect,c=e.className,s=a.useRef(null);return Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)("input",{type:"file",accept:n,multiple:r,ref:s,hidden:!0,onChange:function(e){if(null!==e.target.files&&e.target.files.length){for(var t=[],n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);o(t)}},disabled:i}),Object(ot.jsx)(Er.a,{onClick:function(){null!==s.current&&s.current.click()},disabled:i,className:c,variant:"outlined",size:"small",children:t})]})},Zl=function(e){var t=e.options,n=e.updateOptions,a=e.className;return Object(ot.jsxs)("div",{className:a,children:[Object(ot.jsx)(Yi.a,{label:h.get("Label property names"),value:t.labelNames,onChange:function(e){n({labelNames:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1,marginRight:10}}),Object(ot.jsx)(Yi.a,{label:h.get("Label prefix (used as fallback)"),value:t.labelPrefix,onChange:function(e){n({labelPrefix:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1}})]})},Hl=function(e){var t=e.options,n=e.updateOptions,a=e.optionName,r=e.label;return Object(ot.jsx)(Yi.a,{label:h.get(r),value:t[a],onChange:function(e){return n(Object(Bn.a)({},a,e.target.value))},size:"small",variant:"standard"})},Jl=function(e){var t=e.options,n=e.updateOptions;e.className;return Object(ot.jsxs)("div",{children:[Object(ot.jsxs)("div",{style:{display:"grid",gap:12,paddingTop:12,gridTemplateColumns:"auto auto"},children:[Object(ot.jsx)(Hl,{optionName:"xName",label:"X/longitude column name",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"yName",label:"Y/latitude column name",options:t,updateOptions:n}),Object(ot.jsxs)("span",{children:[Object(ot.jsx)(Pi.a,{checked:t.forceGeometry,onChange:function(e){return n({forceGeometry:e.target.checked})},size:"small"}),Object(ot.jsx)("span",{children:"Use geometry column"})]}),Object(ot.jsx)(Hl,{optionName:"geometryName",label:"Geometry column name",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"labelName",label:"Label column name",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"labelPrefix",label:"Label prefix (used as fallback)",options:t,updateOptions:n})]}),Object(ot.jsxs)("div",{style:{display:"grid",gap:12,paddingTop:12,gridTemplateColumns:"auto auto auto"},children:[Object(ot.jsx)(Hl,{optionName:"separator",label:"Separator character",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"comment",label:"Comment character",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"quote",label:"Quote character",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"escape",label:"Escape character",options:t,updateOptions:n}),Object(ot.jsx)("div",{}),Object(ot.jsxs)("span",{children:[Object(ot.jsx)(Pi.a,{checked:t.trim,onChange:function(e){return n({trim:e.target.checked})},size:"small"}),Object(ot.jsx)("span",{children:"Remove whitespaces"})]}),Object(ot.jsx)(Hl,{optionName:"nanToken",label:"Not-a-number token",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"trueToken",label:"True token",options:t,updateOptions:n}),Object(ot.jsx)(Hl,{optionName:"falseToken",label:"False token",options:t,updateOptions:n})]})]})},ql=function(e){var t=e.options,n=e.updateOptions,a=e.className;return Object(ot.jsxs)("div",{className:a,children:[Object(ot.jsx)(Yi.a,{label:h.get("Label"),value:t.label,onChange:function(e){n({label:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1,marginRight:10}}),Object(ot.jsx)(Yi.a,{label:h.get("Label prefix (used as fallback)"),value:t.labelPrefix,onChange:function(e){n({labelPrefix:e.target.value})},size:"small",variant:"standard",style:{flexGrow:1}})]})},Yl=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection"].map((function(e){return e.toLowerCase()}));function Ql(e){if(""===(e=e.trim()))return"csv";if("{"===e[0])return"geojson";var t=e.substr(0,20).toLowerCase();return Yl.find((function(e){return t.startsWith(e)&&(t.length===e.length||"\n\t (".indexOf(t[e.length])>=0)}))?"wkt":"csv"}var Xl={csv:Object(P.a)(Object(P.a)({},H),{},{codeExt:[]}),geojson:Object(P.a)(Object(P.a)({},q),{},{codeExt:[Object(bs.a)()]}),wkt:Object(P.a)(Object(P.a)({},Q),{},{codeExt:[]})},$l=Object(Qr.a)((function(e){return{spacer:{flexGrow:1},actionBox:{paddingTop:e.spacing(.5),display:"flex",flexDirection:"row",alignItems:"center"},actionButton:{marginRight:e.spacing(1)},error:{fontSize:"small"}}})),eu=function(e){var t=e.open,n=e.closeDialog,r=e.userPlacesFormatName,i=e.userPlacesFormatOptions,o=e.updateSettings,c=e.addUserPlacesFromText,s=e.nextMapInteraction,l=e.setMapInteraction,u=a.useState(""),d=Object(V.a)(u,2),p=d[0],f=d[1],m=a.useState(null),b=Object(V.a)(m,2),j=b[0],g=b[1],v=a.useState(!1),O=Object(V.a)(v,2),x=O[0],y=O[1],S=a.useState(!1),w=Object(V.a)(S,2),k=w[0],T=w[1],C=a.useState(r),I=Object(V.a)(C,2),E=I[0],N=I[1],M=a.useState(i),A=Object(V.a)(M,2),R=A[0],L=A[1],z=$l();if(a.useEffect((function(){N(r)}),[r]),a.useEffect((function(){L(i)}),[i]),!t)return null;var D,B=function(){l(s),n("addUserPlacesFromText")},G=function(){console.info("PASTE!",p)};return D="csv"===E?Object(ot.jsx)(Jl,{options:R.csv,updateOptions:function(e){L(Object(P.a)(Object(P.a)({},R),{},{csv:Object(P.a)(Object(P.a)({},R.csv),e)}))},className:z.actionBox}):"geojson"===E?Object(ot.jsx)(Zl,{options:R.geojson,updateOptions:function(e){L(Object(P.a)(Object(P.a)({},R),{},{geojson:Object(P.a)(Object(P.a)({},R.geojson),e)}))},className:z.actionBox}):Object(ot.jsx)(ql,{options:R.wkt,updateOptions:function(e){L(Object(P.a)(Object(P.a)({},R),{},{wkt:Object(P.a)(Object(P.a)({},R.wkt),e)}))},className:z.actionBox}),Object(ot.jsxs)(Mr.a,{fullWidth:!0,open:t,onClose:B,"aria-labelledby":"server-dialog-title",children:[Object(ot.jsx)(Lr.a,{id:"server-dialog-title",children:h.get("Add Places")}),Object(ot.jsxs)(Rr.a,{dividers:!0,children:[Object(ot.jsxs)(Cl.a,{row:!0,value:E,onChange:function(e){return function(e){N(e.target.value)}(e)},children:[Object(ot.jsx)(xi.a,{value:"csv",label:h.get(H.name),control:Object(ot.jsx)(Tl.a,{})},"csv"),Object(ot.jsx)(xi.a,{value:"geojson",label:h.get(q.name),control:Object(ot.jsx)(Tl.a,{})},"geojson"),Object(ot.jsx)(xi.a,{value:"wkt",label:h.get(Q.name),control:Object(ot.jsx)(Tl.a,{})},"wkt")]}),Object(ot.jsx)(ms.a,{theme:Ee.instance.branding.themeName||"light",placeholder:h.get("Enter text or drag & drop a text file."),autoFocus:!0,height:"400px",extensions:Xl[E].codeExt,value:p,onChange:function(e){var t=E;""===p&&e.length>10&&(t=Ql(e),N(t)),f(e),g(Xl[t].checkError(e))},onDrop:function(){f("")},onPaste:G,onPasteCapture:G}),j&&Object(ot.jsx)(pr.a,{color:"error",className:z.error,children:j}),Object(ot.jsxs)("div",{className:z.actionBox,children:[Object(ot.jsx)(Kl,{title:h.get("From File")+"...",accept:Xl[E].fileExt,multiple:!1,onSelect:function(e){var t=e[0];y(!0);var n=new FileReader;n.onloadend=function(){var e=n.result;N(Ql(e)),f(e),y(!1)},n.onabort=n.onerror=function(){y(!1)},n.readAsText(t,"UTF-8")},disabled:x,className:z.actionButton}),Object(ot.jsx)(Er.a,{onClick:function(){f("")},disabled:""===p.trim()||x,className:z.actionButton,variant:"outlined",size:"small",children:h.get("Clear")}),Object(ot.jsx)(di.a,{className:z.spacer}),Object(ot.jsx)(Er.a,{onClick:function(){return T(!k)},endIcon:k?Object(ot.jsx)(Wl.a,{}):Object(ot.jsx)(Vl.a,{}),variant:"outlined",size:"small",children:h.get("Options")})]}),Object(ot.jsx)(qc.a,{in:k,timeout:"auto",unmountOnExit:!0,children:D})]}),Object(ot.jsxs)(Ar.a,{children:[Object(ot.jsx)(Er.a,{onClick:B,variant:"text",children:h.get("Cancel")}),Object(ot.jsx)(Er.a,{onClick:function(){l("Select"),n("addUserPlacesFromText"),o({userPlacesFormatName:E,userPlacesFormatOptions:R}),c(p)},disabled:""===p.trim()||null!==j||x,color:"primary",variant:"text",children:h.get("OK")})]})]})},tu={closeDialog:nr,updateSettings:rr,setMapInteraction:Va,addUserPlacesFromText:ia},nu=Object(o.b)((function(e){return{open:!!e.controlState.dialogOpen.addUserPlacesFromText,userPlacesFormatName:e.controlState.userPlacesFormatName,userPlacesFormatOptions:e.controlState.userPlacesFormatOptions,nextMapInteraction:e.controlState.lastMapInteraction}}),tu)(eu),au=Object(o.b)((function(e){return{compact:Ee.instance.branding.compact}}),{})((function(e){var t=e.compact;return Object(ot.jsx)(ll,{children:Object(ot.jsx)(cr.a,{injectFirst:!0,children:Object(ot.jsxs)(sr.a,{theme:Object(ir.a)(Object(or.a)({typography:{fontSize:12,htmlFontSize:14},palette:{mode:Ee.instance.branding.themeName,primary:Ee.instance.branding.primaryColor,secondary:Ee.instance.branding.secondaryColor}})),children:[Object(ot.jsx)(lr.a,{}),!t&&Object(ot.jsx)(ii,{}),Object(ot.jsx)(Vs,{}),Object(ot.jsxs)(ot.Fragment,{children:[Object(ot.jsx)(Ys,{}),Object(ot.jsx)(vl,{}),Object(ot.jsx)(Rl,{}),Object(ot.jsx)(_l,{}),Object(ot.jsx)(nu,{}),Object(ot.jsx)(Js,{}),Object(ot.jsx)(sl,{})]})]})})})}));function ru(){var e=function(){var e=At(Ee.instance.name);if(e)try{return e.getObjectItem("userServers",[])}catch(t){console.warn("failed to load user servers: ".concat(t))}return[]}(),t=[Object(P.a)({},Ee.instance.server)];return e.forEach((function(e){t.find((function(t){return t.id===e.id}))||t.push(e)})),{serverInfo:null,datasets:[],colorBars:null,timeSeriesGroups:[],userPlaceGroup:{id:"user",title:h.get("My places"),type:"FeatureCollection",features:[]},userServers:t}}function iu(e,t){switch(void 0===e&&(e=ru()),t.type){case Jn:return Object(P.a)(Object(P.a)({},e),{},{serverInfo:t.serverInfo});case Xn:return Object(P.a)(Object(P.a)({},e),{},{datasets:t.datasets});case ha:var n=e.datasets.findIndex((function(e){return e.id===t.datasetId}));if(n>=0){var a=e.datasets[n],r=a.variables.findIndex((function(e){return e.name===t.variableName}));if(r>=0){var i=a.variables[r],o=e.datasets.slice(),c=a.variables.slice();return c[r]=Object(P.a)(Object(P.a)({},i),{},{colorBarMin:t.colorBarMinMax[0],colorBarMax:t.colorBarMinMax[1],colorBarName:t.colorBarName,opacity:t.opacity}),o[n]=Object(P.a)(Object(P.a)({},a),{},{variables:c}),Object(P.a)(Object(P.a)({},e),{},{datasets:o})}}return e;case ta:var s=t.placeGroup,l=e.datasets.map((function(e){if(e.placeGroups){var t=e.placeGroups.findIndex((function(e){return e.id===s.id}));if(t>=0){var n=Object(T.a)(e.placeGroups);return n[t]=s,Object(P.a)(Object(P.a)({},e),{},{placeGroups:n})}}return e}));return Object(P.a)(Object(P.a)({},e),{},{datasets:l});case aa:var u=t.id,p=t.label,f=t.color,m={type:"Feature",id:u,geometry:t.geometry,properties:{label:p,color:f}},b=[].concat(Object(T.a)(e.userPlaceGroup.features),[m]),j=Object(P.a)(Object(P.a)({},e.userPlaceGroup),{},{features:b});return Object(P.a)(Object(P.a)({},e),{},{userPlaceGroup:j});case ra:var h=t.places,g=t.mapProjection;h.forEach((function(e){return function(e,t){if(Gt.userLayer){var n=Gt.userLayer,a=n.getSource(),r=(new d.a).readFeature(e,{dataProjection:"EPSG:4326",featureProjection:t});Qo(r,(e.properties||{}).color||"red",Ee.instance.branding.polygonFillOpacity),a.addFeature(r),n.changed()}}(e,g)}));var v=[].concat(Object(T.a)(e.userPlaceGroup.features),Object(T.a)(h)),O=Object(P.a)(Object(P.a)({},e.userPlaceGroup),{},{features:v});return Object(P.a)(Object(P.a)({},e),{},{userPlaceGroup:O});case oa:var x=t.id,y=e.userPlaceGroup.features.findIndex((function(e){return e.id===x}));if(y>=0){ou([x]);var S=Object(T.a)(e.userPlaceGroup.features);S.splice(y,1);var w=Object(P.a)(Object(P.a)({},e.userPlaceGroup),{},{features:S}),k=su(e.timeSeriesGroups,[x]),C=e.timeSeriesGroups;return k.forEach((function(e){C=cu(C,e,"remove","append")})),Object(P.a)(Object(P.a)({},e),{},{userPlaceGroup:w,timeSeriesGroups:C})}return e;case ca:var I=e.userPlaceGroup.features.map((function(e){return e.id}));ou(I);var E=Object(P.a)(Object(P.a)({},e.userPlaceGroup),{},{features:[]}),N=su(e.timeSeriesGroups,I),M=e.timeSeriesGroups;return N.forEach((function(e){M=cu(M,e,"remove","append")})),Object(P.a)(Object(P.a)({},e),{},{userPlaceGroup:E,timeSeriesGroups:M});case ja:return Object(P.a)(Object(P.a)({},e),{},{colorBars:t.colorBars});case ua:var A=t.timeSeries,R=t.updateMode,L=t.dataMode,z=cu(e.timeSeriesGroups,A,R,L);return z!==e.timeSeriesGroups?Object(P.a)(Object(P.a)({},e),{},{timeSeriesGroups:z}):e;case da:var D=e.timeSeriesGroups.findIndex((function(e){return e.id===t.id}));if(D>=0){var B=Object(T.a)(e.timeSeriesGroups);return B.splice(D,1),Object(P.a)(Object(P.a)({},e),{},{timeSeriesGroups:B})}return e;case pa:return Object(P.a)(Object(P.a)({},e),{},{timeSeriesGroups:[]});case fa:return e.userServers!==t.servers?(function(e){var t=At(Ee.instance.name);if(t)try{t.setObjectItem("userServers",e)}catch(n){console.warn("failed to store user servers: ".concat(n))}}(t.servers),Object(P.a)(Object(P.a)({},e),{},{userServers:t.servers})):e}return e}function ou(e){if(Gt.userLayer){var t=Gt.userLayer.getSource();e.forEach((function(e){var n=t.getFeatureById(e);n&&t.removeFeature(n)}))}}function cu(e,t,n,a){var r,i=t,o=e.findIndex((function(e){return e.variableUnits===i.source.variableUnits}));if(o>=0){var c,s=e[o],l=s.timeSeriesArray,u=l.findIndex((function(e){return e.source.datasetId===i.source.datasetId&&e.source.variableName===i.source.variableName&&e.source.placeId===i.source.placeId}));if(u>=0){var d=l[u];"append"===a&&(i=Object(P.a)(Object(P.a)({},i),{},{data:[].concat(Object(T.a)(i.data),Object(T.a)(d.data))})),"replace"===n?c=[i]:"add"===n?(c=l.slice())[u]=i:(c=l.slice()).splice(u,1)}else c="replace"===n?[i]:"add"===n?[i].concat(Object(T.a)(l)):l;"replace"===n?r=[Object(P.a)(Object(P.a)({},s),{},{timeSeriesArray:c})]:"add"===n||c.length>=0?(r=e.slice())[o]=Object(P.a)(Object(P.a)({},s),{},{timeSeriesArray:c}):(r=e.slice()).splice(o,1)}else{if("replace"===n)r=[{id:$(),variableUnits:i.source.variableUnits,timeSeriesArray:[i]}];else if("add"===n){r=[{id:$(),variableUnits:i.source.variableUnits,timeSeriesArray:[i]}].concat(Object(T.a)(e))}else r=e}return r}function su(e,t){var n=[];return e.forEach((function(e){e.timeSeriesArray.forEach((function(e){t.forEach((function(t){e.source.placeId===t&&n.push(e)}))}))})),n}function lu(e,t,n){switch(void 0===e&&(e=Bt()),t.type){case ar:var a=Object(P.a)(Object(P.a)({},e),t.settings);return zt(a),a;case Xn:var r=e.selectedDatasetId||Ie.get("dataset"),i=e.selectedVariableName||Ie.get("variable"),o=e.mapInteraction,c=R(t.datasets,r),s=c&&L(c,i)||null;return c?s||(i=c.variables.length?c.variables[0].name:null):(r=null,i=null,(c=t.datasets.length?t.datasets[0]:null)&&(r=c.id,c.variables.length>0&&(i=c.variables[0].name))),r||(o="Select"),Object(P.a)(Object(P.a)({},e),{},{selectedDatasetId:r,selectedVariableName:i,mapInteraction:o});case xa:var l=e.selectedVariableName,u=R(t.datasets,t.selectedDatasetId);!L(u,l)&&u.variables.length>0&&(l=u.variables[0].name);var d=t.selectedDatasetId,p=D(u),f=p?p[1]:null;return Object(P.a)(Object(P.a)({},e),{},{selectedDatasetId:d,selectedVariableName:l,selectedTimeRange:p,selectedTime:f});case Pa:var m=Gt[t.mapId],b=t.location;if(m instanceof dt.a&&null!==b){var j,g=m,v=g.getView().getProjection();Array.isArray(b)?(j=Object(Ho.n)(b,ft,v),g.getView().fit(j,{size:g.getSize()})):"Point"===(j=b.transform(ft,v)).getType()?g.getView().setCenter(j.getFirstCoordinate()):g.getView().fit(j,{size:g.getSize()})}return e.flyTo!==t.location?Object(P.a)(Object(P.a)({},e),{},{flyTo:t.location}):e;case Ca:var O=t.selectedPlaceGroupIds;return Object(P.a)(Object(P.a)({},e),{},{selectedPlaceGroupIds:O,selectedPlaceId:null});case Ea:var x=t.selectedPlaceId;return Object(P.a)(Object(P.a)({},e),{},{selectedPlaceId:x});case Aa:return Object(P.a)(Object(P.a)({},e),{},{selectedVariableName:t.selectedVariableName});case Ma:return Object(P.a)(Object(P.a)({},e),{},{showRgbLayer:t.showRgbLayer});case Ra:var y=t.selectedTime;if(null!==y&&n){var S=xn(n),w=S?Pt(S,y):-1;w>=0&&(y=S[w])}return e.selectedTime!==y?Object(P.a)(Object(P.a)({},e),{},{selectedTime:y}):e;case za:if(n){var k=yn(n);if(k>=0){var T=xn(n);(k+=t.increment)<0&&(k=T.length-1),k>T.length-1&&(k=0);var C=T[k],I=e.selectedTimeRange;if(null!==I&&(C<I[0]&&(C=I[0]),C>I[1]&&(C=I[1])),e.selectedTime!==C)return Object(P.a)(Object(P.a)({},e),{},{selectedTime:C})}}return e;case Da:return Object(P.a)(Object(P.a)({},e),{},{selectedTimeRange:t.selectedTimeRange});case Ga:return Object(P.a)(Object(P.a)({},e),{},{timeSeriesUpdateMode:t.timeSeriesUpdateMode});case _a:return Object(P.a)(Object(P.a)({},e),{},{timeAnimationActive:t.timeAnimationActive,timeAnimationInterval:t.timeAnimationInterval});case aa:return t.selectPlace?uu(e,t.id):e;case ra:return t.selectPlace&&t.places.length?uu(e,t.places[0].id):e;case oa:var E=t.id,N=t.places;if(E===e.selectedPlaceId){var M=null,A=N.findIndex((function(e){return e.id===E}));return A>=0&&(A<N.length-1?M=N[A+1].id:A>0&&(M=N[A-1].id)),Object(P.a)(Object(P.a)({},e),{},{selectedPlaceId:M})}return e;case Fa:var z=Object(P.a)(Object(P.a)({},e),{},{mapInteraction:t.mapInteraction,lastMapInteraction:e.mapInteraction});return"Geometry"===t.mapInteraction&&(z=Object(P.a)(Object(P.a)({},z),{},{dialogOpen:Object(P.a)(Object(P.a)({},e.dialogOpen),{},{addUserPlacesFromText:!0})})),z;case Ua:return zt(e=Object(P.a)(Object(P.a)({},e),{},{infoCardOpen:t.infoCardOpen})),e;case Ka:var B=Object(P.a)({},e.infoCardElementStates);return Object.getOwnPropertyNames(B).forEach((function(e){B[e]=Object(P.a)(Object(P.a)({},B[e]),{},{visible:t.visibleElements.includes(e)})})),zt(e=Object(P.a)(Object(P.a)({},e),{},{infoCardElementStates:B})),e;case Za:return zt(e=Object(P.a)(Object(P.a)({},e),{},{infoCardElementStates:Object(P.a)(Object(P.a)({},e.infoCardElementStates),{},Object(Bn.a)({},t.elementType,Object(P.a)(Object(P.a)({},e.infoCardElementStates[t.elementType]),{},{viewMode:t.viewMode})))})),e;case Ha:return Object(P.a)(Object(P.a)({},e),{},{activities:Object(P.a)(Object(P.a)({},e.activities),{},Object(Bn.a)({},t.id,t.message))});case qa:var G=Object(P.a)({},e.activities);return delete G[t.id],Object(P.a)(Object(P.a)({},e),{},{activities:G});case Qa:var _=t.locale;return h.locale=_,_!==e.locale&&zt(e=Object(P.a)(Object(P.a)({},e),{},{locale:_})),e;case $a:var F=t.dialogId;return Object(P.a)(Object(P.a)({},e),{},{dialogOpen:Object(P.a)(Object(P.a)({},e.dialogOpen),{},Object(Bn.a)({},F,!0))});case tr:var V=t.dialogId;return Object(P.a)(Object(P.a)({},e),{},{dialogOpen:Object(P.a)(Object(P.a)({},e.dialogOpen),{},Object(Bn.a)({},V,!1))});case fa:if(e.selectedServerId!==t.selectedServerId)return Object(P.a)(Object(P.a)({},e),{},{selectedServerId:t.selectedServerId})}return e}function uu(e,t){var n;return n=e.selectedPlaceGroupIds&&0!==e.selectedPlaceGroupIds.length?e.selectedPlaceGroupIds.find((function(e){return"user"===e}))?e.selectedPlaceGroupIds:[].concat(Object(T.a)(e.selectedPlaceGroupIds),["user"]):["user"],Object(P.a)(Object(P.a)({},e),{},{selectedPlaceGroupIds:n,selectedPlaceId:t})}var du=0;function pu(e,t){void 0===e&&(e={newEntries:[],oldEntries:[]});var n=e.newEntries;switch(t.type){case Wn:var a=t.messageType,r=t.messageText,i=n.length?n[0]:null;return i&&a===i.type&&r===i.text?e:(i={id:++du,type:a,text:r},Object(P.a)(Object(P.a)({},e),{},{newEntries:[i].concat(Object(T.a)(n))}));case Zn:var o=n.findIndex((function(e){return e.id===t.messageId}));if(o>=0){var c=n[o],s=Object(T.a)(n);s.splice(o,1);var l=[c].concat(Object(T.a)(e.oldEntries));return Object(P.a)(Object(P.a)({},e),{},{newEntries:s,oldEntries:l})}}return e}function fu(e,t){switch(void 0===e&&(e={accessToken:null}),t.type){case Hr:return Object(P.a)(Object(P.a)({},e),{},{accessToken:t.accessToken})}return e}function mu(e,t){return{dataState:iu(e&&e.dataState,t),controlState:lu(e&&e.controlState,t,e),messageLogState:pu(e&&e.messageLogState,t),userAuthState:fu(e&&e.userAuthState,t)}}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Ee.load().then((function(){var e=s.createLogger({collapsed:!0,diff:!1}),t=c.b(mu,c.a(l.a,e));t.dispatch(Xa(t.getState().controlState.locale)),t.getState().controlState.privacyNoticeAccepted&&t.dispatch(ba()),i.render(Object(ot.jsx)(o.a,{store:t,children:Object(ot.jsx)(au,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}))}},[[878,1,2]]]);
//# sourceMappingURL=main.b9577807.chunk.js.map